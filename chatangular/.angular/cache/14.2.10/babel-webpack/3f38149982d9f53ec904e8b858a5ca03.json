{"ast":null,"code":"/*!\n * Socket.IO v4.5.4\n * (c) 2014-2022 Guillermo Rauch\n * Released under the MIT License.\n */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.io = factory());\n})(this, function () {\n  'use strict';\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n      return typeof obj;\n    } : function (obj) {\n      return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    }, _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    Object.defineProperty(Constructor, \"prototype\", {\n      writable: false\n    });\n    return Constructor;\n  }\n\n  function _extends() {\n    _extends = Object.assign ? Object.assign.bind() : function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n\n      return target;\n    };\n    return _extends.apply(this, arguments);\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    Object.defineProperty(subClass, \"prototype\", {\n      writable: false\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n    return _setPrototypeOf(o, p);\n  }\n\n  function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _construct(Parent, args, Class) {\n    if (_isNativeReflectConstruct()) {\n      _construct = Reflect.construct.bind();\n    } else {\n      _construct = function _construct(Parent, args, Class) {\n        var a = [null];\n        a.push.apply(a, args);\n        var Constructor = Function.bind.apply(Parent, a);\n        var instance = new Constructor();\n        if (Class) _setPrototypeOf(instance, Class.prototype);\n        return instance;\n      };\n    }\n\n    return _construct.apply(null, arguments);\n  }\n\n  function _isNativeFunction(fn) {\n    return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n  }\n\n  function _wrapNativeSuper(Class) {\n    var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n    _wrapNativeSuper = function _wrapNativeSuper(Class) {\n      if (Class === null || !_isNativeFunction(Class)) return Class;\n\n      if (typeof Class !== \"function\") {\n        throw new TypeError(\"Super expression must either be null or a function\");\n      }\n\n      if (typeof _cache !== \"undefined\") {\n        if (_cache.has(Class)) return _cache.get(Class);\n\n        _cache.set(Class, Wrapper);\n      }\n\n      function Wrapper() {\n        return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n      }\n\n      Wrapper.prototype = Object.create(Class.prototype, {\n        constructor: {\n          value: Wrapper,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      return _setPrototypeOf(Wrapper, Class);\n    };\n\n    return _wrapNativeSuper(Class);\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    } else if (call !== void 0) {\n      throw new TypeError(\"Derived constructors may only return object or undefined\");\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n    return function _createSuperInternal() {\n      var Super = _getPrototypeOf(Derived),\n          result;\n\n      if (hasNativeReflectConstruct) {\n        var NewTarget = _getPrototypeOf(this).constructor;\n\n        result = Reflect.construct(Super, arguments, NewTarget);\n      } else {\n        result = Super.apply(this, arguments);\n      }\n\n      return _possibleConstructorReturn(this, result);\n    };\n  }\n\n  function _superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = _getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function _get() {\n    if (typeof Reflect !== \"undefined\" && Reflect.get) {\n      _get = Reflect.get.bind();\n    } else {\n      _get = function _get(target, property, receiver) {\n        var base = _superPropBase(target, property);\n\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(arguments.length < 3 ? target : receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return _get.apply(this, arguments);\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _createForOfIteratorHelper(o, allowArrayLike) {\n    var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n    if (!it) {\n      if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n        if (it) o = it;\n        var i = 0;\n\n        var F = function () {};\n\n        return {\n          s: F,\n          n: function () {\n            if (i >= o.length) return {\n              done: true\n            };\n            return {\n              done: false,\n              value: o[i++]\n            };\n          },\n          e: function (e) {\n            throw e;\n          },\n          f: F\n        };\n      }\n\n      throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n\n    var normalCompletion = true,\n        didErr = false,\n        err;\n    return {\n      s: function () {\n        it = it.call(o);\n      },\n      n: function () {\n        var step = it.next();\n        normalCompletion = step.done;\n        return step;\n      },\n      e: function (e) {\n        didErr = true;\n        err = e;\n      },\n      f: function () {\n        try {\n          if (!normalCompletion && it.return != null) it.return();\n        } finally {\n          if (didErr) throw err;\n        }\n      }\n    };\n  }\n\n  var PACKET_TYPES = Object.create(null); // no Map = no polyfill\n\n  PACKET_TYPES[\"open\"] = \"0\";\n  PACKET_TYPES[\"close\"] = \"1\";\n  PACKET_TYPES[\"ping\"] = \"2\";\n  PACKET_TYPES[\"pong\"] = \"3\";\n  PACKET_TYPES[\"message\"] = \"4\";\n  PACKET_TYPES[\"upgrade\"] = \"5\";\n  PACKET_TYPES[\"noop\"] = \"6\";\n  var PACKET_TYPES_REVERSE = Object.create(null);\n  Object.keys(PACKET_TYPES).forEach(function (key) {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n  });\n  var ERROR_PACKET = {\n    type: \"error\",\n    data: \"parser error\"\n  };\n  var withNativeBlob$1 = typeof Blob === \"function\" || typeof Blob !== \"undefined\" && Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\";\n  var withNativeArrayBuffer$2 = typeof ArrayBuffer === \"function\"; // ArrayBuffer.isView method is not defined in IE10\n\n  var isView$1 = function isView(obj) {\n    return typeof ArrayBuffer.isView === \"function\" ? ArrayBuffer.isView(obj) : obj && obj.buffer instanceof ArrayBuffer;\n  };\n\n  var encodePacket = function encodePacket(_ref, supportsBinary, callback) {\n    var type = _ref.type,\n        data = _ref.data;\n\n    if (withNativeBlob$1 && data instanceof Blob) {\n      if (supportsBinary) {\n        return callback(data);\n      } else {\n        return encodeBlobAsBase64(data, callback);\n      }\n    } else if (withNativeArrayBuffer$2 && (data instanceof ArrayBuffer || isView$1(data))) {\n      if (supportsBinary) {\n        return callback(data);\n      } else {\n        return encodeBlobAsBase64(new Blob([data]), callback);\n      }\n    } // plain string\n\n\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n  };\n\n  var encodeBlobAsBase64 = function encodeBlobAsBase64(data, callback) {\n    var fileReader = new FileReader();\n\n    fileReader.onload = function () {\n      var content = fileReader.result.split(\",\")[1];\n      callback(\"b\" + content);\n    };\n\n    return fileReader.readAsDataURL(data);\n  };\n\n  var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'; // Use a lookup table to find the index.\n\n  var lookup$1 = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\n\n  for (var i$1 = 0; i$1 < chars.length; i$1++) {\n    lookup$1[chars.charCodeAt(i$1)] = i$1;\n  }\n\n  var decode$1 = function decode(base64) {\n    var bufferLength = base64.length * 0.75,\n        len = base64.length,\n        i,\n        p = 0,\n        encoded1,\n        encoded2,\n        encoded3,\n        encoded4;\n\n    if (base64[base64.length - 1] === '=') {\n      bufferLength--;\n\n      if (base64[base64.length - 2] === '=') {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n        bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i += 4) {\n      encoded1 = lookup$1[base64.charCodeAt(i)];\n      encoded2 = lookup$1[base64.charCodeAt(i + 1)];\n      encoded3 = lookup$1[base64.charCodeAt(i + 2)];\n      encoded4 = lookup$1[base64.charCodeAt(i + 3)];\n      bytes[p++] = encoded1 << 2 | encoded2 >> 4;\n      bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;\n      bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;\n    }\n\n    return arraybuffer;\n  };\n\n  var withNativeArrayBuffer$1 = typeof ArrayBuffer === \"function\";\n\n  var decodePacket = function decodePacket(encodedPacket, binaryType) {\n    if (typeof encodedPacket !== \"string\") {\n      return {\n        type: \"message\",\n        data: mapBinary(encodedPacket, binaryType)\n      };\n    }\n\n    var type = encodedPacket.charAt(0);\n\n    if (type === \"b\") {\n      return {\n        type: \"message\",\n        data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n      };\n    }\n\n    var packetType = PACKET_TYPES_REVERSE[type];\n\n    if (!packetType) {\n      return ERROR_PACKET;\n    }\n\n    return encodedPacket.length > 1 ? {\n      type: PACKET_TYPES_REVERSE[type],\n      data: encodedPacket.substring(1)\n    } : {\n      type: PACKET_TYPES_REVERSE[type]\n    };\n  };\n\n  var decodeBase64Packet = function decodeBase64Packet(data, binaryType) {\n    if (withNativeArrayBuffer$1) {\n      var decoded = decode$1(data);\n      return mapBinary(decoded, binaryType);\n    } else {\n      return {\n        base64: true,\n        data: data\n      }; // fallback for old browsers\n    }\n  };\n\n  var mapBinary = function mapBinary(data, binaryType) {\n    switch (binaryType) {\n      case \"blob\":\n        return data instanceof ArrayBuffer ? new Blob([data]) : data;\n\n      case \"arraybuffer\":\n      default:\n        return data;\n      // assuming the data is already an ArrayBuffer\n    }\n  };\n\n  var SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\n\n  var encodePayload = function encodePayload(packets, callback) {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    var length = packets.length;\n    var encodedPackets = new Array(length);\n    var count = 0;\n    packets.forEach(function (packet, i) {\n      // force base64 encoding for binary packets\n      encodePacket(packet, false, function (encodedPacket) {\n        encodedPackets[i] = encodedPacket;\n\n        if (++count === length) {\n          callback(encodedPackets.join(SEPARATOR));\n        }\n      });\n    });\n  };\n\n  var decodePayload = function decodePayload(encodedPayload, binaryType) {\n    var encodedPackets = encodedPayload.split(SEPARATOR);\n    var packets = [];\n\n    for (var i = 0; i < encodedPackets.length; i++) {\n      var decodedPacket = decodePacket(encodedPackets[i], binaryType);\n      packets.push(decodedPacket);\n\n      if (decodedPacket.type === \"error\") {\n        break;\n      }\n    }\n\n    return packets;\n  };\n\n  var protocol$1 = 4;\n  /**\n   * Initialize a new `Emitter`.\n   *\n   * @api public\n   */\n\n  function Emitter(obj) {\n    if (obj) return mixin(obj);\n  }\n  /**\n   * Mixin the emitter properties.\n   *\n   * @param {Object} obj\n   * @return {Object}\n   * @api private\n   */\n\n\n  function mixin(obj) {\n    for (var key in Emitter.prototype) {\n      obj[key] = Emitter.prototype[key];\n    }\n\n    return obj;\n  }\n  /**\n   * Listen on the given `event` with `fn`.\n   *\n   * @param {String} event\n   * @param {Function} fn\n   * @return {Emitter}\n   * @api public\n   */\n\n\n  Emitter.prototype.on = Emitter.prototype.addEventListener = function (event, fn) {\n    this._callbacks = this._callbacks || {};\n    (this._callbacks['$' + event] = this._callbacks['$' + event] || []).push(fn);\n    return this;\n  };\n  /**\n   * Adds an `event` listener that will be invoked a single\n   * time then automatically removed.\n   *\n   * @param {String} event\n   * @param {Function} fn\n   * @return {Emitter}\n   * @api public\n   */\n\n\n  Emitter.prototype.once = function (event, fn) {\n    function on() {\n      this.off(event, on);\n      fn.apply(this, arguments);\n    }\n\n    on.fn = fn;\n    this.on(event, on);\n    return this;\n  };\n  /**\n   * Remove the given callback for `event` or all\n   * registered callbacks.\n   *\n   * @param {String} event\n   * @param {Function} fn\n   * @return {Emitter}\n   * @api public\n   */\n\n\n  Emitter.prototype.off = Emitter.prototype.removeListener = Emitter.prototype.removeAllListeners = Emitter.prototype.removeEventListener = function (event, fn) {\n    this._callbacks = this._callbacks || {}; // all\n\n    if (0 == arguments.length) {\n      this._callbacks = {};\n      return this;\n    } // specific event\n\n\n    var callbacks = this._callbacks['$' + event];\n    if (!callbacks) return this; // remove all handlers\n\n    if (1 == arguments.length) {\n      delete this._callbacks['$' + event];\n      return this;\n    } // remove specific handler\n\n\n    var cb;\n\n    for (var i = 0; i < callbacks.length; i++) {\n      cb = callbacks[i];\n\n      if (cb === fn || cb.fn === fn) {\n        callbacks.splice(i, 1);\n        break;\n      }\n    } // Remove event specific arrays for event types that no\n    // one is subscribed for to avoid memory leak.\n\n\n    if (callbacks.length === 0) {\n      delete this._callbacks['$' + event];\n    }\n\n    return this;\n  };\n  /**\n   * Emit `event` with the given args.\n   *\n   * @param {String} event\n   * @param {Mixed} ...\n   * @return {Emitter}\n   */\n\n\n  Emitter.prototype.emit = function (event) {\n    this._callbacks = this._callbacks || {};\n    var args = new Array(arguments.length - 1),\n        callbacks = this._callbacks['$' + event];\n\n    for (var i = 1; i < arguments.length; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    if (callbacks) {\n      callbacks = callbacks.slice(0);\n\n      for (var i = 0, len = callbacks.length; i < len; ++i) {\n        callbacks[i].apply(this, args);\n      }\n    }\n\n    return this;\n  }; // alias used for reserved events (protected method)\n\n\n  Emitter.prototype.emitReserved = Emitter.prototype.emit;\n  /**\n   * Return array of callbacks for `event`.\n   *\n   * @param {String} event\n   * @return {Array}\n   * @api public\n   */\n\n  Emitter.prototype.listeners = function (event) {\n    this._callbacks = this._callbacks || {};\n    return this._callbacks['$' + event] || [];\n  };\n  /**\n   * Check if this emitter has `event` handlers.\n   *\n   * @param {String} event\n   * @return {Boolean}\n   * @api public\n   */\n\n\n  Emitter.prototype.hasListeners = function (event) {\n    return !!this.listeners(event).length;\n  };\n\n  var globalThisShim = function () {\n    if (typeof self !== \"undefined\") {\n      return self;\n    } else if (typeof window !== \"undefined\") {\n      return window;\n    } else {\n      return Function(\"return this\")();\n    }\n  }();\n\n  function pick(obj) {\n    for (var _len = arguments.length, attr = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      attr[_key - 1] = arguments[_key];\n    }\n\n    return attr.reduce(function (acc, k) {\n      if (obj.hasOwnProperty(k)) {\n        acc[k] = obj[k];\n      }\n\n      return acc;\n    }, {});\n  } // Keep a reference to the real timeout functions so they can be used when overridden\n\n\n  var NATIVE_SET_TIMEOUT = setTimeout;\n  var NATIVE_CLEAR_TIMEOUT = clearTimeout;\n\n  function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n      obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThisShim);\n      obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThisShim);\n    } else {\n      obj.setTimeoutFn = setTimeout.bind(globalThisShim);\n      obj.clearTimeoutFn = clearTimeout.bind(globalThisShim);\n    }\n  } // base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\n\n\n  var BASE64_OVERHEAD = 1.33; // we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\n\n  function byteLength(obj) {\n    if (typeof obj === \"string\") {\n      return utf8Length(obj);\n    } // arraybuffer or blob\n\n\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n  }\n\n  function utf8Length(str) {\n    var c = 0,\n        length = 0;\n\n    for (var i = 0, l = str.length; i < l; i++) {\n      c = str.charCodeAt(i);\n\n      if (c < 0x80) {\n        length += 1;\n      } else if (c < 0x800) {\n        length += 2;\n      } else if (c < 0xd800 || c >= 0xe000) {\n        length += 3;\n      } else {\n        i++;\n        length += 4;\n      }\n    }\n\n    return length;\n  }\n\n  var TransportError = /*#__PURE__*/function (_Error) {\n    _inherits(TransportError, _Error);\n\n    var _super = _createSuper(TransportError);\n\n    function TransportError(reason, description, context) {\n      var _this;\n\n      _classCallCheck(this, TransportError);\n\n      _this = _super.call(this, reason);\n      _this.description = description;\n      _this.context = context;\n      _this.type = \"TransportError\";\n      return _this;\n    }\n\n    return _createClass(TransportError);\n  }( /*#__PURE__*/_wrapNativeSuper(Error));\n\n  var Transport = /*#__PURE__*/function (_Emitter) {\n    _inherits(Transport, _Emitter);\n\n    var _super2 = _createSuper(Transport);\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} options.\n     * @api private\n     */\n\n\n    function Transport(opts) {\n      var _this2;\n\n      _classCallCheck(this, Transport);\n\n      _this2 = _super2.call(this);\n      _this2.writable = false;\n      installTimerFunctions(_assertThisInitialized(_this2), opts);\n      _this2.opts = opts;\n      _this2.query = opts.query;\n      _this2.readyState = \"\";\n      _this2.socket = opts.socket;\n      return _this2;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @api protected\n     */\n\n\n    _createClass(Transport, [{\n      key: \"onError\",\n      value: function onError(reason, description, context) {\n        _get(_getPrototypeOf(Transport.prototype), \"emitReserved\", this).call(this, \"error\", new TransportError(reason, description, context));\n\n        return this;\n      }\n      /**\n       * Opens the transport.\n       *\n       * @api public\n       */\n\n    }, {\n      key: \"open\",\n      value: function open() {\n        if (\"closed\" === this.readyState || \"\" === this.readyState) {\n          this.readyState = \"opening\";\n          this.doOpen();\n        }\n\n        return this;\n      }\n      /**\n       * Closes the transport.\n       *\n       * @api public\n       */\n\n    }, {\n      key: \"close\",\n      value: function close() {\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n          this.doClose();\n          this.onClose();\n        }\n\n        return this;\n      }\n      /**\n       * Sends multiple packets.\n       *\n       * @param {Array} packets\n       * @api public\n       */\n\n    }, {\n      key: \"send\",\n      value: function send(packets) {\n        if (\"open\" === this.readyState) {\n          this.write(packets);\n        }\n      }\n      /**\n       * Called upon open\n       *\n       * @api protected\n       */\n\n    }, {\n      key: \"onOpen\",\n      value: function onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n\n        _get(_getPrototypeOf(Transport.prototype), \"emitReserved\", this).call(this, \"open\");\n      }\n      /**\n       * Called with data.\n       *\n       * @param {String} data\n       * @api protected\n       */\n\n    }, {\n      key: \"onData\",\n      value: function onData(data) {\n        var packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n      }\n      /**\n       * Called with a decoded packet.\n       *\n       * @api protected\n       */\n\n    }, {\n      key: \"onPacket\",\n      value: function onPacket(packet) {\n        _get(_getPrototypeOf(Transport.prototype), \"emitReserved\", this).call(this, \"packet\", packet);\n      }\n      /**\n       * Called upon close.\n       *\n       * @api protected\n       */\n\n    }, {\n      key: \"onClose\",\n      value: function onClose(details) {\n        this.readyState = \"closed\";\n\n        _get(_getPrototypeOf(Transport.prototype), \"emitReserved\", this).call(this, \"close\", details);\n      }\n    }]);\n\n    return Transport;\n  }(Emitter); // imported from https://github.com/unshiftio/yeast\n\n\n  var alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''),\n      length = 64,\n      map = {};\n  var seed = 0,\n      i = 0,\n      prev;\n  /**\n   * Return a string representing the specified number.\n   *\n   * @param {Number} num The number to convert.\n   * @returns {String} The string representation of the number.\n   * @api public\n   */\n\n  function encode$1(num) {\n    var encoded = '';\n\n    do {\n      encoded = alphabet[num % length] + encoded;\n      num = Math.floor(num / length);\n    } while (num > 0);\n\n    return encoded;\n  }\n  /**\n   * Yeast: A tiny growing id generator.\n   *\n   * @returns {String} A unique id.\n   * @api public\n   */\n\n\n  function yeast() {\n    var now = encode$1(+new Date());\n    if (now !== prev) return seed = 0, prev = now;\n    return now + '.' + encode$1(seed++);\n  } //\n  // Map each character to its index.\n  //\n\n\n  for (; i < length; i++) {\n    map[alphabet[i]] = i;\n  } // imported from https://github.com/galkn/querystring\n\n  /**\n   * Compiles a querystring\n   * Returns string representation of the object\n   *\n   * @param {Object}\n   * @api private\n   */\n\n\n  function encode(obj) {\n    var str = '';\n\n    for (var i in obj) {\n      if (obj.hasOwnProperty(i)) {\n        if (str.length) str += '&';\n        str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n      }\n    }\n\n    return str;\n  }\n  /**\n   * Parses a simple querystring into an object\n   *\n   * @param {String} qs\n   * @api private\n   */\n\n\n  function decode(qs) {\n    var qry = {};\n    var pairs = qs.split('&');\n\n    for (var i = 0, l = pairs.length; i < l; i++) {\n      var pair = pairs[i].split('=');\n      qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n\n    return qry;\n  } // imported from https://github.com/component/has-cors\n\n\n  var value = false;\n\n  try {\n    value = typeof XMLHttpRequest !== 'undefined' && 'withCredentials' in new XMLHttpRequest();\n  } catch (err) {// if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n  }\n\n  var hasCORS = value; // browser shim for xmlhttprequest module\n\n  function XHR(opts) {\n    var xdomain = opts.xdomain; // XMLHttpRequest can be disabled on IE\n\n    try {\n      if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n        return new XMLHttpRequest();\n      }\n    } catch (e) {}\n\n    if (!xdomain) {\n      try {\n        return new globalThisShim[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n      } catch (e) {}\n    }\n  }\n\n  function empty() {}\n\n  var hasXHR2 = function () {\n    var xhr = new XHR({\n      xdomain: false\n    });\n    return null != xhr.responseType;\n  }();\n\n  var Polling = /*#__PURE__*/function (_Transport) {\n    _inherits(Polling, _Transport);\n\n    var _super = _createSuper(Polling);\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @api public\n     */\n\n\n    function Polling(opts) {\n      var _this;\n\n      _classCallCheck(this, Polling);\n\n      _this = _super.call(this, opts);\n      _this.polling = false;\n\n      if (typeof location !== \"undefined\") {\n        var isSSL = \"https:\" === location.protocol;\n        var port = location.port; // some user agents have empty `location.port`\n\n        if (!port) {\n          port = isSSL ? \"443\" : \"80\";\n        }\n\n        _this.xd = typeof location !== \"undefined\" && opts.hostname !== location.hostname || port !== opts.port;\n        _this.xs = opts.secure !== isSSL;\n      }\n      /**\n       * XHR supports binary\n       */\n\n\n      var forceBase64 = opts && opts.forceBase64;\n      _this.supportsBinary = hasXHR2 && !forceBase64;\n      return _this;\n    }\n    /**\n     * Transport name.\n     */\n\n\n    _createClass(Polling, [{\n      key: \"name\",\n      get: function get() {\n        return \"polling\";\n      }\n      /**\n       * Opens the socket (triggers polling). We write a PING message to determine\n       * when the transport is open.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"doOpen\",\n      value: function doOpen() {\n        this.poll();\n      }\n      /**\n       * Pauses polling.\n       *\n       * @param {Function} callback upon buffers are flushed and transport is paused\n       * @api private\n       */\n\n    }, {\n      key: \"pause\",\n      value: function pause(onPause) {\n        var _this2 = this;\n\n        this.readyState = \"pausing\";\n\n        var pause = function pause() {\n          _this2.readyState = \"paused\";\n          onPause();\n        };\n\n        if (this.polling || !this.writable) {\n          var total = 0;\n\n          if (this.polling) {\n            total++;\n            this.once(\"pollComplete\", function () {\n              --total || pause();\n            });\n          }\n\n          if (!this.writable) {\n            total++;\n            this.once(\"drain\", function () {\n              --total || pause();\n            });\n          }\n        } else {\n          pause();\n        }\n      }\n      /**\n       * Starts polling cycle.\n       *\n       * @api public\n       */\n\n    }, {\n      key: \"poll\",\n      value: function poll() {\n        this.polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n      }\n      /**\n       * Overloads onData to detect payloads.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"onData\",\n      value: function onData(data) {\n        var _this3 = this;\n\n        var callback = function callback(packet) {\n          // if its the first message we consider the transport open\n          if (\"opening\" === _this3.readyState && packet.type === \"open\") {\n            _this3.onOpen();\n          } // if its a close packet, we close the ongoing requests\n\n\n          if (\"close\" === packet.type) {\n            _this3.onClose({\n              description: \"transport closed by the server\"\n            });\n\n            return false;\n          } // otherwise bypass onData and handle the message\n\n\n          _this3.onPacket(packet);\n        }; // decode payload\n\n\n        decodePayload(data, this.socket.binaryType).forEach(callback); // if an event did not trigger closing\n\n        if (\"closed\" !== this.readyState) {\n          // if we got data we're not polling\n          this.polling = false;\n          this.emitReserved(\"pollComplete\");\n\n          if (\"open\" === this.readyState) {\n            this.poll();\n          }\n        }\n      }\n      /**\n       * For polling, send a close packet.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"doClose\",\n      value: function doClose() {\n        var _this4 = this;\n\n        var close = function close() {\n          _this4.write([{\n            type: \"close\"\n          }]);\n        };\n\n        if (\"open\" === this.readyState) {\n          close();\n        } else {\n          // in case we're trying to close while\n          // handshaking is in progress (GH-164)\n          this.once(\"open\", close);\n        }\n      }\n      /**\n       * Writes a packets payload.\n       *\n       * @param {Array} data packets\n       * @param {Function} drain callback\n       * @api private\n       */\n\n    }, {\n      key: \"write\",\n      value: function write(packets) {\n        var _this5 = this;\n\n        this.writable = false;\n        encodePayload(packets, function (data) {\n          _this5.doWrite(data, function () {\n            _this5.writable = true;\n\n            _this5.emitReserved(\"drain\");\n          });\n        });\n      }\n      /**\n       * Generates uri for connection.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"uri\",\n      value: function uri() {\n        var query = this.query || {};\n        var schema = this.opts.secure ? \"https\" : \"http\";\n        var port = \"\"; // cache busting is forced\n\n        if (false !== this.opts.timestampRequests) {\n          query[this.opts.timestampParam] = yeast();\n        }\n\n        if (!this.supportsBinary && !query.sid) {\n          query.b64 = 1;\n        } // avoid port if default for schema\n\n\n        if (this.opts.port && (\"https\" === schema && Number(this.opts.port) !== 443 || \"http\" === schema && Number(this.opts.port) !== 80)) {\n          port = \":\" + this.opts.port;\n        }\n\n        var encodedQuery = encode(query);\n        var ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n        return schema + \"://\" + (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) + port + this.opts.path + (encodedQuery.length ? \"?\" + encodedQuery : \"\");\n      }\n      /**\n       * Creates a request.\n       *\n       * @param {String} method\n       * @api private\n       */\n\n    }, {\n      key: \"request\",\n      value: function request() {\n        var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _extends(opts, {\n          xd: this.xd,\n          xs: this.xs\n        }, this.opts);\n\n        return new Request(this.uri(), opts);\n      }\n      /**\n       * Sends data.\n       *\n       * @param {String} data to send.\n       * @param {Function} called upon flush.\n       * @api private\n       */\n\n    }, {\n      key: \"doWrite\",\n      value: function doWrite(data, fn) {\n        var _this6 = this;\n\n        var req = this.request({\n          method: \"POST\",\n          data: data\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", function (xhrStatus, context) {\n          _this6.onError(\"xhr post error\", xhrStatus, context);\n        });\n      }\n      /**\n       * Starts a poll cycle.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"doPoll\",\n      value: function doPoll() {\n        var _this7 = this;\n\n        var req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", function (xhrStatus, context) {\n          _this7.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n      }\n    }]);\n\n    return Polling;\n  }(Transport);\n\n  var Request = /*#__PURE__*/function (_Emitter) {\n    _inherits(Request, _Emitter);\n\n    var _super2 = _createSuper(Request);\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @api public\n     */\n\n\n    function Request(uri, opts) {\n      var _this8;\n\n      _classCallCheck(this, Request);\n\n      _this8 = _super2.call(this);\n      installTimerFunctions(_assertThisInitialized(_this8), opts);\n      _this8.opts = opts;\n      _this8.method = opts.method || \"GET\";\n      _this8.uri = uri;\n      _this8.async = false !== opts.async;\n      _this8.data = undefined !== opts.data ? opts.data : null;\n\n      _this8.create();\n\n      return _this8;\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @api private\n     */\n\n\n    _createClass(Request, [{\n      key: \"create\",\n      value: function create() {\n        var _this9 = this;\n\n        var opts = pick(this.opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this.opts.xd;\n        opts.xscheme = !!this.opts.xs;\n        var xhr = this.xhr = new XHR(opts);\n\n        try {\n          xhr.open(this.method, this.uri, this.async);\n\n          try {\n            if (this.opts.extraHeaders) {\n              xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n\n              for (var i in this.opts.extraHeaders) {\n                if (this.opts.extraHeaders.hasOwnProperty(i)) {\n                  xhr.setRequestHeader(i, this.opts.extraHeaders[i]);\n                }\n              }\n            }\n          } catch (e) {}\n\n          if (\"POST\" === this.method) {\n            try {\n              xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n            } catch (e) {}\n          }\n\n          try {\n            xhr.setRequestHeader(\"Accept\", \"*/*\");\n          } catch (e) {} // ie6 check\n\n\n          if (\"withCredentials\" in xhr) {\n            xhr.withCredentials = this.opts.withCredentials;\n          }\n\n          if (this.opts.requestTimeout) {\n            xhr.timeout = this.opts.requestTimeout;\n          }\n\n          xhr.onreadystatechange = function () {\n            if (4 !== xhr.readyState) return;\n\n            if (200 === xhr.status || 1223 === xhr.status) {\n              _this9.onLoad();\n            } else {\n              // make sure the `error` event handler that's user-set\n              // does not throw in the same tick and gets caught here\n              _this9.setTimeoutFn(function () {\n                _this9.onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n              }, 0);\n            }\n          };\n\n          xhr.send(this.data);\n        } catch (e) {\n          // Need to defer since .create() is called directly from the constructor\n          // and thus the 'error' event can only be only bound *after* this exception\n          // occurs.  Therefore, also, we cannot throw here at all.\n          this.setTimeoutFn(function () {\n            _this9.onError(e);\n          }, 0);\n          return;\n        }\n\n        if (typeof document !== \"undefined\") {\n          this.index = Request.requestsCount++;\n          Request.requests[this.index] = this;\n        }\n      }\n      /**\n       * Called upon error.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"onError\",\n      value: function onError(err) {\n        this.emitReserved(\"error\", err, this.xhr);\n        this.cleanup(true);\n      }\n      /**\n       * Cleans up house.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"cleanup\",\n      value: function cleanup(fromError) {\n        if (\"undefined\" === typeof this.xhr || null === this.xhr) {\n          return;\n        }\n\n        this.xhr.onreadystatechange = empty;\n\n        if (fromError) {\n          try {\n            this.xhr.abort();\n          } catch (e) {}\n        }\n\n        if (typeof document !== \"undefined\") {\n          delete Request.requests[this.index];\n        }\n\n        this.xhr = null;\n      }\n      /**\n       * Called upon load.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"onLoad\",\n      value: function onLoad() {\n        var data = this.xhr.responseText;\n\n        if (data !== null) {\n          this.emitReserved(\"data\", data);\n          this.emitReserved(\"success\");\n          this.cleanup();\n        }\n      }\n      /**\n       * Aborts the request.\n       *\n       * @api public\n       */\n\n    }, {\n      key: \"abort\",\n      value: function abort() {\n        this.cleanup();\n      }\n    }]);\n\n    return Request;\n  }(Emitter);\n\n  Request.requestsCount = 0;\n  Request.requests = {};\n  /**\n   * Aborts pending requests when unloading the window. This is needed to prevent\n   * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n   * emitted.\n   */\n\n  if (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n      // @ts-ignore\n      attachEvent(\"onunload\", unloadHandler);\n    } else if (typeof addEventListener === \"function\") {\n      var terminationEvent = \"onpagehide\" in globalThisShim ? \"pagehide\" : \"unload\";\n      addEventListener(terminationEvent, unloadHandler, false);\n    }\n  }\n\n  function unloadHandler() {\n    for (var i in Request.requests) {\n      if (Request.requests.hasOwnProperty(i)) {\n        Request.requests[i].abort();\n      }\n    }\n  }\n\n  var nextTick = function () {\n    var isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n\n    if (isPromiseAvailable) {\n      return function (cb) {\n        return Promise.resolve().then(cb);\n      };\n    } else {\n      return function (cb, setTimeoutFn) {\n        return setTimeoutFn(cb, 0);\n      };\n    }\n  }();\n\n  var WebSocket = globalThisShim.WebSocket || globalThisShim.MozWebSocket;\n  var usingBrowserWebSocket = true;\n  var defaultBinaryType = \"arraybuffer\";\n  var isReactNative = typeof navigator !== \"undefined\" && typeof navigator.product === \"string\" && navigator.product.toLowerCase() === \"reactnative\";\n\n  var WS = /*#__PURE__*/function (_Transport) {\n    _inherits(WS, _Transport);\n\n    var _super = _createSuper(WS);\n    /**\n     * WebSocket transport constructor.\n     *\n     * @api {Object} connection options\n     * @api public\n     */\n\n\n    function WS(opts) {\n      var _this;\n\n      _classCallCheck(this, WS);\n\n      _this = _super.call(this, opts);\n      _this.supportsBinary = !opts.forceBase64;\n      return _this;\n    }\n    /**\n     * Transport name.\n     *\n     * @api public\n     */\n\n\n    _createClass(WS, [{\n      key: \"name\",\n      get: function get() {\n        return \"websocket\";\n      }\n      /**\n       * Opens socket.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"doOpen\",\n      value: function doOpen() {\n        if (!this.check()) {\n          // let probe timeout\n          return;\n        }\n\n        var uri = this.uri();\n        var protocols = this.opts.protocols; // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n\n        var opts = isReactNative ? {} : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n\n        if (this.opts.extraHeaders) {\n          opts.headers = this.opts.extraHeaders;\n        }\n\n        try {\n          this.ws = usingBrowserWebSocket && !isReactNative ? protocols ? new WebSocket(uri, protocols) : new WebSocket(uri) : new WebSocket(uri, protocols, opts);\n        } catch (err) {\n          return this.emitReserved(\"error\", err);\n        }\n\n        this.ws.binaryType = this.socket.binaryType || defaultBinaryType;\n        this.addEventListeners();\n      }\n      /**\n       * Adds event listeners to the socket\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"addEventListeners\",\n      value: function addEventListeners() {\n        var _this2 = this;\n\n        this.ws.onopen = function () {\n          if (_this2.opts.autoUnref) {\n            _this2.ws._socket.unref();\n          }\n\n          _this2.onOpen();\n        };\n\n        this.ws.onclose = function (closeEvent) {\n          return _this2.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent\n          });\n        };\n\n        this.ws.onmessage = function (ev) {\n          return _this2.onData(ev.data);\n        };\n\n        this.ws.onerror = function (e) {\n          return _this2.onError(\"websocket error\", e);\n        };\n      }\n      /**\n       * Writes data to socket.\n       *\n       * @param {Array} array of packets.\n       * @api private\n       */\n\n    }, {\n      key: \"write\",\n      value: function write(packets) {\n        var _this3 = this;\n\n        this.writable = false; // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n\n        var _loop = function _loop(i) {\n          var packet = packets[i];\n          var lastPacket = i === packets.length - 1;\n          encodePacket(packet, _this3.supportsBinary, function (data) {\n            // always create a new object (GH-437)\n            var opts = {}; // have a chance of informing us about it yet, in that case send will\n            // throw an error\n\n            try {\n              if (usingBrowserWebSocket) {\n                // TypeError is thrown when passing the second argument on Safari\n                _this3.ws.send(data);\n              }\n            } catch (e) {}\n\n            if (lastPacket) {\n              // fake drain\n              // defer to next tick to allow Socket to clear writeBuffer\n              nextTick(function () {\n                _this3.writable = true;\n\n                _this3.emitReserved(\"drain\");\n              }, _this3.setTimeoutFn);\n            }\n          });\n        };\n\n        for (var i = 0; i < packets.length; i++) {\n          _loop(i);\n        }\n      }\n      /**\n       * Closes socket.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"doClose\",\n      value: function doClose() {\n        if (typeof this.ws !== \"undefined\") {\n          this.ws.close();\n          this.ws = null;\n        }\n      }\n      /**\n       * Generates uri for connection.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"uri\",\n      value: function uri() {\n        var query = this.query || {};\n        var schema = this.opts.secure ? \"wss\" : \"ws\";\n        var port = \"\"; // avoid port if default for schema\n\n        if (this.opts.port && (\"wss\" === schema && Number(this.opts.port) !== 443 || \"ws\" === schema && Number(this.opts.port) !== 80)) {\n          port = \":\" + this.opts.port;\n        } // append timestamp to URI\n\n\n        if (this.opts.timestampRequests) {\n          query[this.opts.timestampParam] = yeast();\n        } // communicate binary support capabilities\n\n\n        if (!this.supportsBinary) {\n          query.b64 = 1;\n        }\n\n        var encodedQuery = encode(query);\n        var ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n        return schema + \"://\" + (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) + port + this.opts.path + (encodedQuery.length ? \"?\" + encodedQuery : \"\");\n      }\n      /**\n       * Feature detection for WebSocket.\n       *\n       * @return {Boolean} whether this transport is available.\n       * @api public\n       */\n\n    }, {\n      key: \"check\",\n      value: function check() {\n        return !!WebSocket;\n      }\n    }]);\n\n    return WS;\n  }(Transport);\n\n  var transports = {\n    websocket: WS,\n    polling: Polling\n  }; // imported from https://github.com/galkn/parseuri\n\n  /**\n   * Parses an URI\n   *\n   * @author Steven Levithan <stevenlevithan.com> (MIT license)\n   * @api private\n   */\n\n  var re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n  var parts = ['source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'];\n\n  function parse(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n      str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n      uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n      uri.source = src;\n      uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n      uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n      uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n  }\n\n  function pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n      names.splice(0, 1);\n    }\n\n    if (path.slice(-1) == '/') {\n      names.splice(names.length - 1, 1);\n    }\n\n    return names;\n  }\n\n  function queryKey(uri, query) {\n    var data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n      if ($1) {\n        data[$1] = $2;\n      }\n    });\n    return data;\n  }\n\n  var Socket$1 = /*#__PURE__*/function (_Emitter) {\n    _inherits(Socket, _Emitter);\n\n    var _super = _createSuper(Socket);\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri or options\n     * @param {Object} opts - options\n     * @api public\n     */\n\n\n    function Socket(uri) {\n      var _this;\n\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, Socket);\n\n      _this = _super.call(this);\n\n      if (uri && \"object\" === _typeof(uri)) {\n        opts = uri;\n        uri = null;\n      }\n\n      if (uri) {\n        uri = parse(uri);\n        opts.hostname = uri.host;\n        opts.secure = uri.protocol === \"https\" || uri.protocol === \"wss\";\n        opts.port = uri.port;\n        if (uri.query) opts.query = uri.query;\n      } else if (opts.host) {\n        opts.hostname = parse(opts.host).host;\n      }\n\n      installTimerFunctions(_assertThisInitialized(_this), opts);\n      _this.secure = null != opts.secure ? opts.secure : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n\n      if (opts.hostname && !opts.port) {\n        // if no port is specified manually, use the protocol default\n        opts.port = _this.secure ? \"443\" : \"80\";\n      }\n\n      _this.hostname = opts.hostname || (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n      _this.port = opts.port || (typeof location !== \"undefined\" && location.port ? location.port : _this.secure ? \"443\" : \"80\");\n      _this.transports = opts.transports || [\"polling\", \"websocket\"];\n      _this.readyState = \"\";\n      _this.writeBuffer = [];\n      _this.prevBufferLen = 0;\n      _this.opts = _extends({\n        path: \"/engine.io\",\n        agent: false,\n        withCredentials: false,\n        upgrade: true,\n        timestampParam: \"t\",\n        rememberUpgrade: false,\n        rejectUnauthorized: true,\n        perMessageDeflate: {\n          threshold: 1024\n        },\n        transportOptions: {},\n        closeOnBeforeunload: true\n      }, opts);\n      _this.opts.path = _this.opts.path.replace(/\\/$/, \"\") + \"/\";\n\n      if (typeof _this.opts.query === \"string\") {\n        _this.opts.query = decode(_this.opts.query);\n      } // set on handshake\n\n\n      _this.id = null;\n      _this.upgrades = null;\n      _this.pingInterval = null;\n      _this.pingTimeout = null; // set on heartbeat\n\n      _this.pingTimeoutTimer = null;\n\n      if (typeof addEventListener === \"function\") {\n        if (_this.opts.closeOnBeforeunload) {\n          // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n          // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n          // closed/reloaded)\n          _this.beforeunloadEventListener = function () {\n            if (_this.transport) {\n              // silently close the transport\n              _this.transport.removeAllListeners();\n\n              _this.transport.close();\n            }\n          };\n\n          addEventListener(\"beforeunload\", _this.beforeunloadEventListener, false);\n        }\n\n        if (_this.hostname !== \"localhost\") {\n          _this.offlineEventListener = function () {\n            _this.onClose(\"transport close\", {\n              description: \"network connection lost\"\n            });\n          };\n\n          addEventListener(\"offline\", _this.offlineEventListener, false);\n        }\n      }\n\n      _this.open();\n\n      return _this;\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} transport name\n     * @return {Transport}\n     * @api private\n     */\n\n\n    _createClass(Socket, [{\n      key: \"createTransport\",\n      value: function createTransport(name) {\n        var query = _extends({}, this.opts.query); // append engine.io protocol identifier\n\n\n        query.EIO = protocol$1; // transport name\n\n        query.transport = name; // session id if we already have one\n\n        if (this.id) query.sid = this.id;\n\n        var opts = _extends({}, this.opts.transportOptions[name], this.opts, {\n          query: query,\n          socket: this,\n          hostname: this.hostname,\n          secure: this.secure,\n          port: this.port\n        });\n\n        return new transports[name](opts);\n      }\n      /**\n       * Initializes transport to use and starts probe.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"open\",\n      value: function open() {\n        var _this2 = this;\n\n        var transport;\n\n        if (this.opts.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf(\"websocket\") !== -1) {\n          transport = \"websocket\";\n        } else if (0 === this.transports.length) {\n          // Emit error on next tick so it can be listened to\n          this.setTimeoutFn(function () {\n            _this2.emitReserved(\"error\", \"No transports available\");\n          }, 0);\n          return;\n        } else {\n          transport = this.transports[0];\n        }\n\n        this.readyState = \"opening\"; // Retry with the next transport if the transport is disabled (jsonp: false)\n\n        try {\n          transport = this.createTransport(transport);\n        } catch (e) {\n          this.transports.shift();\n          this.open();\n          return;\n        }\n\n        transport.open();\n        this.setTransport(transport);\n      }\n      /**\n       * Sets the current transport. Disables the existing one (if any).\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"setTransport\",\n      value: function setTransport(transport) {\n        var _this3 = this;\n\n        if (this.transport) {\n          this.transport.removeAllListeners();\n        } // set up transport\n\n\n        this.transport = transport; // set up transport listeners\n\n        transport.on(\"drain\", this.onDrain.bind(this)).on(\"packet\", this.onPacket.bind(this)).on(\"error\", this.onError.bind(this)).on(\"close\", function (reason) {\n          return _this3.onClose(\"transport close\", reason);\n        });\n      }\n      /**\n       * Probes a transport.\n       *\n       * @param {String} transport name\n       * @api private\n       */\n\n    }, {\n      key: \"probe\",\n      value: function probe(name) {\n        var _this4 = this;\n\n        var transport = this.createTransport(name);\n        var failed = false;\n        Socket.priorWebsocketSuccess = false;\n\n        var onTransportOpen = function onTransportOpen() {\n          if (failed) return;\n          transport.send([{\n            type: \"ping\",\n            data: \"probe\"\n          }]);\n          transport.once(\"packet\", function (msg) {\n            if (failed) return;\n\n            if (\"pong\" === msg.type && \"probe\" === msg.data) {\n              _this4.upgrading = true;\n\n              _this4.emitReserved(\"upgrading\", transport);\n\n              if (!transport) return;\n              Socket.priorWebsocketSuccess = \"websocket\" === transport.name;\n\n              _this4.transport.pause(function () {\n                if (failed) return;\n                if (\"closed\" === _this4.readyState) return;\n                cleanup();\n\n                _this4.setTransport(transport);\n\n                transport.send([{\n                  type: \"upgrade\"\n                }]);\n\n                _this4.emitReserved(\"upgrade\", transport);\n\n                transport = null;\n                _this4.upgrading = false;\n\n                _this4.flush();\n              });\n            } else {\n              var err = new Error(\"probe error\"); // @ts-ignore\n\n              err.transport = transport.name;\n\n              _this4.emitReserved(\"upgradeError\", err);\n            }\n          });\n        };\n\n        function freezeTransport() {\n          if (failed) return; // Any callback called by transport should be ignored since now\n\n          failed = true;\n          cleanup();\n          transport.close();\n          transport = null;\n        } // Handle any error that happens while probing\n\n\n        var onerror = function onerror(err) {\n          var error = new Error(\"probe error: \" + err); // @ts-ignore\n\n          error.transport = transport.name;\n          freezeTransport();\n\n          _this4.emitReserved(\"upgradeError\", error);\n        };\n\n        function onTransportClose() {\n          onerror(\"transport closed\");\n        } // When the socket is closed while we're probing\n\n\n        function onclose() {\n          onerror(\"socket closed\");\n        } // When the socket is upgraded while we're probing\n\n\n        function onupgrade(to) {\n          if (transport && to.name !== transport.name) {\n            freezeTransport();\n          }\n        } // Remove all listeners on the transport and on self\n\n\n        var cleanup = function cleanup() {\n          transport.removeListener(\"open\", onTransportOpen);\n          transport.removeListener(\"error\", onerror);\n          transport.removeListener(\"close\", onTransportClose);\n\n          _this4.off(\"close\", onclose);\n\n          _this4.off(\"upgrading\", onupgrade);\n        };\n\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        transport.open();\n      }\n      /**\n       * Called when connection is deemed open.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"onOpen\",\n      value: function onOpen() {\n        this.readyState = \"open\";\n        Socket.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush(); // we check for `readyState` in case an `open`\n        // listener already closed the socket\n\n        if (\"open\" === this.readyState && this.opts.upgrade && this.transport.pause) {\n          var i = 0;\n          var l = this.upgrades.length;\n\n          for (; i < l; i++) {\n            this.probe(this.upgrades[i]);\n          }\n        }\n      }\n      /**\n       * Handles a packet.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"onPacket\",\n      value: function onPacket(packet) {\n        if (\"opening\" === this.readyState || \"open\" === this.readyState || \"closing\" === this.readyState) {\n          this.emitReserved(\"packet\", packet); // Socket is live - any packet counts\n\n          this.emitReserved(\"heartbeat\");\n\n          switch (packet.type) {\n            case \"open\":\n              this.onHandshake(JSON.parse(packet.data));\n              break;\n\n            case \"ping\":\n              this.resetPingTimeout();\n              this.sendPacket(\"pong\");\n              this.emitReserved(\"ping\");\n              this.emitReserved(\"pong\");\n              break;\n\n            case \"error\":\n              var err = new Error(\"server error\"); // @ts-ignore\n\n              err.code = packet.data;\n              this.onError(err);\n              break;\n\n            case \"message\":\n              this.emitReserved(\"data\", packet.data);\n              this.emitReserved(\"message\", packet.data);\n              break;\n          }\n        }\n      }\n      /**\n       * Called upon handshake completion.\n       *\n       * @param {Object} data - handshake obj\n       * @api private\n       */\n\n    }, {\n      key: \"onHandshake\",\n      value: function onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this.upgrades = this.filterUpgrades(data.upgrades);\n        this.pingInterval = data.pingInterval;\n        this.pingTimeout = data.pingTimeout;\n        this.maxPayload = data.maxPayload;\n        this.onOpen(); // In case open handler closes socket\n\n        if (\"closed\" === this.readyState) return;\n        this.resetPingTimeout();\n      }\n      /**\n       * Sets and resets ping timeout timer based on server pings.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"resetPingTimeout\",\n      value: function resetPingTimeout() {\n        var _this5 = this;\n\n        this.clearTimeoutFn(this.pingTimeoutTimer);\n        this.pingTimeoutTimer = this.setTimeoutFn(function () {\n          _this5.onClose(\"ping timeout\");\n        }, this.pingInterval + this.pingTimeout);\n\n        if (this.opts.autoUnref) {\n          this.pingTimeoutTimer.unref();\n        }\n      }\n      /**\n       * Called on `drain` event\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"onDrain\",\n      value: function onDrain() {\n        this.writeBuffer.splice(0, this.prevBufferLen); // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n\n        this.prevBufferLen = 0;\n\n        if (0 === this.writeBuffer.length) {\n          this.emitReserved(\"drain\");\n        } else {\n          this.flush();\n        }\n      }\n      /**\n       * Flush write buffers.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"flush\",\n      value: function flush() {\n        if (\"closed\" !== this.readyState && this.transport.writable && !this.upgrading && this.writeBuffer.length) {\n          var packets = this.getWritablePackets();\n          this.transport.send(packets); // keep track of current length of writeBuffer\n          // splice writeBuffer and callbackBuffer on `drain`\n\n          this.prevBufferLen = packets.length;\n          this.emitReserved(\"flush\");\n        }\n      }\n      /**\n       * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n       * long-polling)\n       *\n       * @private\n       */\n\n    }, {\n      key: \"getWritablePackets\",\n      value: function getWritablePackets() {\n        var shouldCheckPayloadSize = this.maxPayload && this.transport.name === \"polling\" && this.writeBuffer.length > 1;\n\n        if (!shouldCheckPayloadSize) {\n          return this.writeBuffer;\n        }\n\n        var payloadSize = 1; // first packet type\n\n        for (var i = 0; i < this.writeBuffer.length; i++) {\n          var data = this.writeBuffer[i].data;\n\n          if (data) {\n            payloadSize += byteLength(data);\n          }\n\n          if (i > 0 && payloadSize > this.maxPayload) {\n            return this.writeBuffer.slice(0, i);\n          }\n\n          payloadSize += 2; // separator + packet type\n        }\n\n        return this.writeBuffer;\n      }\n      /**\n       * Sends a message.\n       *\n       * @param {String} message.\n       * @param {Function} callback function.\n       * @param {Object} options.\n       * @return {Socket} for chaining.\n       * @api public\n       */\n\n    }, {\n      key: \"write\",\n      value: function write(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n      }\n    }, {\n      key: \"send\",\n      value: function send(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n      }\n      /**\n       * Sends a packet.\n       *\n       * @param {String} packet type.\n       * @param {String} data.\n       * @param {Object} options.\n       * @param {Function} callback function.\n       * @api private\n       */\n\n    }, {\n      key: \"sendPacket\",\n      value: function sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n          fn = data;\n          data = undefined;\n        }\n\n        if (\"function\" === typeof options) {\n          fn = options;\n          options = null;\n        }\n\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n          return;\n        }\n\n        options = options || {};\n        options.compress = false !== options.compress;\n        var packet = {\n          type: type,\n          data: data,\n          options: options\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn) this.once(\"flush\", fn);\n        this.flush();\n      }\n      /**\n       * Closes the connection.\n       *\n       * @api public\n       */\n\n    }, {\n      key: \"close\",\n      value: function close() {\n        var _this6 = this;\n\n        var close = function close() {\n          _this6.onClose(\"forced close\");\n\n          _this6.transport.close();\n        };\n\n        var cleanupAndClose = function cleanupAndClose() {\n          _this6.off(\"upgrade\", cleanupAndClose);\n\n          _this6.off(\"upgradeError\", cleanupAndClose);\n\n          close();\n        };\n\n        var waitForUpgrade = function waitForUpgrade() {\n          // wait for upgrade to finish since we can't send packets while pausing a transport\n          _this6.once(\"upgrade\", cleanupAndClose);\n\n          _this6.once(\"upgradeError\", cleanupAndClose);\n        };\n\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n          this.readyState = \"closing\";\n\n          if (this.writeBuffer.length) {\n            this.once(\"drain\", function () {\n              if (_this6.upgrading) {\n                waitForUpgrade();\n              } else {\n                close();\n              }\n            });\n          } else if (this.upgrading) {\n            waitForUpgrade();\n          } else {\n            close();\n          }\n        }\n\n        return this;\n      }\n      /**\n       * Called upon transport error\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"onError\",\n      value: function onError(err) {\n        Socket.priorWebsocketSuccess = false;\n        this.emitReserved(\"error\", err);\n        this.onClose(\"transport error\", err);\n      }\n      /**\n       * Called upon transport close.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"onClose\",\n      value: function onClose(reason, description) {\n        if (\"opening\" === this.readyState || \"open\" === this.readyState || \"closing\" === this.readyState) {\n          // clear timers\n          this.clearTimeoutFn(this.pingTimeoutTimer); // stop event from firing again for transport\n\n          this.transport.removeAllListeners(\"close\"); // ensure transport won't stay open\n\n          this.transport.close(); // ignore further transport communication\n\n          this.transport.removeAllListeners();\n\n          if (typeof removeEventListener === \"function\") {\n            removeEventListener(\"beforeunload\", this.beforeunloadEventListener, false);\n            removeEventListener(\"offline\", this.offlineEventListener, false);\n          } // set ready state\n\n\n          this.readyState = \"closed\"; // clear session id\n\n          this.id = null; // emit close event\n\n          this.emitReserved(\"close\", reason, description); // clean buffers after, so users can still\n          // grab the buffers on `close` event\n\n          this.writeBuffer = [];\n          this.prevBufferLen = 0;\n        }\n      }\n      /**\n       * Filters upgrades, returning only those matching client transports.\n       *\n       * @param {Array} server upgrades\n       * @api private\n       *\n       */\n\n    }, {\n      key: \"filterUpgrades\",\n      value: function filterUpgrades(upgrades) {\n        var filteredUpgrades = [];\n        var i = 0;\n        var j = upgrades.length;\n\n        for (; i < j; i++) {\n          if (~this.transports.indexOf(upgrades[i])) filteredUpgrades.push(upgrades[i]);\n        }\n\n        return filteredUpgrades;\n      }\n    }]);\n\n    return Socket;\n  }(Emitter);\n\n  Socket$1.protocol = protocol$1;\n  Socket$1.protocol;\n  /**\n   * URL parser.\n   *\n   * @param uri - url\n   * @param path - the request path of the connection\n   * @param loc - An object meant to mimic window.location.\n   *        Defaults to window.location.\n   * @public\n   */\n\n  function url(uri) {\n    var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    var loc = arguments.length > 2 ? arguments[2] : undefined;\n    var obj = uri; // default to window.location\n\n    loc = loc || typeof location !== \"undefined\" && location;\n    if (null == uri) uri = loc.protocol + \"//\" + loc.host; // relative path support\n\n    if (typeof uri === \"string\") {\n      if (\"/\" === uri.charAt(0)) {\n        if (\"/\" === uri.charAt(1)) {\n          uri = loc.protocol + uri;\n        } else {\n          uri = loc.host + uri;\n        }\n      }\n\n      if (!/^(https?|wss?):\\/\\//.test(uri)) {\n        if (\"undefined\" !== typeof loc) {\n          uri = loc.protocol + \"//\" + uri;\n        } else {\n          uri = \"https://\" + uri;\n        }\n      } // parse\n\n\n      obj = parse(uri);\n    } // make sure we treat `localhost:80` and `localhost` equally\n\n\n    if (!obj.port) {\n      if (/^(http|ws)$/.test(obj.protocol)) {\n        obj.port = \"80\";\n      } else if (/^(http|ws)s$/.test(obj.protocol)) {\n        obj.port = \"443\";\n      }\n    }\n\n    obj.path = obj.path || \"/\";\n    var ipv6 = obj.host.indexOf(\":\") !== -1;\n    var host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host; // define unique id\n\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path; // define href\n\n    obj.href = obj.protocol + \"://\" + host + (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n  }\n\n  var withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n\n  var isView = function isView(obj) {\n    return typeof ArrayBuffer.isView === \"function\" ? ArrayBuffer.isView(obj) : obj.buffer instanceof ArrayBuffer;\n  };\n\n  var toString = Object.prototype.toString;\n  var withNativeBlob = typeof Blob === \"function\" || typeof Blob !== \"undefined\" && toString.call(Blob) === \"[object BlobConstructor]\";\n  var withNativeFile = typeof File === \"function\" || typeof File !== \"undefined\" && toString.call(File) === \"[object FileConstructor]\";\n  /**\n   * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n   *\n   * @private\n   */\n\n  function isBinary(obj) {\n    return withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)) || withNativeBlob && obj instanceof Blob || withNativeFile && obj instanceof File;\n  }\n\n  function hasBinary(obj, toJSON) {\n    if (!obj || _typeof(obj) !== \"object\") {\n      return false;\n    }\n\n    if (Array.isArray(obj)) {\n      for (var i = 0, l = obj.length; i < l; i++) {\n        if (hasBinary(obj[i])) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n    if (isBinary(obj)) {\n      return true;\n    }\n\n    if (obj.toJSON && typeof obj.toJSON === \"function\" && arguments.length === 1) {\n      return hasBinary(obj.toJSON(), true);\n    }\n\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n   * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n   *\n   * @param {Object} packet - socket.io event packet\n   * @return {Object} with deconstructed packet and list of buffers\n   * @public\n   */\n\n\n  function deconstructPacket(packet) {\n    var buffers = [];\n    var packetData = packet.data;\n    var pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n\n    return {\n      packet: pack,\n      buffers: buffers\n    };\n  }\n\n  function _deconstructPacket(data, buffers) {\n    if (!data) return data;\n\n    if (isBinary(data)) {\n      var placeholder = {\n        _placeholder: true,\n        num: buffers.length\n      };\n      buffers.push(data);\n      return placeholder;\n    } else if (Array.isArray(data)) {\n      var newData = new Array(data.length);\n\n      for (var i = 0; i < data.length; i++) {\n        newData[i] = _deconstructPacket(data[i], buffers);\n      }\n\n      return newData;\n    } else if (_typeof(data) === \"object\" && !(data instanceof Date)) {\n      var _newData = {};\n\n      for (var key in data) {\n        if (Object.prototype.hasOwnProperty.call(data, key)) {\n          _newData[key] = _deconstructPacket(data[key], buffers);\n        }\n      }\n\n      return _newData;\n    }\n\n    return data;\n  }\n  /**\n   * Reconstructs a binary packet from its placeholder packet and buffers\n   *\n   * @param {Object} packet - event packet with placeholders\n   * @param {Array} buffers - binary buffers to put in placeholder positions\n   * @return {Object} reconstructed packet\n   * @public\n   */\n\n\n  function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    packet.attachments = undefined; // no longer useful\n\n    return packet;\n  }\n\n  function _reconstructPacket(data, buffers) {\n    if (!data) return data;\n\n    if (data && data._placeholder === true) {\n      var isIndexValid = typeof data.num === \"number\" && data.num >= 0 && data.num < buffers.length;\n\n      if (isIndexValid) {\n        return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n      } else {\n        throw new Error(\"illegal attachments\");\n      }\n    } else if (Array.isArray(data)) {\n      for (var i = 0; i < data.length; i++) {\n        data[i] = _reconstructPacket(data[i], buffers);\n      }\n    } else if (_typeof(data) === \"object\") {\n      for (var key in data) {\n        if (Object.prototype.hasOwnProperty.call(data, key)) {\n          data[key] = _reconstructPacket(data[key], buffers);\n        }\n      }\n    }\n\n    return data;\n  }\n  /**\n   * Protocol version.\n   *\n   * @public\n   */\n\n\n  var protocol = 5;\n  var PacketType;\n\n  (function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n  })(PacketType || (PacketType = {}));\n  /**\n   * A socket.io Encoder instance\n   */\n\n\n  var Encoder = /*#__PURE__*/function () {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    function Encoder(replacer) {\n      _classCallCheck(this, Encoder);\n\n      this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n\n\n    _createClass(Encoder, [{\n      key: \"encode\",\n      value: function encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n          if (hasBinary(obj)) {\n            obj.type = obj.type === PacketType.EVENT ? PacketType.BINARY_EVENT : PacketType.BINARY_ACK;\n            return this.encodeAsBinary(obj);\n          }\n        }\n\n        return [this.encodeAsString(obj)];\n      }\n      /**\n       * Encode packet as string.\n       */\n\n    }, {\n      key: \"encodeAsString\",\n      value: function encodeAsString(obj) {\n        // first is type\n        var str = \"\" + obj.type; // attachments if we have them\n\n        if (obj.type === PacketType.BINARY_EVENT || obj.type === PacketType.BINARY_ACK) {\n          str += obj.attachments + \"-\";\n        } // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n\n\n        if (obj.nsp && \"/\" !== obj.nsp) {\n          str += obj.nsp + \",\";\n        } // immediately followed by the id\n\n\n        if (null != obj.id) {\n          str += obj.id;\n        } // json data\n\n\n        if (null != obj.data) {\n          str += JSON.stringify(obj.data, this.replacer);\n        }\n\n        return str;\n      }\n      /**\n       * Encode packet as 'buffer sequence' by removing blobs, and\n       * deconstructing packet into object with placeholders and\n       * a list of buffers.\n       */\n\n    }, {\n      key: \"encodeAsBinary\",\n      value: function encodeAsBinary(obj) {\n        var deconstruction = deconstructPacket(obj);\n        var pack = this.encodeAsString(deconstruction.packet);\n        var buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n\n        return buffers; // write all the buffers\n      }\n    }]);\n\n    return Encoder;\n  }();\n  /**\n   * A socket.io Decoder instance\n   *\n   * @return {Object} decoder\n   */\n\n\n  var Decoder = /*#__PURE__*/function (_Emitter) {\n    _inherits(Decoder, _Emitter);\n\n    var _super = _createSuper(Decoder);\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n\n\n    function Decoder(reviver) {\n      var _this;\n\n      _classCallCheck(this, Decoder);\n\n      _this = _super.call(this);\n      _this.reviver = reviver;\n      return _this;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n\n\n    _createClass(Decoder, [{\n      key: \"add\",\n      value: function add(obj) {\n        var packet;\n\n        if (typeof obj === \"string\") {\n          if (this.reconstructor) {\n            throw new Error(\"got plaintext data when reconstructing a packet\");\n          }\n\n          packet = this.decodeString(obj);\n\n          if (packet.type === PacketType.BINARY_EVENT || packet.type === PacketType.BINARY_ACK) {\n            // binary packet's json\n            this.reconstructor = new BinaryReconstructor(packet); // no attachments, labeled binary but no binary data to follow\n\n            if (packet.attachments === 0) {\n              _get(_getPrototypeOf(Decoder.prototype), \"emitReserved\", this).call(this, \"decoded\", packet);\n            }\n          } else {\n            // non-binary full packet\n            _get(_getPrototypeOf(Decoder.prototype), \"emitReserved\", this).call(this, \"decoded\", packet);\n          }\n        } else if (isBinary(obj) || obj.base64) {\n          // raw binary data\n          if (!this.reconstructor) {\n            throw new Error(\"got binary data when not reconstructing a packet\");\n          } else {\n            packet = this.reconstructor.takeBinaryData(obj);\n\n            if (packet) {\n              // received final buffer\n              this.reconstructor = null;\n\n              _get(_getPrototypeOf(Decoder.prototype), \"emitReserved\", this).call(this, \"decoded\", packet);\n            }\n          }\n        } else {\n          throw new Error(\"Unknown type: \" + obj);\n        }\n      }\n      /**\n       * Decode a packet String (JSON data)\n       *\n       * @param {String} str\n       * @return {Object} packet\n       */\n\n    }, {\n      key: \"decodeString\",\n      value: function decodeString(str) {\n        var i = 0; // look up type\n\n        var p = {\n          type: Number(str.charAt(0))\n        };\n\n        if (PacketType[p.type] === undefined) {\n          throw new Error(\"unknown packet type \" + p.type);\n        } // look up attachments if type binary\n\n\n        if (p.type === PacketType.BINARY_EVENT || p.type === PacketType.BINARY_ACK) {\n          var start = i + 1;\n\n          while (str.charAt(++i) !== \"-\" && i != str.length) {}\n\n          var buf = str.substring(start, i);\n\n          if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n            throw new Error(\"Illegal attachments\");\n          }\n\n          p.attachments = Number(buf);\n        } // look up namespace (if any)\n\n\n        if (\"/\" === str.charAt(i + 1)) {\n          var _start = i + 1;\n\n          while (++i) {\n            var c = str.charAt(i);\n            if (\",\" === c) break;\n            if (i === str.length) break;\n          }\n\n          p.nsp = str.substring(_start, i);\n        } else {\n          p.nsp = \"/\";\n        } // look up id\n\n\n        var next = str.charAt(i + 1);\n\n        if (\"\" !== next && Number(next) == next) {\n          var _start2 = i + 1;\n\n          while (++i) {\n            var _c = str.charAt(i);\n\n            if (null == _c || Number(_c) != _c) {\n              --i;\n              break;\n            }\n\n            if (i === str.length) break;\n          }\n\n          p.id = Number(str.substring(_start2, i + 1));\n        } // look up json data\n\n\n        if (str.charAt(++i)) {\n          var payload = this.tryParse(str.substr(i));\n\n          if (Decoder.isPayloadValid(p.type, payload)) {\n            p.data = payload;\n          } else {\n            throw new Error(\"invalid payload\");\n          }\n        }\n\n        return p;\n      }\n    }, {\n      key: \"tryParse\",\n      value: function tryParse(str) {\n        try {\n          return JSON.parse(str, this.reviver);\n        } catch (e) {\n          return false;\n        }\n      }\n    }, {\n      key: \"destroy\",\n      value:\n      /**\n       * Deallocates a parser's resources\n       */\n      function destroy() {\n        if (this.reconstructor) {\n          this.reconstructor.finishedReconstruction();\n        }\n      }\n    }], [{\n      key: \"isPayloadValid\",\n      value: function isPayloadValid(type, payload) {\n        switch (type) {\n          case PacketType.CONNECT:\n            return _typeof(payload) === \"object\";\n\n          case PacketType.DISCONNECT:\n            return payload === undefined;\n\n          case PacketType.CONNECT_ERROR:\n            return typeof payload === \"string\" || _typeof(payload) === \"object\";\n\n          case PacketType.EVENT:\n          case PacketType.BINARY_EVENT:\n            return Array.isArray(payload) && payload.length > 0;\n\n          case PacketType.ACK:\n          case PacketType.BINARY_ACK:\n            return Array.isArray(payload);\n        }\n      }\n    }]);\n\n    return Decoder;\n  }(Emitter);\n  /**\n   * A manager of a binary event's 'buffer sequence'. Should\n   * be constructed whenever a packet of type BINARY_EVENT is\n   * decoded.\n   *\n   * @param {Object} packet\n   * @return {BinaryReconstructor} initialized reconstructor\n   */\n\n\n  var BinaryReconstructor = /*#__PURE__*/function () {\n    function BinaryReconstructor(packet) {\n      _classCallCheck(this, BinaryReconstructor);\n\n      this.packet = packet;\n      this.buffers = [];\n      this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n\n\n    _createClass(BinaryReconstructor, [{\n      key: \"takeBinaryData\",\n      value: function takeBinaryData(binData) {\n        this.buffers.push(binData);\n\n        if (this.buffers.length === this.reconPack.attachments) {\n          // done with buffer list\n          var packet = reconstructPacket(this.reconPack, this.buffers);\n          this.finishedReconstruction();\n          return packet;\n        }\n\n        return null;\n      }\n      /**\n       * Cleans up binary packet reconstruction variables.\n       */\n\n    }, {\n      key: \"finishedReconstruction\",\n      value: function finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n      }\n    }]);\n\n    return BinaryReconstructor;\n  }();\n\n  var parser = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    protocol: protocol,\n\n    get PacketType() {\n      return PacketType;\n    },\n\n    Encoder: Encoder,\n    Decoder: Decoder\n  });\n\n  function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n      obj.off(ev, fn);\n    };\n  }\n  /**\n   * Internal events.\n   * These events can't be emitted by the user.\n   */\n\n\n  var RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1\n  });\n  /**\n   * A Socket is the fundamental class for interacting with the server.\n   *\n   * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n   *\n   * @example\n   * const socket = io();\n   *\n   * socket.on(\"connect\", () => {\n   *   console.log(\"connected\");\n   * });\n   *\n   * // send an event to the server\n   * socket.emit(\"foo\", \"bar\");\n   *\n   * socket.on(\"foobar\", () => {\n   *   // an event was received from the server\n   * });\n   *\n   * // upon disconnection\n   * socket.on(\"disconnect\", (reason) => {\n   *   console.log(`disconnected due to ${reason}`);\n   * });\n   */\n\n  var Socket = /*#__PURE__*/function (_Emitter) {\n    _inherits(Socket, _Emitter);\n\n    var _super = _createSuper(Socket);\n    /**\n     * `Socket` constructor.\n     */\n\n\n    function Socket(io, nsp, opts) {\n      var _this;\n\n      _classCallCheck(this, Socket);\n\n      _this = _super.call(this);\n      /**\n       * Whether the socket is currently connected to the server.\n       *\n       * @example\n       * const socket = io();\n       *\n       * socket.on(\"connect\", () => {\n       *   console.log(socket.connected); // true\n       * });\n       *\n       * socket.on(\"disconnect\", () => {\n       *   console.log(socket.connected); // false\n       * });\n       */\n\n      _this.connected = false;\n      /**\n       * Buffer for packets received before the CONNECT packet\n       */\n\n      _this.receiveBuffer = [];\n      /**\n       * Buffer for packets that will be sent once the socket is connected\n       */\n\n      _this.sendBuffer = [];\n      _this.ids = 0;\n      _this.acks = {};\n      _this.flags = {};\n      _this.io = io;\n      _this.nsp = nsp;\n\n      if (opts && opts.auth) {\n        _this.auth = opts.auth;\n      }\n\n      if (_this.io._autoConnect) _this.open();\n      return _this;\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n\n\n    _createClass(Socket, [{\n      key: \"disconnected\",\n      get: function get() {\n        return !this.connected;\n      }\n      /**\n       * Subscribe to open, close and packet events\n       *\n       * @private\n       */\n\n    }, {\n      key: \"subEvents\",\n      value: function subEvents() {\n        if (this.subs) return;\n        var io = this.io;\n        this.subs = [on(io, \"open\", this.onopen.bind(this)), on(io, \"packet\", this.onpacket.bind(this)), on(io, \"error\", this.onerror.bind(this)), on(io, \"close\", this.onclose.bind(this))];\n      }\n      /**\n       * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n       *\n       * @example\n       * const socket = io();\n       *\n       * console.log(socket.active); // true\n       *\n       * socket.on(\"disconnect\", (reason) => {\n       *   if (reason === \"io server disconnect\") {\n       *     // the disconnection was initiated by the server, you need to manually reconnect\n       *     console.log(socket.active); // false\n       *   }\n       *   // else the socket will automatically try to reconnect\n       *   console.log(socket.active); // true\n       * });\n       */\n\n    }, {\n      key: \"active\",\n      get: function get() {\n        return !!this.subs;\n      }\n      /**\n       * \"Opens\" the socket.\n       *\n       * @example\n       * const socket = io({\n       *   autoConnect: false\n       * });\n       *\n       * socket.connect();\n       */\n\n    }, {\n      key: \"connect\",\n      value: function connect() {\n        if (this.connected) return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"]) this.io.open(); // ensure open\n\n        if (\"open\" === this.io._readyState) this.onopen();\n        return this;\n      }\n      /**\n       * Alias for {@link connect()}.\n       */\n\n    }, {\n      key: \"open\",\n      value: function open() {\n        return this.connect();\n      }\n      /**\n       * Sends a `message` event.\n       *\n       * This method mimics the WebSocket.send() method.\n       *\n       * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n       *\n       * @example\n       * socket.send(\"hello\");\n       *\n       * // this is equivalent to\n       * socket.emit(\"message\", \"hello\");\n       *\n       * @return self\n       */\n\n    }, {\n      key: \"send\",\n      value: function send() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n      }\n      /**\n       * Override `emit`.\n       * If the event is in `events`, it's emitted normally.\n       *\n       * @example\n       * socket.emit(\"hello\", \"world\");\n       *\n       * // all serializable datastructures are supported (no need to call JSON.stringify)\n       * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n       *\n       * // with an acknowledgement from the server\n       * socket.emit(\"hello\", \"world\", (val) => {\n       *   // ...\n       * });\n       *\n       * @return self\n       */\n\n    }, {\n      key: \"emit\",\n      value: function emit(ev) {\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n          throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n\n        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n\n        args.unshift(ev);\n        var packet = {\n          type: PacketType.EVENT,\n          data: args\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false; // event ack callback\n\n        if (\"function\" === typeof args[args.length - 1]) {\n          var id = this.ids++;\n          var ack = args.pop();\n\n          this._registerAckCallback(id, ack);\n\n          packet.id = id;\n        }\n\n        var isTransportWritable = this.io.engine && this.io.engine.transport && this.io.engine.transport.writable;\n        var discardPacket = this.flags[\"volatile\"] && (!isTransportWritable || !this.connected);\n        if (discardPacket) ;else if (this.connected) {\n          this.notifyOutgoingListeners(packet);\n          this.packet(packet);\n        } else {\n          this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n      }\n      /**\n       * @private\n       */\n\n    }, {\n      key: \"_registerAckCallback\",\n      value: function _registerAckCallback(id, ack) {\n        var _this2 = this;\n\n        var timeout = this.flags.timeout;\n\n        if (timeout === undefined) {\n          this.acks[id] = ack;\n          return;\n        } // @ts-ignore\n\n\n        var timer = this.io.setTimeoutFn(function () {\n          delete _this2.acks[id];\n\n          for (var i = 0; i < _this2.sendBuffer.length; i++) {\n            if (_this2.sendBuffer[i].id === id) {\n              _this2.sendBuffer.splice(i, 1);\n            }\n          }\n\n          ack.call(_this2, new Error(\"operation has timed out\"));\n        }, timeout);\n\n        this.acks[id] = function () {\n          // @ts-ignore\n          _this2.io.clearTimeoutFn(timer);\n\n          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n          }\n\n          ack.apply(_this2, [null].concat(args));\n        };\n      }\n      /**\n       * Sends a packet.\n       *\n       * @param packet\n       * @private\n       */\n\n    }, {\n      key: \"packet\",\n      value: function packet(_packet) {\n        _packet.nsp = this.nsp;\n\n        this.io._packet(_packet);\n      }\n      /**\n       * Called upon engine `open`.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"onopen\",\n      value: function onopen() {\n        var _this3 = this;\n\n        if (typeof this.auth == \"function\") {\n          this.auth(function (data) {\n            _this3.packet({\n              type: PacketType.CONNECT,\n              data: data\n            });\n          });\n        } else {\n          this.packet({\n            type: PacketType.CONNECT,\n            data: this.auth\n          });\n        }\n      }\n      /**\n       * Called upon engine or manager `error`.\n       *\n       * @param err\n       * @private\n       */\n\n    }, {\n      key: \"onerror\",\n      value: function onerror(err) {\n        if (!this.connected) {\n          this.emitReserved(\"connect_error\", err);\n        }\n      }\n      /**\n       * Called upon engine `close`.\n       *\n       * @param reason\n       * @param description\n       * @private\n       */\n\n    }, {\n      key: \"onclose\",\n      value: function onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n      }\n      /**\n       * Called with socket packet.\n       *\n       * @param packet\n       * @private\n       */\n\n    }, {\n      key: \"onpacket\",\n      value: function onpacket(packet) {\n        var sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace) return;\n\n        switch (packet.type) {\n          case PacketType.CONNECT:\n            if (packet.data && packet.data.sid) {\n              var id = packet.data.sid;\n              this.onconnect(id);\n            } else {\n              this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n            }\n\n            break;\n\n          case PacketType.EVENT:\n          case PacketType.BINARY_EVENT:\n            this.onevent(packet);\n            break;\n\n          case PacketType.ACK:\n          case PacketType.BINARY_ACK:\n            this.onack(packet);\n            break;\n\n          case PacketType.DISCONNECT:\n            this.ondisconnect();\n            break;\n\n          case PacketType.CONNECT_ERROR:\n            this.destroy();\n            var err = new Error(packet.data.message); // @ts-ignore\n\n            err.data = packet.data.data;\n            this.emitReserved(\"connect_error\", err);\n            break;\n        }\n      }\n      /**\n       * Called upon a server event.\n       *\n       * @param packet\n       * @private\n       */\n\n    }, {\n      key: \"onevent\",\n      value: function onevent(packet) {\n        var args = packet.data || [];\n\n        if (null != packet.id) {\n          args.push(this.ack(packet.id));\n        }\n\n        if (this.connected) {\n          this.emitEvent(args);\n        } else {\n          this.receiveBuffer.push(Object.freeze(args));\n        }\n      }\n    }, {\n      key: \"emitEvent\",\n      value: function emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n          var listeners = this._anyListeners.slice();\n\n          var _iterator = _createForOfIteratorHelper(listeners),\n              _step;\n\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var listener = _step.value;\n              listener.apply(this, args);\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n        }\n\n        _get(_getPrototypeOf(Socket.prototype), \"emit\", this).apply(this, args);\n      }\n      /**\n       * Produces an ack callback to emit with an event.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"ack\",\n      value: function ack(id) {\n        var self = this;\n        var sent = false;\n        return function () {\n          // prevent double callbacks\n          if (sent) return;\n          sent = true;\n\n          for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n            args[_key4] = arguments[_key4];\n          }\n\n          self.packet({\n            type: PacketType.ACK,\n            id: id,\n            data: args\n          });\n        };\n      }\n      /**\n       * Called upon a server acknowlegement.\n       *\n       * @param packet\n       * @private\n       */\n\n    }, {\n      key: \"onack\",\n      value: function onack(packet) {\n        var ack = this.acks[packet.id];\n\n        if (\"function\" === typeof ack) {\n          ack.apply(this, packet.data);\n          delete this.acks[packet.id];\n        }\n      }\n      /**\n       * Called upon server connect.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"onconnect\",\n      value: function onconnect(id) {\n        this.id = id;\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n      }\n      /**\n       * Emit buffered events (received and emitted).\n       *\n       * @private\n       */\n\n    }, {\n      key: \"emitBuffered\",\n      value: function emitBuffered() {\n        var _this4 = this;\n\n        this.receiveBuffer.forEach(function (args) {\n          return _this4.emitEvent(args);\n        });\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach(function (packet) {\n          _this4.notifyOutgoingListeners(packet);\n\n          _this4.packet(packet);\n        });\n        this.sendBuffer = [];\n      }\n      /**\n       * Called upon server disconnect.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"ondisconnect\",\n      value: function ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n      }\n      /**\n       * Called upon forced client/server side disconnections,\n       * this method ensures the manager stops tracking us and\n       * that reconnections don't get triggered for this.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        if (this.subs) {\n          // clean subscriptions to avoid reconnections\n          this.subs.forEach(function (subDestroy) {\n            return subDestroy();\n          });\n          this.subs = undefined;\n        }\n\n        this.io[\"_destroy\"](this);\n      }\n      /**\n       * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n       *\n       * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n       *\n       * @example\n       * const socket = io();\n       *\n       * socket.on(\"disconnect\", (reason) => {\n       *   // console.log(reason); prints \"io client disconnect\"\n       * });\n       *\n       * socket.disconnect();\n       *\n       * @return self\n       */\n\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        if (this.connected) {\n          this.packet({\n            type: PacketType.DISCONNECT\n          });\n        } // remove socket from pool\n\n\n        this.destroy();\n\n        if (this.connected) {\n          // fire events\n          this.onclose(\"io client disconnect\");\n        }\n\n        return this;\n      }\n      /**\n       * Alias for {@link disconnect()}.\n       *\n       * @return self\n       */\n\n    }, {\n      key: \"close\",\n      value: function close() {\n        return this.disconnect();\n      }\n      /**\n       * Sets the compress flag.\n       *\n       * @example\n       * socket.compress(false).emit(\"hello\");\n       *\n       * @param compress - if `true`, compresses the sending data\n       * @return self\n       */\n\n    }, {\n      key: \"compress\",\n      value: function compress(_compress) {\n        this.flags.compress = _compress;\n        return this;\n      }\n      /**\n       * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n       * ready to send messages.\n       *\n       * @example\n       * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n       *\n       * @returns self\n       */\n\n    }, {\n      key: \"volatile\",\n      get: function get() {\n        this.flags[\"volatile\"] = true;\n        return this;\n      }\n      /**\n       * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n       * given number of milliseconds have elapsed without an acknowledgement from the server:\n       *\n       * @example\n       * socket.timeout(5000).emit(\"my-event\", (err) => {\n       *   if (err) {\n       *     // the server did not acknowledge the event in the given delay\n       *   }\n       * });\n       *\n       * @returns self\n       */\n\n    }, {\n      key: \"timeout\",\n      value: function timeout(_timeout) {\n        this.flags.timeout = _timeout;\n        return this;\n      }\n      /**\n       * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n       * callback.\n       *\n       * @example\n       * socket.onAny((event, ...args) => {\n       *   console.log(`got ${event}`);\n       * });\n       *\n       * @param listener\n       */\n\n    }, {\n      key: \"onAny\",\n      value: function onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n\n        this._anyListeners.push(listener);\n\n        return this;\n      }\n      /**\n       * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n       * callback. The listener is added to the beginning of the listeners array.\n       *\n       * @example\n       * socket.prependAny((event, ...args) => {\n       *   console.log(`got event ${event}`);\n       * });\n       *\n       * @param listener\n       */\n\n    }, {\n      key: \"prependAny\",\n      value: function prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n\n        this._anyListeners.unshift(listener);\n\n        return this;\n      }\n      /**\n       * Removes the listener that will be fired when any event is emitted.\n       *\n       * @example\n       * const catchAllListener = (event, ...args) => {\n       *   console.log(`got event ${event}`);\n       * }\n       *\n       * socket.onAny(catchAllListener);\n       *\n       * // remove a specific listener\n       * socket.offAny(catchAllListener);\n       *\n       * // or remove all listeners\n       * socket.offAny();\n       *\n       * @param listener\n       */\n\n    }, {\n      key: \"offAny\",\n      value: function offAny(listener) {\n        if (!this._anyListeners) {\n          return this;\n        }\n\n        if (listener) {\n          var listeners = this._anyListeners;\n\n          for (var i = 0; i < listeners.length; i++) {\n            if (listener === listeners[i]) {\n              listeners.splice(i, 1);\n              return this;\n            }\n          }\n        } else {\n          this._anyListeners = [];\n        }\n\n        return this;\n      }\n      /**\n       * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n       * e.g. to remove listeners.\n       */\n\n    }, {\n      key: \"listenersAny\",\n      value: function listenersAny() {\n        return this._anyListeners || [];\n      }\n      /**\n       * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n       * callback.\n       *\n       * Note: acknowledgements sent to the server are not included.\n       *\n       * @example\n       * socket.onAnyOutgoing((event, ...args) => {\n       *   console.log(`sent event ${event}`);\n       * });\n       *\n       * @param listener\n       */\n\n    }, {\n      key: \"onAnyOutgoing\",\n      value: function onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n\n        this._anyOutgoingListeners.push(listener);\n\n        return this;\n      }\n      /**\n       * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n       * callback. The listener is added to the beginning of the listeners array.\n       *\n       * Note: acknowledgements sent to the server are not included.\n       *\n       * @example\n       * socket.prependAnyOutgoing((event, ...args) => {\n       *   console.log(`sent event ${event}`);\n       * });\n       *\n       * @param listener\n       */\n\n    }, {\n      key: \"prependAnyOutgoing\",\n      value: function prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n\n        this._anyOutgoingListeners.unshift(listener);\n\n        return this;\n      }\n      /**\n       * Removes the listener that will be fired when any event is emitted.\n       *\n       * @example\n       * const catchAllListener = (event, ...args) => {\n       *   console.log(`sent event ${event}`);\n       * }\n       *\n       * socket.onAnyOutgoing(catchAllListener);\n       *\n       * // remove a specific listener\n       * socket.offAnyOutgoing(catchAllListener);\n       *\n       * // or remove all listeners\n       * socket.offAnyOutgoing();\n       *\n       * @param [listener] - the catch-all listener (optional)\n       */\n\n    }, {\n      key: \"offAnyOutgoing\",\n      value: function offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n          return this;\n        }\n\n        if (listener) {\n          var listeners = this._anyOutgoingListeners;\n\n          for (var i = 0; i < listeners.length; i++) {\n            if (listener === listeners[i]) {\n              listeners.splice(i, 1);\n              return this;\n            }\n          }\n        } else {\n          this._anyOutgoingListeners = [];\n        }\n\n        return this;\n      }\n      /**\n       * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n       * e.g. to remove listeners.\n       */\n\n    }, {\n      key: \"listenersAnyOutgoing\",\n      value: function listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n      }\n      /**\n       * Notify the listeners for each packet sent\n       *\n       * @param packet\n       *\n       * @private\n       */\n\n    }, {\n      key: \"notifyOutgoingListeners\",\n      value: function notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n          var listeners = this._anyOutgoingListeners.slice();\n\n          var _iterator2 = _createForOfIteratorHelper(listeners),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var listener = _step2.value;\n              listener.apply(this, packet.data);\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        }\n      }\n    }]);\n\n    return Socket;\n  }(Emitter);\n  /**\n   * Initialize backoff timer with `opts`.\n   *\n   * - `min` initial timeout in milliseconds [100]\n   * - `max` max timeout [10000]\n   * - `jitter` [0]\n   * - `factor` [2]\n   *\n   * @param {Object} opts\n   * @api public\n   */\n\n\n  function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n  }\n  /**\n   * Return the backoff duration.\n   *\n   * @return {Number}\n   * @api public\n   */\n\n\n  Backoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n\n    if (this.jitter) {\n      var rand = Math.random();\n      var deviation = Math.floor(rand * this.jitter * ms);\n      ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n\n    return Math.min(ms, this.max) | 0;\n  };\n  /**\n   * Reset the number of attempts.\n   *\n   * @api public\n   */\n\n\n  Backoff.prototype.reset = function () {\n    this.attempts = 0;\n  };\n  /**\n   * Set the minimum duration\n   *\n   * @api public\n   */\n\n\n  Backoff.prototype.setMin = function (min) {\n    this.ms = min;\n  };\n  /**\n   * Set the maximum duration\n   *\n   * @api public\n   */\n\n\n  Backoff.prototype.setMax = function (max) {\n    this.max = max;\n  };\n  /**\n   * Set the jitter\n   *\n   * @api public\n   */\n\n\n  Backoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n  };\n\n  var Manager = /*#__PURE__*/function (_Emitter) {\n    _inherits(Manager, _Emitter);\n\n    var _super = _createSuper(Manager);\n\n    function Manager(uri, opts) {\n      var _this;\n\n      _classCallCheck(this, Manager);\n\n      var _a;\n\n      _this = _super.call(this);\n      _this.nsps = {};\n      _this.subs = [];\n\n      if (uri && \"object\" === _typeof(uri)) {\n        opts = uri;\n        uri = undefined;\n      }\n\n      opts = opts || {};\n      opts.path = opts.path || \"/socket.io\";\n      _this.opts = opts;\n      installTimerFunctions(_assertThisInitialized(_this), opts);\n\n      _this.reconnection(opts.reconnection !== false);\n\n      _this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n\n      _this.reconnectionDelay(opts.reconnectionDelay || 1000);\n\n      _this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n\n      _this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n\n      _this.backoff = new Backoff({\n        min: _this.reconnectionDelay(),\n        max: _this.reconnectionDelayMax(),\n        jitter: _this.randomizationFactor()\n      });\n\n      _this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n\n      _this._readyState = \"closed\";\n      _this.uri = uri;\n\n      var _parser = opts.parser || parser;\n\n      _this.encoder = new _parser.Encoder();\n      _this.decoder = new _parser.Decoder();\n      _this._autoConnect = opts.autoConnect !== false;\n      if (_this._autoConnect) _this.open();\n      return _this;\n    }\n\n    _createClass(Manager, [{\n      key: \"reconnection\",\n      value: function reconnection(v) {\n        if (!arguments.length) return this._reconnection;\n        this._reconnection = !!v;\n        return this;\n      }\n    }, {\n      key: \"reconnectionAttempts\",\n      value: function reconnectionAttempts(v) {\n        if (v === undefined) return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n      }\n    }, {\n      key: \"reconnectionDelay\",\n      value: function reconnectionDelay(v) {\n        var _a;\n\n        if (v === undefined) return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n      }\n    }, {\n      key: \"randomizationFactor\",\n      value: function randomizationFactor(v) {\n        var _a;\n\n        if (v === undefined) return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n      }\n    }, {\n      key: \"reconnectionDelayMax\",\n      value: function reconnectionDelayMax(v) {\n        var _a;\n\n        if (v === undefined) return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n      }\n    }, {\n      key: \"timeout\",\n      value: function timeout(v) {\n        if (!arguments.length) return this._timeout;\n        this._timeout = v;\n        return this;\n      }\n      /**\n       * Starts trying to reconnect if reconnection is enabled and we have not\n       * started reconnecting yet\n       *\n       * @private\n       */\n\n    }, {\n      key: \"maybeReconnectOnOpen\",\n      value: function maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting && this._reconnection && this.backoff.attempts === 0) {\n          // keeps reconnection from firing twice for the same reconnection loop\n          this.reconnect();\n        }\n      }\n      /**\n       * Sets the current transport `socket`.\n       *\n       * @param {Function} fn - optional, callback\n       * @return self\n       * @public\n       */\n\n    }, {\n      key: \"open\",\n      value: function open(fn) {\n        var _this2 = this;\n\n        if (~this._readyState.indexOf(\"open\")) return this;\n        this.engine = new Socket$1(this.uri, this.opts);\n        var socket = this.engine;\n        var self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false; // emit `open`\n\n        var openSubDestroy = on(socket, \"open\", function () {\n          self.onopen();\n          fn && fn();\n        }); // emit `error`\n\n        var errorSub = on(socket, \"error\", function (err) {\n          self.cleanup();\n          self._readyState = \"closed\";\n\n          _this2.emitReserved(\"error\", err);\n\n          if (fn) {\n            fn(err);\n          } else {\n            // Only do this if there is no fn to handle the error\n            self.maybeReconnectOnOpen();\n          }\n        });\n\n        if (false !== this._timeout) {\n          var timeout = this._timeout;\n\n          if (timeout === 0) {\n            openSubDestroy(); // prevents a race condition with the 'open' event\n          } // set timer\n\n\n          var timer = this.setTimeoutFn(function () {\n            openSubDestroy();\n            socket.close(); // @ts-ignore\n\n            socket.emit(\"error\", new Error(\"timeout\"));\n          }, timeout);\n\n          if (this.opts.autoUnref) {\n            timer.unref();\n          }\n\n          this.subs.push(function subDestroy() {\n            clearTimeout(timer);\n          });\n        }\n\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n      }\n      /**\n       * Alias for open()\n       *\n       * @return self\n       * @public\n       */\n\n    }, {\n      key: \"connect\",\n      value: function connect(fn) {\n        return this.open(fn);\n      }\n      /**\n       * Called upon transport open.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"onopen\",\n      value: function onopen() {\n        // clear old subs\n        this.cleanup(); // mark as open\n\n        this._readyState = \"open\";\n        this.emitReserved(\"open\"); // add new subs\n\n        var socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n      }\n      /**\n       * Called upon a ping.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"onping\",\n      value: function onping() {\n        this.emitReserved(\"ping\");\n      }\n      /**\n       * Called with data.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"ondata\",\n      value: function ondata(data) {\n        try {\n          this.decoder.add(data);\n        } catch (e) {\n          this.onclose(\"parse error\", e);\n        }\n      }\n      /**\n       * Called when parser fully decodes a packet.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"ondecoded\",\n      value: function ondecoded(packet) {\n        var _this3 = this; // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n\n\n        nextTick(function () {\n          _this3.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n      }\n      /**\n       * Called upon socket error.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"onerror\",\n      value: function onerror(err) {\n        this.emitReserved(\"error\", err);\n      }\n      /**\n       * Creates a new socket for the given `nsp`.\n       *\n       * @return {Socket}\n       * @public\n       */\n\n    }, {\n      key: \"socket\",\n      value: function socket(nsp, opts) {\n        var socket = this.nsps[nsp];\n\n        if (!socket) {\n          socket = new Socket(this, nsp, opts);\n          this.nsps[nsp] = socket;\n        }\n\n        return socket;\n      }\n      /**\n       * Called upon a socket close.\n       *\n       * @param socket\n       * @private\n       */\n\n    }, {\n      key: \"_destroy\",\n      value: function _destroy(socket) {\n        var nsps = Object.keys(this.nsps);\n\n        for (var _i = 0, _nsps = nsps; _i < _nsps.length; _i++) {\n          var nsp = _nsps[_i];\n          var _socket = this.nsps[nsp];\n\n          if (_socket.active) {\n            return;\n          }\n        }\n\n        this._close();\n      }\n      /**\n       * Writes a packet.\n       *\n       * @param packet\n       * @private\n       */\n\n    }, {\n      key: \"_packet\",\n      value: function _packet(packet) {\n        var encodedPackets = this.encoder.encode(packet);\n\n        for (var i = 0; i < encodedPackets.length; i++) {\n          this.engine.write(encodedPackets[i], packet.options);\n        }\n      }\n      /**\n       * Clean up transport subscriptions and packet buffer.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"cleanup\",\n      value: function cleanup() {\n        this.subs.forEach(function (subDestroy) {\n          return subDestroy();\n        });\n        this.subs.length = 0;\n        this.decoder.destroy();\n      }\n      /**\n       * Close the current socket.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"_close\",\n      value: function _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n        if (this.engine) this.engine.close();\n      }\n      /**\n       * Alias for close()\n       *\n       * @private\n       */\n\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        return this._close();\n      }\n      /**\n       * Called upon engine close.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"onclose\",\n      value: function onclose(reason, description) {\n        this.cleanup();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n\n        if (this._reconnection && !this.skipReconnect) {\n          this.reconnect();\n        }\n      }\n      /**\n       * Attempt a reconnection.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"reconnect\",\n      value: function reconnect() {\n        var _this4 = this;\n\n        if (this._reconnecting || this.skipReconnect) return this;\n        var self = this;\n\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n          this.backoff.reset();\n          this.emitReserved(\"reconnect_failed\");\n          this._reconnecting = false;\n        } else {\n          var delay = this.backoff.duration();\n          this._reconnecting = true;\n          var timer = this.setTimeoutFn(function () {\n            if (self.skipReconnect) return;\n\n            _this4.emitReserved(\"reconnect_attempt\", self.backoff.attempts); // check again for the case socket closed in above events\n\n\n            if (self.skipReconnect) return;\n            self.open(function (err) {\n              if (err) {\n                self._reconnecting = false;\n                self.reconnect();\n\n                _this4.emitReserved(\"reconnect_error\", err);\n              } else {\n                self.onreconnect();\n              }\n            });\n          }, delay);\n\n          if (this.opts.autoUnref) {\n            timer.unref();\n          }\n\n          this.subs.push(function subDestroy() {\n            clearTimeout(timer);\n          });\n        }\n      }\n      /**\n       * Called upon successful reconnect.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"onreconnect\",\n      value: function onreconnect() {\n        var attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n      }\n    }]);\n\n    return Manager;\n  }(Emitter);\n  /**\n   * Managers cache.\n   */\n\n\n  var cache = {};\n\n  function lookup(uri, opts) {\n    if (_typeof(uri) === \"object\") {\n      opts = uri;\n      uri = undefined;\n    }\n\n    opts = opts || {};\n    var parsed = url(uri, opts.path || \"/socket.io\");\n    var source = parsed.source;\n    var id = parsed.id;\n    var path = parsed.path;\n    var sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    var newConnection = opts.forceNew || opts[\"force new connection\"] || false === opts.multiplex || sameNamespace;\n    var io;\n\n    if (newConnection) {\n      io = new Manager(source, opts);\n    } else {\n      if (!cache[id]) {\n        cache[id] = new Manager(source, opts);\n      }\n\n      io = cache[id];\n    }\n\n    if (parsed.query && !opts.query) {\n      opts.query = parsed.queryKey;\n    }\n\n    return io.socket(parsed.path, opts);\n  } // so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n  // namespace (e.g. `io.connect(...)`), for backward compatibility\n\n\n  _extends(lookup, {\n    Manager: Manager,\n    Socket: Socket,\n    io: lookup,\n    connect: lookup\n  });\n\n  return lookup;\n});","map":{"version":3,"names":["global","factory","exports","module","define","amd","globalThis","self","io","_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_extends","assign","bind","arguments","source","hasOwnProperty","call","apply","_inherits","subClass","superClass","create","value","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","e","_construct","Parent","args","Class","a","push","Function","_isNativeFunction","fn","toString","indexOf","_wrapNativeSuper","_cache","Map","undefined","has","get","set","Wrapper","_assertThisInitialized","ReferenceError","_possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","_superPropBase","object","property","_get","receiver","base","desc","getOwnPropertyDescriptor","_unsupportedIterableToArray","minLen","_arrayLikeToArray","n","slice","name","Array","from","test","arr","len","arr2","_createForOfIteratorHelper","allowArrayLike","it","isArray","F","s","done","f","normalCompletion","didErr","err","step","next","return","PACKET_TYPES","PACKET_TYPES_REVERSE","keys","forEach","ERROR_PACKET","type","data","withNativeBlob$1","Blob","withNativeArrayBuffer$2","ArrayBuffer","isView$1","isView","buffer","encodePacket","_ref","supportsBinary","callback","encodeBlobAsBase64","fileReader","FileReader","onload","content","split","readAsDataURL","chars","lookup$1","Uint8Array","i$1","charCodeAt","decode$1","decode","base64","bufferLength","encoded1","encoded2","encoded3","encoded4","arraybuffer","bytes","withNativeArrayBuffer$1","decodePacket","encodedPacket","binaryType","mapBinary","charAt","decodeBase64Packet","substring","packetType","decoded","SEPARATOR","String","fromCharCode","encodePayload","packets","encodedPackets","count","packet","join","decodePayload","encodedPayload","decodedPacket","protocol$1","Emitter","mixin","on","addEventListener","event","_callbacks","once","off","removeListener","removeAllListeners","removeEventListener","callbacks","cb","splice","emit","emitReserved","listeners","hasListeners","globalThisShim","window","pick","_len","attr","_key","reduce","acc","k","NATIVE_SET_TIMEOUT","setTimeout","NATIVE_CLEAR_TIMEOUT","clearTimeout","installTimerFunctions","opts","useNativeTimers","setTimeoutFn","clearTimeoutFn","BASE64_OVERHEAD","byteLength","utf8Length","Math","ceil","size","str","c","l","TransportError","_Error","_super","reason","description","context","_this","Error","Transport","_Emitter","_super2","_this2","query","readyState","socket","onError","open","doOpen","close","doClose","onClose","send","write","onOpen","onData","onPacket","details","alphabet","map","seed","prev","encode$1","num","encoded","floor","yeast","now","Date","encode","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","XMLHttpRequest","hasCORS","XHR","xdomain","concat","empty","hasXHR2","xhr","responseType","Polling","_Transport","polling","location","isSSL","protocol","port","xd","hostname","xs","secure","forceBase64","poll","pause","onPause","total","doPoll","_this3","_this4","_this5","doWrite","uri","schema","timestampRequests","timestampParam","sid","b64","Number","encodedQuery","ipv6","path","request","Request","_this6","req","method","xhrStatus","_this7","pollXhr","_this8","async","_this9","xscheme","extraHeaders","setDisableHeaderCheck","setRequestHeader","withCredentials","requestTimeout","timeout","onreadystatechange","status","onLoad","document","index","requestsCount","requests","cleanup","fromError","abort","responseText","attachEvent","unloadHandler","terminationEvent","nextTick","isPromiseAvailable","Promise","resolve","then","WebSocket","MozWebSocket","usingBrowserWebSocket","defaultBinaryType","isReactNative","navigator","product","toLowerCase","WS","check","protocols","headers","ws","addEventListeners","onopen","autoUnref","_socket","unref","onclose","closeEvent","onmessage","ev","onerror","_loop","lastPacket","transports","websocket","re","parts","parse","src","b","replace","m","exec","host","authority","ipv6uri","pathNames","queryKey","regx","names","$0","$1","$2","Socket$1","Socket","writeBuffer","prevBufferLen","agent","upgrade","rememberUpgrade","rejectUnauthorized","perMessageDeflate","threshold","transportOptions","closeOnBeforeunload","id","upgrades","pingInterval","pingTimeout","pingTimeoutTimer","beforeunloadEventListener","transport","offlineEventListener","createTransport","EIO","priorWebsocketSuccess","shift","setTransport","onDrain","probe","failed","onTransportOpen","msg","upgrading","flush","freezeTransport","error","onTransportClose","onupgrade","to","onHandshake","JSON","resetPingTimeout","sendPacket","code","filterUpgrades","maxPayload","getWritablePackets","shouldCheckPayloadSize","payloadSize","options","compress","cleanupAndClose","waitForUpgrade","filteredUpgrades","j","url","loc","href","withNativeArrayBuffer","withNativeBlob","withNativeFile","File","isBinary","hasBinary","toJSON","deconstructPacket","buffers","packetData","pack","_deconstructPacket","attachments","placeholder","_placeholder","newData","_newData","reconstructPacket","_reconstructPacket","isIndexValid","PacketType","Encoder","replacer","EVENT","ACK","BINARY_EVENT","BINARY_ACK","encodeAsBinary","encodeAsString","nsp","stringify","deconstruction","unshift","Decoder","reviver","add","reconstructor","decodeString","BinaryReconstructor","takeBinaryData","start","buf","_start","_start2","_c","payload","tryParse","substr","isPayloadValid","destroy","finishedReconstruction","CONNECT","DISCONNECT","CONNECT_ERROR","reconPack","binData","parser","freeze","subDestroy","RESERVED_EVENTS","connect","connect_error","disconnect","disconnecting","newListener","connected","receiveBuffer","sendBuffer","ids","acks","flags","auth","_autoConnect","subEvents","subs","onpacket","_readyState","_len2","_key2","ack","pop","_registerAckCallback","isTransportWritable","engine","discardPacket","notifyOutgoingListeners","timer","_len3","_key3","_packet","sameNamespace","onconnect","onevent","onack","ondisconnect","message","emitEvent","_anyListeners","_iterator","_step","listener","sent","_len4","_key4","emitBuffered","_compress","_timeout","onAny","prependAny","offAny","listenersAny","onAnyOutgoing","_anyOutgoingListeners","prependAnyOutgoing","offAnyOutgoing","listenersAnyOutgoing","_iterator2","_step2","Backoff","ms","min","max","factor","jitter","attempts","duration","pow","rand","random","deviation","reset","setMin","setMax","setJitter","Manager","_a","nsps","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","encoder","decoder","autoConnect","v","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","maybeReconnectOnOpen","_reconnecting","reconnect","skipReconnect","openSubDestroy","errorSub","onping","ondata","ondecoded","_destroy","_i","_nsps","active","_close","delay","onreconnect","attempt","cache","lookup","parsed","newConnection","forceNew","multiplex"],"sources":["C:/Users/SystemForLinux/Desktop/f2/code/chat/chatangular/node_modules/socket.io/client-dist/socket.io.js"],"sourcesContent":["/*!\n * Socket.IO v4.5.4\n * (c) 2014-2022 Guillermo Rauch\n * Released under the MIT License.\n */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.io = factory());\n})(this, (function () { 'use strict';\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n      return typeof obj;\n    } : function (obj) {\n      return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    }, _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    Object.defineProperty(Constructor, \"prototype\", {\n      writable: false\n    });\n    return Constructor;\n  }\n\n  function _extends() {\n    _extends = Object.assign ? Object.assign.bind() : function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n\n      return target;\n    };\n    return _extends.apply(this, arguments);\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    Object.defineProperty(subClass, \"prototype\", {\n      writable: false\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n    return _setPrototypeOf(o, p);\n  }\n\n  function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _construct(Parent, args, Class) {\n    if (_isNativeReflectConstruct()) {\n      _construct = Reflect.construct.bind();\n    } else {\n      _construct = function _construct(Parent, args, Class) {\n        var a = [null];\n        a.push.apply(a, args);\n        var Constructor = Function.bind.apply(Parent, a);\n        var instance = new Constructor();\n        if (Class) _setPrototypeOf(instance, Class.prototype);\n        return instance;\n      };\n    }\n\n    return _construct.apply(null, arguments);\n  }\n\n  function _isNativeFunction(fn) {\n    return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n  }\n\n  function _wrapNativeSuper(Class) {\n    var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n    _wrapNativeSuper = function _wrapNativeSuper(Class) {\n      if (Class === null || !_isNativeFunction(Class)) return Class;\n\n      if (typeof Class !== \"function\") {\n        throw new TypeError(\"Super expression must either be null or a function\");\n      }\n\n      if (typeof _cache !== \"undefined\") {\n        if (_cache.has(Class)) return _cache.get(Class);\n\n        _cache.set(Class, Wrapper);\n      }\n\n      function Wrapper() {\n        return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n      }\n\n      Wrapper.prototype = Object.create(Class.prototype, {\n        constructor: {\n          value: Wrapper,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      return _setPrototypeOf(Wrapper, Class);\n    };\n\n    return _wrapNativeSuper(Class);\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    } else if (call !== void 0) {\n      throw new TypeError(\"Derived constructors may only return object or undefined\");\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n    return function _createSuperInternal() {\n      var Super = _getPrototypeOf(Derived),\n          result;\n\n      if (hasNativeReflectConstruct) {\n        var NewTarget = _getPrototypeOf(this).constructor;\n\n        result = Reflect.construct(Super, arguments, NewTarget);\n      } else {\n        result = Super.apply(this, arguments);\n      }\n\n      return _possibleConstructorReturn(this, result);\n    };\n  }\n\n  function _superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = _getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function _get() {\n    if (typeof Reflect !== \"undefined\" && Reflect.get) {\n      _get = Reflect.get.bind();\n    } else {\n      _get = function _get(target, property, receiver) {\n        var base = _superPropBase(target, property);\n\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(arguments.length < 3 ? target : receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return _get.apply(this, arguments);\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _createForOfIteratorHelper(o, allowArrayLike) {\n    var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n    if (!it) {\n      if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n        if (it) o = it;\n        var i = 0;\n\n        var F = function () {};\n\n        return {\n          s: F,\n          n: function () {\n            if (i >= o.length) return {\n              done: true\n            };\n            return {\n              done: false,\n              value: o[i++]\n            };\n          },\n          e: function (e) {\n            throw e;\n          },\n          f: F\n        };\n      }\n\n      throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n\n    var normalCompletion = true,\n        didErr = false,\n        err;\n    return {\n      s: function () {\n        it = it.call(o);\n      },\n      n: function () {\n        var step = it.next();\n        normalCompletion = step.done;\n        return step;\n      },\n      e: function (e) {\n        didErr = true;\n        err = e;\n      },\n      f: function () {\n        try {\n          if (!normalCompletion && it.return != null) it.return();\n        } finally {\n          if (didErr) throw err;\n        }\n      }\n    };\n  }\n\n  var PACKET_TYPES = Object.create(null); // no Map = no polyfill\n\n  PACKET_TYPES[\"open\"] = \"0\";\n  PACKET_TYPES[\"close\"] = \"1\";\n  PACKET_TYPES[\"ping\"] = \"2\";\n  PACKET_TYPES[\"pong\"] = \"3\";\n  PACKET_TYPES[\"message\"] = \"4\";\n  PACKET_TYPES[\"upgrade\"] = \"5\";\n  PACKET_TYPES[\"noop\"] = \"6\";\n  var PACKET_TYPES_REVERSE = Object.create(null);\n  Object.keys(PACKET_TYPES).forEach(function (key) {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n  });\n  var ERROR_PACKET = {\n    type: \"error\",\n    data: \"parser error\"\n  };\n\n  var withNativeBlob$1 = typeof Blob === \"function\" || typeof Blob !== \"undefined\" && Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\";\n  var withNativeArrayBuffer$2 = typeof ArrayBuffer === \"function\"; // ArrayBuffer.isView method is not defined in IE10\n\n  var isView$1 = function isView(obj) {\n    return typeof ArrayBuffer.isView === \"function\" ? ArrayBuffer.isView(obj) : obj && obj.buffer instanceof ArrayBuffer;\n  };\n\n  var encodePacket = function encodePacket(_ref, supportsBinary, callback) {\n    var type = _ref.type,\n        data = _ref.data;\n\n    if (withNativeBlob$1 && data instanceof Blob) {\n      if (supportsBinary) {\n        return callback(data);\n      } else {\n        return encodeBlobAsBase64(data, callback);\n      }\n    } else if (withNativeArrayBuffer$2 && (data instanceof ArrayBuffer || isView$1(data))) {\n      if (supportsBinary) {\n        return callback(data);\n      } else {\n        return encodeBlobAsBase64(new Blob([data]), callback);\n      }\n    } // plain string\n\n\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n  };\n\n  var encodeBlobAsBase64 = function encodeBlobAsBase64(data, callback) {\n    var fileReader = new FileReader();\n\n    fileReader.onload = function () {\n      var content = fileReader.result.split(\",\")[1];\n      callback(\"b\" + content);\n    };\n\n    return fileReader.readAsDataURL(data);\n  };\n\n  var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'; // Use a lookup table to find the index.\n\n  var lookup$1 = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\n\n  for (var i$1 = 0; i$1 < chars.length; i$1++) {\n    lookup$1[chars.charCodeAt(i$1)] = i$1;\n  }\n  var decode$1 = function decode(base64) {\n    var bufferLength = base64.length * 0.75,\n        len = base64.length,\n        i,\n        p = 0,\n        encoded1,\n        encoded2,\n        encoded3,\n        encoded4;\n\n    if (base64[base64.length - 1] === '=') {\n      bufferLength--;\n\n      if (base64[base64.length - 2] === '=') {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n        bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i += 4) {\n      encoded1 = lookup$1[base64.charCodeAt(i)];\n      encoded2 = lookup$1[base64.charCodeAt(i + 1)];\n      encoded3 = lookup$1[base64.charCodeAt(i + 2)];\n      encoded4 = lookup$1[base64.charCodeAt(i + 3)];\n      bytes[p++] = encoded1 << 2 | encoded2 >> 4;\n      bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;\n      bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;\n    }\n\n    return arraybuffer;\n  };\n\n  var withNativeArrayBuffer$1 = typeof ArrayBuffer === \"function\";\n\n  var decodePacket = function decodePacket(encodedPacket, binaryType) {\n    if (typeof encodedPacket !== \"string\") {\n      return {\n        type: \"message\",\n        data: mapBinary(encodedPacket, binaryType)\n      };\n    }\n\n    var type = encodedPacket.charAt(0);\n\n    if (type === \"b\") {\n      return {\n        type: \"message\",\n        data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n      };\n    }\n\n    var packetType = PACKET_TYPES_REVERSE[type];\n\n    if (!packetType) {\n      return ERROR_PACKET;\n    }\n\n    return encodedPacket.length > 1 ? {\n      type: PACKET_TYPES_REVERSE[type],\n      data: encodedPacket.substring(1)\n    } : {\n      type: PACKET_TYPES_REVERSE[type]\n    };\n  };\n\n  var decodeBase64Packet = function decodeBase64Packet(data, binaryType) {\n    if (withNativeArrayBuffer$1) {\n      var decoded = decode$1(data);\n      return mapBinary(decoded, binaryType);\n    } else {\n      return {\n        base64: true,\n        data: data\n      }; // fallback for old browsers\n    }\n  };\n\n  var mapBinary = function mapBinary(data, binaryType) {\n    switch (binaryType) {\n      case \"blob\":\n        return data instanceof ArrayBuffer ? new Blob([data]) : data;\n\n      case \"arraybuffer\":\n      default:\n        return data;\n      // assuming the data is already an ArrayBuffer\n    }\n  };\n\n  var SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\n\n  var encodePayload = function encodePayload(packets, callback) {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    var length = packets.length;\n    var encodedPackets = new Array(length);\n    var count = 0;\n    packets.forEach(function (packet, i) {\n      // force base64 encoding for binary packets\n      encodePacket(packet, false, function (encodedPacket) {\n        encodedPackets[i] = encodedPacket;\n\n        if (++count === length) {\n          callback(encodedPackets.join(SEPARATOR));\n        }\n      });\n    });\n  };\n\n  var decodePayload = function decodePayload(encodedPayload, binaryType) {\n    var encodedPackets = encodedPayload.split(SEPARATOR);\n    var packets = [];\n\n    for (var i = 0; i < encodedPackets.length; i++) {\n      var decodedPacket = decodePacket(encodedPackets[i], binaryType);\n      packets.push(decodedPacket);\n\n      if (decodedPacket.type === \"error\") {\n        break;\n      }\n    }\n\n    return packets;\n  };\n\n  var protocol$1 = 4;\n\n  /**\n   * Initialize a new `Emitter`.\n   *\n   * @api public\n   */\n  function Emitter(obj) {\n    if (obj) return mixin(obj);\n  }\n  /**\n   * Mixin the emitter properties.\n   *\n   * @param {Object} obj\n   * @return {Object}\n   * @api private\n   */\n\n  function mixin(obj) {\n    for (var key in Emitter.prototype) {\n      obj[key] = Emitter.prototype[key];\n    }\n\n    return obj;\n  }\n  /**\n   * Listen on the given `event` with `fn`.\n   *\n   * @param {String} event\n   * @param {Function} fn\n   * @return {Emitter}\n   * @api public\n   */\n\n\n  Emitter.prototype.on = Emitter.prototype.addEventListener = function (event, fn) {\n    this._callbacks = this._callbacks || {};\n    (this._callbacks['$' + event] = this._callbacks['$' + event] || []).push(fn);\n    return this;\n  };\n  /**\n   * Adds an `event` listener that will be invoked a single\n   * time then automatically removed.\n   *\n   * @param {String} event\n   * @param {Function} fn\n   * @return {Emitter}\n   * @api public\n   */\n\n\n  Emitter.prototype.once = function (event, fn) {\n    function on() {\n      this.off(event, on);\n      fn.apply(this, arguments);\n    }\n\n    on.fn = fn;\n    this.on(event, on);\n    return this;\n  };\n  /**\n   * Remove the given callback for `event` or all\n   * registered callbacks.\n   *\n   * @param {String} event\n   * @param {Function} fn\n   * @return {Emitter}\n   * @api public\n   */\n\n\n  Emitter.prototype.off = Emitter.prototype.removeListener = Emitter.prototype.removeAllListeners = Emitter.prototype.removeEventListener = function (event, fn) {\n    this._callbacks = this._callbacks || {}; // all\n\n    if (0 == arguments.length) {\n      this._callbacks = {};\n      return this;\n    } // specific event\n\n\n    var callbacks = this._callbacks['$' + event];\n    if (!callbacks) return this; // remove all handlers\n\n    if (1 == arguments.length) {\n      delete this._callbacks['$' + event];\n      return this;\n    } // remove specific handler\n\n\n    var cb;\n\n    for (var i = 0; i < callbacks.length; i++) {\n      cb = callbacks[i];\n\n      if (cb === fn || cb.fn === fn) {\n        callbacks.splice(i, 1);\n        break;\n      }\n    } // Remove event specific arrays for event types that no\n    // one is subscribed for to avoid memory leak.\n\n\n    if (callbacks.length === 0) {\n      delete this._callbacks['$' + event];\n    }\n\n    return this;\n  };\n  /**\n   * Emit `event` with the given args.\n   *\n   * @param {String} event\n   * @param {Mixed} ...\n   * @return {Emitter}\n   */\n\n\n  Emitter.prototype.emit = function (event) {\n    this._callbacks = this._callbacks || {};\n    var args = new Array(arguments.length - 1),\n        callbacks = this._callbacks['$' + event];\n\n    for (var i = 1; i < arguments.length; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    if (callbacks) {\n      callbacks = callbacks.slice(0);\n\n      for (var i = 0, len = callbacks.length; i < len; ++i) {\n        callbacks[i].apply(this, args);\n      }\n    }\n\n    return this;\n  }; // alias used for reserved events (protected method)\n\n\n  Emitter.prototype.emitReserved = Emitter.prototype.emit;\n  /**\n   * Return array of callbacks for `event`.\n   *\n   * @param {String} event\n   * @return {Array}\n   * @api public\n   */\n\n  Emitter.prototype.listeners = function (event) {\n    this._callbacks = this._callbacks || {};\n    return this._callbacks['$' + event] || [];\n  };\n  /**\n   * Check if this emitter has `event` handlers.\n   *\n   * @param {String} event\n   * @return {Boolean}\n   * @api public\n   */\n\n\n  Emitter.prototype.hasListeners = function (event) {\n    return !!this.listeners(event).length;\n  };\n\n  var globalThisShim = function () {\n    if (typeof self !== \"undefined\") {\n      return self;\n    } else if (typeof window !== \"undefined\") {\n      return window;\n    } else {\n      return Function(\"return this\")();\n    }\n  }();\n\n  function pick(obj) {\n    for (var _len = arguments.length, attr = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      attr[_key - 1] = arguments[_key];\n    }\n\n    return attr.reduce(function (acc, k) {\n      if (obj.hasOwnProperty(k)) {\n        acc[k] = obj[k];\n      }\n\n      return acc;\n    }, {});\n  } // Keep a reference to the real timeout functions so they can be used when overridden\n\n  var NATIVE_SET_TIMEOUT = setTimeout;\n  var NATIVE_CLEAR_TIMEOUT = clearTimeout;\n  function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n      obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThisShim);\n      obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThisShim);\n    } else {\n      obj.setTimeoutFn = setTimeout.bind(globalThisShim);\n      obj.clearTimeoutFn = clearTimeout.bind(globalThisShim);\n    }\n  } // base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\n\n  var BASE64_OVERHEAD = 1.33; // we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\n\n  function byteLength(obj) {\n    if (typeof obj === \"string\") {\n      return utf8Length(obj);\n    } // arraybuffer or blob\n\n\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n  }\n\n  function utf8Length(str) {\n    var c = 0,\n        length = 0;\n\n    for (var i = 0, l = str.length; i < l; i++) {\n      c = str.charCodeAt(i);\n\n      if (c < 0x80) {\n        length += 1;\n      } else if (c < 0x800) {\n        length += 2;\n      } else if (c < 0xd800 || c >= 0xe000) {\n        length += 3;\n      } else {\n        i++;\n        length += 4;\n      }\n    }\n\n    return length;\n  }\n\n  var TransportError = /*#__PURE__*/function (_Error) {\n    _inherits(TransportError, _Error);\n\n    var _super = _createSuper(TransportError);\n\n    function TransportError(reason, description, context) {\n      var _this;\n\n      _classCallCheck(this, TransportError);\n\n      _this = _super.call(this, reason);\n      _this.description = description;\n      _this.context = context;\n      _this.type = \"TransportError\";\n      return _this;\n    }\n\n    return _createClass(TransportError);\n  }( /*#__PURE__*/_wrapNativeSuper(Error));\n\n  var Transport = /*#__PURE__*/function (_Emitter) {\n    _inherits(Transport, _Emitter);\n\n    var _super2 = _createSuper(Transport);\n\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} options.\n     * @api private\n     */\n    function Transport(opts) {\n      var _this2;\n\n      _classCallCheck(this, Transport);\n\n      _this2 = _super2.call(this);\n      _this2.writable = false;\n      installTimerFunctions(_assertThisInitialized(_this2), opts);\n      _this2.opts = opts;\n      _this2.query = opts.query;\n      _this2.readyState = \"\";\n      _this2.socket = opts.socket;\n      return _this2;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @api protected\n     */\n\n\n    _createClass(Transport, [{\n      key: \"onError\",\n      value: function onError(reason, description, context) {\n        _get(_getPrototypeOf(Transport.prototype), \"emitReserved\", this).call(this, \"error\", new TransportError(reason, description, context));\n\n        return this;\n      }\n      /**\n       * Opens the transport.\n       *\n       * @api public\n       */\n\n    }, {\n      key: \"open\",\n      value: function open() {\n        if (\"closed\" === this.readyState || \"\" === this.readyState) {\n          this.readyState = \"opening\";\n          this.doOpen();\n        }\n\n        return this;\n      }\n      /**\n       * Closes the transport.\n       *\n       * @api public\n       */\n\n    }, {\n      key: \"close\",\n      value: function close() {\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n          this.doClose();\n          this.onClose();\n        }\n\n        return this;\n      }\n      /**\n       * Sends multiple packets.\n       *\n       * @param {Array} packets\n       * @api public\n       */\n\n    }, {\n      key: \"send\",\n      value: function send(packets) {\n        if (\"open\" === this.readyState) {\n          this.write(packets);\n        }\n      }\n      /**\n       * Called upon open\n       *\n       * @api protected\n       */\n\n    }, {\n      key: \"onOpen\",\n      value: function onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n\n        _get(_getPrototypeOf(Transport.prototype), \"emitReserved\", this).call(this, \"open\");\n      }\n      /**\n       * Called with data.\n       *\n       * @param {String} data\n       * @api protected\n       */\n\n    }, {\n      key: \"onData\",\n      value: function onData(data) {\n        var packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n      }\n      /**\n       * Called with a decoded packet.\n       *\n       * @api protected\n       */\n\n    }, {\n      key: \"onPacket\",\n      value: function onPacket(packet) {\n        _get(_getPrototypeOf(Transport.prototype), \"emitReserved\", this).call(this, \"packet\", packet);\n      }\n      /**\n       * Called upon close.\n       *\n       * @api protected\n       */\n\n    }, {\n      key: \"onClose\",\n      value: function onClose(details) {\n        this.readyState = \"closed\";\n\n        _get(_getPrototypeOf(Transport.prototype), \"emitReserved\", this).call(this, \"close\", details);\n      }\n    }]);\n\n    return Transport;\n  }(Emitter);\n\n  // imported from https://github.com/unshiftio/yeast\n\n  var alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''),\n      length = 64,\n      map = {};\n  var seed = 0,\n      i = 0,\n      prev;\n  /**\n   * Return a string representing the specified number.\n   *\n   * @param {Number} num The number to convert.\n   * @returns {String} The string representation of the number.\n   * @api public\n   */\n\n  function encode$1(num) {\n    var encoded = '';\n\n    do {\n      encoded = alphabet[num % length] + encoded;\n      num = Math.floor(num / length);\n    } while (num > 0);\n\n    return encoded;\n  }\n  /**\n   * Yeast: A tiny growing id generator.\n   *\n   * @returns {String} A unique id.\n   * @api public\n   */\n\n  function yeast() {\n    var now = encode$1(+new Date());\n    if (now !== prev) return seed = 0, prev = now;\n    return now + '.' + encode$1(seed++);\n  } //\n  // Map each character to its index.\n  //\n\n  for (; i < length; i++) {\n    map[alphabet[i]] = i;\n  }\n\n  // imported from https://github.com/galkn/querystring\n\n  /**\n   * Compiles a querystring\n   * Returns string representation of the object\n   *\n   * @param {Object}\n   * @api private\n   */\n  function encode(obj) {\n    var str = '';\n\n    for (var i in obj) {\n      if (obj.hasOwnProperty(i)) {\n        if (str.length) str += '&';\n        str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n      }\n    }\n\n    return str;\n  }\n  /**\n   * Parses a simple querystring into an object\n   *\n   * @param {String} qs\n   * @api private\n   */\n\n  function decode(qs) {\n    var qry = {};\n    var pairs = qs.split('&');\n\n    for (var i = 0, l = pairs.length; i < l; i++) {\n      var pair = pairs[i].split('=');\n      qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n\n    return qry;\n  }\n\n  // imported from https://github.com/component/has-cors\n  var value = false;\n\n  try {\n    value = typeof XMLHttpRequest !== 'undefined' && 'withCredentials' in new XMLHttpRequest();\n  } catch (err) {// if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n  }\n\n  var hasCORS = value;\n\n  // browser shim for xmlhttprequest module\n  function XHR(opts) {\n    var xdomain = opts.xdomain; // XMLHttpRequest can be disabled on IE\n\n    try {\n      if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n        return new XMLHttpRequest();\n      }\n    } catch (e) {}\n\n    if (!xdomain) {\n      try {\n        return new globalThisShim[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n      } catch (e) {}\n    }\n  }\n\n  function empty() {}\n\n  var hasXHR2 = function () {\n    var xhr = new XHR({\n      xdomain: false\n    });\n    return null != xhr.responseType;\n  }();\n\n  var Polling = /*#__PURE__*/function (_Transport) {\n    _inherits(Polling, _Transport);\n\n    var _super = _createSuper(Polling);\n\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @api public\n     */\n    function Polling(opts) {\n      var _this;\n\n      _classCallCheck(this, Polling);\n\n      _this = _super.call(this, opts);\n      _this.polling = false;\n\n      if (typeof location !== \"undefined\") {\n        var isSSL = \"https:\" === location.protocol;\n        var port = location.port; // some user agents have empty `location.port`\n\n        if (!port) {\n          port = isSSL ? \"443\" : \"80\";\n        }\n\n        _this.xd = typeof location !== \"undefined\" && opts.hostname !== location.hostname || port !== opts.port;\n        _this.xs = opts.secure !== isSSL;\n      }\n      /**\n       * XHR supports binary\n       */\n\n\n      var forceBase64 = opts && opts.forceBase64;\n      _this.supportsBinary = hasXHR2 && !forceBase64;\n      return _this;\n    }\n    /**\n     * Transport name.\n     */\n\n\n    _createClass(Polling, [{\n      key: \"name\",\n      get: function get() {\n        return \"polling\";\n      }\n      /**\n       * Opens the socket (triggers polling). We write a PING message to determine\n       * when the transport is open.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"doOpen\",\n      value: function doOpen() {\n        this.poll();\n      }\n      /**\n       * Pauses polling.\n       *\n       * @param {Function} callback upon buffers are flushed and transport is paused\n       * @api private\n       */\n\n    }, {\n      key: \"pause\",\n      value: function pause(onPause) {\n        var _this2 = this;\n\n        this.readyState = \"pausing\";\n\n        var pause = function pause() {\n          _this2.readyState = \"paused\";\n          onPause();\n        };\n\n        if (this.polling || !this.writable) {\n          var total = 0;\n\n          if (this.polling) {\n            total++;\n            this.once(\"pollComplete\", function () {\n              --total || pause();\n            });\n          }\n\n          if (!this.writable) {\n            total++;\n            this.once(\"drain\", function () {\n              --total || pause();\n            });\n          }\n        } else {\n          pause();\n        }\n      }\n      /**\n       * Starts polling cycle.\n       *\n       * @api public\n       */\n\n    }, {\n      key: \"poll\",\n      value: function poll() {\n        this.polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n      }\n      /**\n       * Overloads onData to detect payloads.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"onData\",\n      value: function onData(data) {\n        var _this3 = this;\n\n        var callback = function callback(packet) {\n          // if its the first message we consider the transport open\n          if (\"opening\" === _this3.readyState && packet.type === \"open\") {\n            _this3.onOpen();\n          } // if its a close packet, we close the ongoing requests\n\n\n          if (\"close\" === packet.type) {\n            _this3.onClose({\n              description: \"transport closed by the server\"\n            });\n\n            return false;\n          } // otherwise bypass onData and handle the message\n\n\n          _this3.onPacket(packet);\n        }; // decode payload\n\n\n        decodePayload(data, this.socket.binaryType).forEach(callback); // if an event did not trigger closing\n\n        if (\"closed\" !== this.readyState) {\n          // if we got data we're not polling\n          this.polling = false;\n          this.emitReserved(\"pollComplete\");\n\n          if (\"open\" === this.readyState) {\n            this.poll();\n          }\n        }\n      }\n      /**\n       * For polling, send a close packet.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"doClose\",\n      value: function doClose() {\n        var _this4 = this;\n\n        var close = function close() {\n          _this4.write([{\n            type: \"close\"\n          }]);\n        };\n\n        if (\"open\" === this.readyState) {\n          close();\n        } else {\n          // in case we're trying to close while\n          // handshaking is in progress (GH-164)\n          this.once(\"open\", close);\n        }\n      }\n      /**\n       * Writes a packets payload.\n       *\n       * @param {Array} data packets\n       * @param {Function} drain callback\n       * @api private\n       */\n\n    }, {\n      key: \"write\",\n      value: function write(packets) {\n        var _this5 = this;\n\n        this.writable = false;\n        encodePayload(packets, function (data) {\n          _this5.doWrite(data, function () {\n            _this5.writable = true;\n\n            _this5.emitReserved(\"drain\");\n          });\n        });\n      }\n      /**\n       * Generates uri for connection.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"uri\",\n      value: function uri() {\n        var query = this.query || {};\n        var schema = this.opts.secure ? \"https\" : \"http\";\n        var port = \"\"; // cache busting is forced\n\n        if (false !== this.opts.timestampRequests) {\n          query[this.opts.timestampParam] = yeast();\n        }\n\n        if (!this.supportsBinary && !query.sid) {\n          query.b64 = 1;\n        } // avoid port if default for schema\n\n\n        if (this.opts.port && (\"https\" === schema && Number(this.opts.port) !== 443 || \"http\" === schema && Number(this.opts.port) !== 80)) {\n          port = \":\" + this.opts.port;\n        }\n\n        var encodedQuery = encode(query);\n        var ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n        return schema + \"://\" + (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) + port + this.opts.path + (encodedQuery.length ? \"?\" + encodedQuery : \"\");\n      }\n      /**\n       * Creates a request.\n       *\n       * @param {String} method\n       * @api private\n       */\n\n    }, {\n      key: \"request\",\n      value: function request() {\n        var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _extends(opts, {\n          xd: this.xd,\n          xs: this.xs\n        }, this.opts);\n\n        return new Request(this.uri(), opts);\n      }\n      /**\n       * Sends data.\n       *\n       * @param {String} data to send.\n       * @param {Function} called upon flush.\n       * @api private\n       */\n\n    }, {\n      key: \"doWrite\",\n      value: function doWrite(data, fn) {\n        var _this6 = this;\n\n        var req = this.request({\n          method: \"POST\",\n          data: data\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", function (xhrStatus, context) {\n          _this6.onError(\"xhr post error\", xhrStatus, context);\n        });\n      }\n      /**\n       * Starts a poll cycle.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"doPoll\",\n      value: function doPoll() {\n        var _this7 = this;\n\n        var req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", function (xhrStatus, context) {\n          _this7.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n      }\n    }]);\n\n    return Polling;\n  }(Transport);\n  var Request = /*#__PURE__*/function (_Emitter) {\n    _inherits(Request, _Emitter);\n\n    var _super2 = _createSuper(Request);\n\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @api public\n     */\n    function Request(uri, opts) {\n      var _this8;\n\n      _classCallCheck(this, Request);\n\n      _this8 = _super2.call(this);\n      installTimerFunctions(_assertThisInitialized(_this8), opts);\n      _this8.opts = opts;\n      _this8.method = opts.method || \"GET\";\n      _this8.uri = uri;\n      _this8.async = false !== opts.async;\n      _this8.data = undefined !== opts.data ? opts.data : null;\n\n      _this8.create();\n\n      return _this8;\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @api private\n     */\n\n\n    _createClass(Request, [{\n      key: \"create\",\n      value: function create() {\n        var _this9 = this;\n\n        var opts = pick(this.opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this.opts.xd;\n        opts.xscheme = !!this.opts.xs;\n        var xhr = this.xhr = new XHR(opts);\n\n        try {\n          xhr.open(this.method, this.uri, this.async);\n\n          try {\n            if (this.opts.extraHeaders) {\n              xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n\n              for (var i in this.opts.extraHeaders) {\n                if (this.opts.extraHeaders.hasOwnProperty(i)) {\n                  xhr.setRequestHeader(i, this.opts.extraHeaders[i]);\n                }\n              }\n            }\n          } catch (e) {}\n\n          if (\"POST\" === this.method) {\n            try {\n              xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n            } catch (e) {}\n          }\n\n          try {\n            xhr.setRequestHeader(\"Accept\", \"*/*\");\n          } catch (e) {} // ie6 check\n\n\n          if (\"withCredentials\" in xhr) {\n            xhr.withCredentials = this.opts.withCredentials;\n          }\n\n          if (this.opts.requestTimeout) {\n            xhr.timeout = this.opts.requestTimeout;\n          }\n\n          xhr.onreadystatechange = function () {\n            if (4 !== xhr.readyState) return;\n\n            if (200 === xhr.status || 1223 === xhr.status) {\n              _this9.onLoad();\n            } else {\n              // make sure the `error` event handler that's user-set\n              // does not throw in the same tick and gets caught here\n              _this9.setTimeoutFn(function () {\n                _this9.onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n              }, 0);\n            }\n          };\n\n          xhr.send(this.data);\n        } catch (e) {\n          // Need to defer since .create() is called directly from the constructor\n          // and thus the 'error' event can only be only bound *after* this exception\n          // occurs.  Therefore, also, we cannot throw here at all.\n          this.setTimeoutFn(function () {\n            _this9.onError(e);\n          }, 0);\n          return;\n        }\n\n        if (typeof document !== \"undefined\") {\n          this.index = Request.requestsCount++;\n          Request.requests[this.index] = this;\n        }\n      }\n      /**\n       * Called upon error.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"onError\",\n      value: function onError(err) {\n        this.emitReserved(\"error\", err, this.xhr);\n        this.cleanup(true);\n      }\n      /**\n       * Cleans up house.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"cleanup\",\n      value: function cleanup(fromError) {\n        if (\"undefined\" === typeof this.xhr || null === this.xhr) {\n          return;\n        }\n\n        this.xhr.onreadystatechange = empty;\n\n        if (fromError) {\n          try {\n            this.xhr.abort();\n          } catch (e) {}\n        }\n\n        if (typeof document !== \"undefined\") {\n          delete Request.requests[this.index];\n        }\n\n        this.xhr = null;\n      }\n      /**\n       * Called upon load.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"onLoad\",\n      value: function onLoad() {\n        var data = this.xhr.responseText;\n\n        if (data !== null) {\n          this.emitReserved(\"data\", data);\n          this.emitReserved(\"success\");\n          this.cleanup();\n        }\n      }\n      /**\n       * Aborts the request.\n       *\n       * @api public\n       */\n\n    }, {\n      key: \"abort\",\n      value: function abort() {\n        this.cleanup();\n      }\n    }]);\n\n    return Request;\n  }(Emitter);\n  Request.requestsCount = 0;\n  Request.requests = {};\n  /**\n   * Aborts pending requests when unloading the window. This is needed to prevent\n   * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n   * emitted.\n   */\n\n  if (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n      // @ts-ignore\n      attachEvent(\"onunload\", unloadHandler);\n    } else if (typeof addEventListener === \"function\") {\n      var terminationEvent = \"onpagehide\" in globalThisShim ? \"pagehide\" : \"unload\";\n      addEventListener(terminationEvent, unloadHandler, false);\n    }\n  }\n\n  function unloadHandler() {\n    for (var i in Request.requests) {\n      if (Request.requests.hasOwnProperty(i)) {\n        Request.requests[i].abort();\n      }\n    }\n  }\n\n  var nextTick = function () {\n    var isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n\n    if (isPromiseAvailable) {\n      return function (cb) {\n        return Promise.resolve().then(cb);\n      };\n    } else {\n      return function (cb, setTimeoutFn) {\n        return setTimeoutFn(cb, 0);\n      };\n    }\n  }();\n  var WebSocket = globalThisShim.WebSocket || globalThisShim.MozWebSocket;\n  var usingBrowserWebSocket = true;\n  var defaultBinaryType = \"arraybuffer\";\n\n  var isReactNative = typeof navigator !== \"undefined\" && typeof navigator.product === \"string\" && navigator.product.toLowerCase() === \"reactnative\";\n  var WS = /*#__PURE__*/function (_Transport) {\n    _inherits(WS, _Transport);\n\n    var _super = _createSuper(WS);\n\n    /**\n     * WebSocket transport constructor.\n     *\n     * @api {Object} connection options\n     * @api public\n     */\n    function WS(opts) {\n      var _this;\n\n      _classCallCheck(this, WS);\n\n      _this = _super.call(this, opts);\n      _this.supportsBinary = !opts.forceBase64;\n      return _this;\n    }\n    /**\n     * Transport name.\n     *\n     * @api public\n     */\n\n\n    _createClass(WS, [{\n      key: \"name\",\n      get: function get() {\n        return \"websocket\";\n      }\n      /**\n       * Opens socket.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"doOpen\",\n      value: function doOpen() {\n        if (!this.check()) {\n          // let probe timeout\n          return;\n        }\n\n        var uri = this.uri();\n        var protocols = this.opts.protocols; // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n\n        var opts = isReactNative ? {} : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n\n        if (this.opts.extraHeaders) {\n          opts.headers = this.opts.extraHeaders;\n        }\n\n        try {\n          this.ws = usingBrowserWebSocket && !isReactNative ? protocols ? new WebSocket(uri, protocols) : new WebSocket(uri) : new WebSocket(uri, protocols, opts);\n        } catch (err) {\n          return this.emitReserved(\"error\", err);\n        }\n\n        this.ws.binaryType = this.socket.binaryType || defaultBinaryType;\n        this.addEventListeners();\n      }\n      /**\n       * Adds event listeners to the socket\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"addEventListeners\",\n      value: function addEventListeners() {\n        var _this2 = this;\n\n        this.ws.onopen = function () {\n          if (_this2.opts.autoUnref) {\n            _this2.ws._socket.unref();\n          }\n\n          _this2.onOpen();\n        };\n\n        this.ws.onclose = function (closeEvent) {\n          return _this2.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent\n          });\n        };\n\n        this.ws.onmessage = function (ev) {\n          return _this2.onData(ev.data);\n        };\n\n        this.ws.onerror = function (e) {\n          return _this2.onError(\"websocket error\", e);\n        };\n      }\n      /**\n       * Writes data to socket.\n       *\n       * @param {Array} array of packets.\n       * @api private\n       */\n\n    }, {\n      key: \"write\",\n      value: function write(packets) {\n        var _this3 = this;\n\n        this.writable = false; // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n\n        var _loop = function _loop(i) {\n          var packet = packets[i];\n          var lastPacket = i === packets.length - 1;\n          encodePacket(packet, _this3.supportsBinary, function (data) {\n            // always create a new object (GH-437)\n            var opts = {};\n            // have a chance of informing us about it yet, in that case send will\n            // throw an error\n\n\n            try {\n              if (usingBrowserWebSocket) {\n                // TypeError is thrown when passing the second argument on Safari\n                _this3.ws.send(data);\n              }\n            } catch (e) {}\n\n            if (lastPacket) {\n              // fake drain\n              // defer to next tick to allow Socket to clear writeBuffer\n              nextTick(function () {\n                _this3.writable = true;\n\n                _this3.emitReserved(\"drain\");\n              }, _this3.setTimeoutFn);\n            }\n          });\n        };\n\n        for (var i = 0; i < packets.length; i++) {\n          _loop(i);\n        }\n      }\n      /**\n       * Closes socket.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"doClose\",\n      value: function doClose() {\n        if (typeof this.ws !== \"undefined\") {\n          this.ws.close();\n          this.ws = null;\n        }\n      }\n      /**\n       * Generates uri for connection.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"uri\",\n      value: function uri() {\n        var query = this.query || {};\n        var schema = this.opts.secure ? \"wss\" : \"ws\";\n        var port = \"\"; // avoid port if default for schema\n\n        if (this.opts.port && (\"wss\" === schema && Number(this.opts.port) !== 443 || \"ws\" === schema && Number(this.opts.port) !== 80)) {\n          port = \":\" + this.opts.port;\n        } // append timestamp to URI\n\n\n        if (this.opts.timestampRequests) {\n          query[this.opts.timestampParam] = yeast();\n        } // communicate binary support capabilities\n\n\n        if (!this.supportsBinary) {\n          query.b64 = 1;\n        }\n\n        var encodedQuery = encode(query);\n        var ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n        return schema + \"://\" + (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) + port + this.opts.path + (encodedQuery.length ? \"?\" + encodedQuery : \"\");\n      }\n      /**\n       * Feature detection for WebSocket.\n       *\n       * @return {Boolean} whether this transport is available.\n       * @api public\n       */\n\n    }, {\n      key: \"check\",\n      value: function check() {\n        return !!WebSocket;\n      }\n    }]);\n\n    return WS;\n  }(Transport);\n\n  var transports = {\n    websocket: WS,\n    polling: Polling\n  };\n\n  // imported from https://github.com/galkn/parseuri\n\n  /**\n   * Parses an URI\n   *\n   * @author Steven Levithan <stevenlevithan.com> (MIT license)\n   * @api private\n   */\n  var re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n  var parts = ['source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'];\n  function parse(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n      str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n      uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n      uri.source = src;\n      uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n      uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n      uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n  }\n\n  function pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n      names.splice(0, 1);\n    }\n\n    if (path.slice(-1) == '/') {\n      names.splice(names.length - 1, 1);\n    }\n\n    return names;\n  }\n\n  function queryKey(uri, query) {\n    var data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n      if ($1) {\n        data[$1] = $2;\n      }\n    });\n    return data;\n  }\n\n  var Socket$1 = /*#__PURE__*/function (_Emitter) {\n    _inherits(Socket, _Emitter);\n\n    var _super = _createSuper(Socket);\n\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri or options\n     * @param {Object} opts - options\n     * @api public\n     */\n    function Socket(uri) {\n      var _this;\n\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, Socket);\n\n      _this = _super.call(this);\n\n      if (uri && \"object\" === _typeof(uri)) {\n        opts = uri;\n        uri = null;\n      }\n\n      if (uri) {\n        uri = parse(uri);\n        opts.hostname = uri.host;\n        opts.secure = uri.protocol === \"https\" || uri.protocol === \"wss\";\n        opts.port = uri.port;\n        if (uri.query) opts.query = uri.query;\n      } else if (opts.host) {\n        opts.hostname = parse(opts.host).host;\n      }\n\n      installTimerFunctions(_assertThisInitialized(_this), opts);\n      _this.secure = null != opts.secure ? opts.secure : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n\n      if (opts.hostname && !opts.port) {\n        // if no port is specified manually, use the protocol default\n        opts.port = _this.secure ? \"443\" : \"80\";\n      }\n\n      _this.hostname = opts.hostname || (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n      _this.port = opts.port || (typeof location !== \"undefined\" && location.port ? location.port : _this.secure ? \"443\" : \"80\");\n      _this.transports = opts.transports || [\"polling\", \"websocket\"];\n      _this.readyState = \"\";\n      _this.writeBuffer = [];\n      _this.prevBufferLen = 0;\n      _this.opts = _extends({\n        path: \"/engine.io\",\n        agent: false,\n        withCredentials: false,\n        upgrade: true,\n        timestampParam: \"t\",\n        rememberUpgrade: false,\n        rejectUnauthorized: true,\n        perMessageDeflate: {\n          threshold: 1024\n        },\n        transportOptions: {},\n        closeOnBeforeunload: true\n      }, opts);\n      _this.opts.path = _this.opts.path.replace(/\\/$/, \"\") + \"/\";\n\n      if (typeof _this.opts.query === \"string\") {\n        _this.opts.query = decode(_this.opts.query);\n      } // set on handshake\n\n\n      _this.id = null;\n      _this.upgrades = null;\n      _this.pingInterval = null;\n      _this.pingTimeout = null; // set on heartbeat\n\n      _this.pingTimeoutTimer = null;\n\n      if (typeof addEventListener === \"function\") {\n        if (_this.opts.closeOnBeforeunload) {\n          // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n          // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n          // closed/reloaded)\n          _this.beforeunloadEventListener = function () {\n            if (_this.transport) {\n              // silently close the transport\n              _this.transport.removeAllListeners();\n\n              _this.transport.close();\n            }\n          };\n\n          addEventListener(\"beforeunload\", _this.beforeunloadEventListener, false);\n        }\n\n        if (_this.hostname !== \"localhost\") {\n          _this.offlineEventListener = function () {\n            _this.onClose(\"transport close\", {\n              description: \"network connection lost\"\n            });\n          };\n\n          addEventListener(\"offline\", _this.offlineEventListener, false);\n        }\n      }\n\n      _this.open();\n\n      return _this;\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} transport name\n     * @return {Transport}\n     * @api private\n     */\n\n\n    _createClass(Socket, [{\n      key: \"createTransport\",\n      value: function createTransport(name) {\n        var query = _extends({}, this.opts.query); // append engine.io protocol identifier\n\n\n        query.EIO = protocol$1; // transport name\n\n        query.transport = name; // session id if we already have one\n\n        if (this.id) query.sid = this.id;\n\n        var opts = _extends({}, this.opts.transportOptions[name], this.opts, {\n          query: query,\n          socket: this,\n          hostname: this.hostname,\n          secure: this.secure,\n          port: this.port\n        });\n\n        return new transports[name](opts);\n      }\n      /**\n       * Initializes transport to use and starts probe.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"open\",\n      value: function open() {\n        var _this2 = this;\n\n        var transport;\n\n        if (this.opts.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf(\"websocket\") !== -1) {\n          transport = \"websocket\";\n        } else if (0 === this.transports.length) {\n          // Emit error on next tick so it can be listened to\n          this.setTimeoutFn(function () {\n            _this2.emitReserved(\"error\", \"No transports available\");\n          }, 0);\n          return;\n        } else {\n          transport = this.transports[0];\n        }\n\n        this.readyState = \"opening\"; // Retry with the next transport if the transport is disabled (jsonp: false)\n\n        try {\n          transport = this.createTransport(transport);\n        } catch (e) {\n          this.transports.shift();\n          this.open();\n          return;\n        }\n\n        transport.open();\n        this.setTransport(transport);\n      }\n      /**\n       * Sets the current transport. Disables the existing one (if any).\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"setTransport\",\n      value: function setTransport(transport) {\n        var _this3 = this;\n\n        if (this.transport) {\n          this.transport.removeAllListeners();\n        } // set up transport\n\n\n        this.transport = transport; // set up transport listeners\n\n        transport.on(\"drain\", this.onDrain.bind(this)).on(\"packet\", this.onPacket.bind(this)).on(\"error\", this.onError.bind(this)).on(\"close\", function (reason) {\n          return _this3.onClose(\"transport close\", reason);\n        });\n      }\n      /**\n       * Probes a transport.\n       *\n       * @param {String} transport name\n       * @api private\n       */\n\n    }, {\n      key: \"probe\",\n      value: function probe(name) {\n        var _this4 = this;\n\n        var transport = this.createTransport(name);\n        var failed = false;\n        Socket.priorWebsocketSuccess = false;\n\n        var onTransportOpen = function onTransportOpen() {\n          if (failed) return;\n          transport.send([{\n            type: \"ping\",\n            data: \"probe\"\n          }]);\n          transport.once(\"packet\", function (msg) {\n            if (failed) return;\n\n            if (\"pong\" === msg.type && \"probe\" === msg.data) {\n              _this4.upgrading = true;\n\n              _this4.emitReserved(\"upgrading\", transport);\n\n              if (!transport) return;\n              Socket.priorWebsocketSuccess = \"websocket\" === transport.name;\n\n              _this4.transport.pause(function () {\n                if (failed) return;\n                if (\"closed\" === _this4.readyState) return;\n                cleanup();\n\n                _this4.setTransport(transport);\n\n                transport.send([{\n                  type: \"upgrade\"\n                }]);\n\n                _this4.emitReserved(\"upgrade\", transport);\n\n                transport = null;\n                _this4.upgrading = false;\n\n                _this4.flush();\n              });\n            } else {\n              var err = new Error(\"probe error\"); // @ts-ignore\n\n              err.transport = transport.name;\n\n              _this4.emitReserved(\"upgradeError\", err);\n            }\n          });\n        };\n\n        function freezeTransport() {\n          if (failed) return; // Any callback called by transport should be ignored since now\n\n          failed = true;\n          cleanup();\n          transport.close();\n          transport = null;\n        } // Handle any error that happens while probing\n\n\n        var onerror = function onerror(err) {\n          var error = new Error(\"probe error: \" + err); // @ts-ignore\n\n          error.transport = transport.name;\n          freezeTransport();\n\n          _this4.emitReserved(\"upgradeError\", error);\n        };\n\n        function onTransportClose() {\n          onerror(\"transport closed\");\n        } // When the socket is closed while we're probing\n\n\n        function onclose() {\n          onerror(\"socket closed\");\n        } // When the socket is upgraded while we're probing\n\n\n        function onupgrade(to) {\n          if (transport && to.name !== transport.name) {\n            freezeTransport();\n          }\n        } // Remove all listeners on the transport and on self\n\n\n        var cleanup = function cleanup() {\n          transport.removeListener(\"open\", onTransportOpen);\n          transport.removeListener(\"error\", onerror);\n          transport.removeListener(\"close\", onTransportClose);\n\n          _this4.off(\"close\", onclose);\n\n          _this4.off(\"upgrading\", onupgrade);\n        };\n\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        transport.open();\n      }\n      /**\n       * Called when connection is deemed open.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"onOpen\",\n      value: function onOpen() {\n        this.readyState = \"open\";\n        Socket.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush(); // we check for `readyState` in case an `open`\n        // listener already closed the socket\n\n        if (\"open\" === this.readyState && this.opts.upgrade && this.transport.pause) {\n          var i = 0;\n          var l = this.upgrades.length;\n\n          for (; i < l; i++) {\n            this.probe(this.upgrades[i]);\n          }\n        }\n      }\n      /**\n       * Handles a packet.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"onPacket\",\n      value: function onPacket(packet) {\n        if (\"opening\" === this.readyState || \"open\" === this.readyState || \"closing\" === this.readyState) {\n          this.emitReserved(\"packet\", packet); // Socket is live - any packet counts\n\n          this.emitReserved(\"heartbeat\");\n\n          switch (packet.type) {\n            case \"open\":\n              this.onHandshake(JSON.parse(packet.data));\n              break;\n\n            case \"ping\":\n              this.resetPingTimeout();\n              this.sendPacket(\"pong\");\n              this.emitReserved(\"ping\");\n              this.emitReserved(\"pong\");\n              break;\n\n            case \"error\":\n              var err = new Error(\"server error\"); // @ts-ignore\n\n              err.code = packet.data;\n              this.onError(err);\n              break;\n\n            case \"message\":\n              this.emitReserved(\"data\", packet.data);\n              this.emitReserved(\"message\", packet.data);\n              break;\n          }\n        }\n      }\n      /**\n       * Called upon handshake completion.\n       *\n       * @param {Object} data - handshake obj\n       * @api private\n       */\n\n    }, {\n      key: \"onHandshake\",\n      value: function onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this.upgrades = this.filterUpgrades(data.upgrades);\n        this.pingInterval = data.pingInterval;\n        this.pingTimeout = data.pingTimeout;\n        this.maxPayload = data.maxPayload;\n        this.onOpen(); // In case open handler closes socket\n\n        if (\"closed\" === this.readyState) return;\n        this.resetPingTimeout();\n      }\n      /**\n       * Sets and resets ping timeout timer based on server pings.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"resetPingTimeout\",\n      value: function resetPingTimeout() {\n        var _this5 = this;\n\n        this.clearTimeoutFn(this.pingTimeoutTimer);\n        this.pingTimeoutTimer = this.setTimeoutFn(function () {\n          _this5.onClose(\"ping timeout\");\n        }, this.pingInterval + this.pingTimeout);\n\n        if (this.opts.autoUnref) {\n          this.pingTimeoutTimer.unref();\n        }\n      }\n      /**\n       * Called on `drain` event\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"onDrain\",\n      value: function onDrain() {\n        this.writeBuffer.splice(0, this.prevBufferLen); // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n\n        this.prevBufferLen = 0;\n\n        if (0 === this.writeBuffer.length) {\n          this.emitReserved(\"drain\");\n        } else {\n          this.flush();\n        }\n      }\n      /**\n       * Flush write buffers.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"flush\",\n      value: function flush() {\n        if (\"closed\" !== this.readyState && this.transport.writable && !this.upgrading && this.writeBuffer.length) {\n          var packets = this.getWritablePackets();\n          this.transport.send(packets); // keep track of current length of writeBuffer\n          // splice writeBuffer and callbackBuffer on `drain`\n\n          this.prevBufferLen = packets.length;\n          this.emitReserved(\"flush\");\n        }\n      }\n      /**\n       * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n       * long-polling)\n       *\n       * @private\n       */\n\n    }, {\n      key: \"getWritablePackets\",\n      value: function getWritablePackets() {\n        var shouldCheckPayloadSize = this.maxPayload && this.transport.name === \"polling\" && this.writeBuffer.length > 1;\n\n        if (!shouldCheckPayloadSize) {\n          return this.writeBuffer;\n        }\n\n        var payloadSize = 1; // first packet type\n\n        for (var i = 0; i < this.writeBuffer.length; i++) {\n          var data = this.writeBuffer[i].data;\n\n          if (data) {\n            payloadSize += byteLength(data);\n          }\n\n          if (i > 0 && payloadSize > this.maxPayload) {\n            return this.writeBuffer.slice(0, i);\n          }\n\n          payloadSize += 2; // separator + packet type\n        }\n\n        return this.writeBuffer;\n      }\n      /**\n       * Sends a message.\n       *\n       * @param {String} message.\n       * @param {Function} callback function.\n       * @param {Object} options.\n       * @return {Socket} for chaining.\n       * @api public\n       */\n\n    }, {\n      key: \"write\",\n      value: function write(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n      }\n    }, {\n      key: \"send\",\n      value: function send(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n      }\n      /**\n       * Sends a packet.\n       *\n       * @param {String} packet type.\n       * @param {String} data.\n       * @param {Object} options.\n       * @param {Function} callback function.\n       * @api private\n       */\n\n    }, {\n      key: \"sendPacket\",\n      value: function sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n          fn = data;\n          data = undefined;\n        }\n\n        if (\"function\" === typeof options) {\n          fn = options;\n          options = null;\n        }\n\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n          return;\n        }\n\n        options = options || {};\n        options.compress = false !== options.compress;\n        var packet = {\n          type: type,\n          data: data,\n          options: options\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn) this.once(\"flush\", fn);\n        this.flush();\n      }\n      /**\n       * Closes the connection.\n       *\n       * @api public\n       */\n\n    }, {\n      key: \"close\",\n      value: function close() {\n        var _this6 = this;\n\n        var close = function close() {\n          _this6.onClose(\"forced close\");\n\n          _this6.transport.close();\n        };\n\n        var cleanupAndClose = function cleanupAndClose() {\n          _this6.off(\"upgrade\", cleanupAndClose);\n\n          _this6.off(\"upgradeError\", cleanupAndClose);\n\n          close();\n        };\n\n        var waitForUpgrade = function waitForUpgrade() {\n          // wait for upgrade to finish since we can't send packets while pausing a transport\n          _this6.once(\"upgrade\", cleanupAndClose);\n\n          _this6.once(\"upgradeError\", cleanupAndClose);\n        };\n\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n          this.readyState = \"closing\";\n\n          if (this.writeBuffer.length) {\n            this.once(\"drain\", function () {\n              if (_this6.upgrading) {\n                waitForUpgrade();\n              } else {\n                close();\n              }\n            });\n          } else if (this.upgrading) {\n            waitForUpgrade();\n          } else {\n            close();\n          }\n        }\n\n        return this;\n      }\n      /**\n       * Called upon transport error\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"onError\",\n      value: function onError(err) {\n        Socket.priorWebsocketSuccess = false;\n        this.emitReserved(\"error\", err);\n        this.onClose(\"transport error\", err);\n      }\n      /**\n       * Called upon transport close.\n       *\n       * @api private\n       */\n\n    }, {\n      key: \"onClose\",\n      value: function onClose(reason, description) {\n        if (\"opening\" === this.readyState || \"open\" === this.readyState || \"closing\" === this.readyState) {\n          // clear timers\n          this.clearTimeoutFn(this.pingTimeoutTimer); // stop event from firing again for transport\n\n          this.transport.removeAllListeners(\"close\"); // ensure transport won't stay open\n\n          this.transport.close(); // ignore further transport communication\n\n          this.transport.removeAllListeners();\n\n          if (typeof removeEventListener === \"function\") {\n            removeEventListener(\"beforeunload\", this.beforeunloadEventListener, false);\n            removeEventListener(\"offline\", this.offlineEventListener, false);\n          } // set ready state\n\n\n          this.readyState = \"closed\"; // clear session id\n\n          this.id = null; // emit close event\n\n          this.emitReserved(\"close\", reason, description); // clean buffers after, so users can still\n          // grab the buffers on `close` event\n\n          this.writeBuffer = [];\n          this.prevBufferLen = 0;\n        }\n      }\n      /**\n       * Filters upgrades, returning only those matching client transports.\n       *\n       * @param {Array} server upgrades\n       * @api private\n       *\n       */\n\n    }, {\n      key: \"filterUpgrades\",\n      value: function filterUpgrades(upgrades) {\n        var filteredUpgrades = [];\n        var i = 0;\n        var j = upgrades.length;\n\n        for (; i < j; i++) {\n          if (~this.transports.indexOf(upgrades[i])) filteredUpgrades.push(upgrades[i]);\n        }\n\n        return filteredUpgrades;\n      }\n    }]);\n\n    return Socket;\n  }(Emitter);\n  Socket$1.protocol = protocol$1;\n\n  Socket$1.protocol;\n\n  /**\n   * URL parser.\n   *\n   * @param uri - url\n   * @param path - the request path of the connection\n   * @param loc - An object meant to mimic window.location.\n   *        Defaults to window.location.\n   * @public\n   */\n\n  function url(uri) {\n    var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    var loc = arguments.length > 2 ? arguments[2] : undefined;\n    var obj = uri; // default to window.location\n\n    loc = loc || typeof location !== \"undefined\" && location;\n    if (null == uri) uri = loc.protocol + \"//\" + loc.host; // relative path support\n\n    if (typeof uri === \"string\") {\n      if (\"/\" === uri.charAt(0)) {\n        if (\"/\" === uri.charAt(1)) {\n          uri = loc.protocol + uri;\n        } else {\n          uri = loc.host + uri;\n        }\n      }\n\n      if (!/^(https?|wss?):\\/\\//.test(uri)) {\n        if (\"undefined\" !== typeof loc) {\n          uri = loc.protocol + \"//\" + uri;\n        } else {\n          uri = \"https://\" + uri;\n        }\n      } // parse\n\n\n      obj = parse(uri);\n    } // make sure we treat `localhost:80` and `localhost` equally\n\n\n    if (!obj.port) {\n      if (/^(http|ws)$/.test(obj.protocol)) {\n        obj.port = \"80\";\n      } else if (/^(http|ws)s$/.test(obj.protocol)) {\n        obj.port = \"443\";\n      }\n    }\n\n    obj.path = obj.path || \"/\";\n    var ipv6 = obj.host.indexOf(\":\") !== -1;\n    var host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host; // define unique id\n\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path; // define href\n\n    obj.href = obj.protocol + \"://\" + host + (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n  }\n\n  var withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n\n  var isView = function isView(obj) {\n    return typeof ArrayBuffer.isView === \"function\" ? ArrayBuffer.isView(obj) : obj.buffer instanceof ArrayBuffer;\n  };\n\n  var toString = Object.prototype.toString;\n  var withNativeBlob = typeof Blob === \"function\" || typeof Blob !== \"undefined\" && toString.call(Blob) === \"[object BlobConstructor]\";\n  var withNativeFile = typeof File === \"function\" || typeof File !== \"undefined\" && toString.call(File) === \"[object FileConstructor]\";\n  /**\n   * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n   *\n   * @private\n   */\n\n  function isBinary(obj) {\n    return withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)) || withNativeBlob && obj instanceof Blob || withNativeFile && obj instanceof File;\n  }\n  function hasBinary(obj, toJSON) {\n    if (!obj || _typeof(obj) !== \"object\") {\n      return false;\n    }\n\n    if (Array.isArray(obj)) {\n      for (var i = 0, l = obj.length; i < l; i++) {\n        if (hasBinary(obj[i])) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n    if (isBinary(obj)) {\n      return true;\n    }\n\n    if (obj.toJSON && typeof obj.toJSON === \"function\" && arguments.length === 1) {\n      return hasBinary(obj.toJSON(), true);\n    }\n\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n   *\n   * @param {Object} packet - socket.io event packet\n   * @return {Object} with deconstructed packet and list of buffers\n   * @public\n   */\n\n  function deconstructPacket(packet) {\n    var buffers = [];\n    var packetData = packet.data;\n    var pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n\n    return {\n      packet: pack,\n      buffers: buffers\n    };\n  }\n\n  function _deconstructPacket(data, buffers) {\n    if (!data) return data;\n\n    if (isBinary(data)) {\n      var placeholder = {\n        _placeholder: true,\n        num: buffers.length\n      };\n      buffers.push(data);\n      return placeholder;\n    } else if (Array.isArray(data)) {\n      var newData = new Array(data.length);\n\n      for (var i = 0; i < data.length; i++) {\n        newData[i] = _deconstructPacket(data[i], buffers);\n      }\n\n      return newData;\n    } else if (_typeof(data) === \"object\" && !(data instanceof Date)) {\n      var _newData = {};\n\n      for (var key in data) {\n        if (Object.prototype.hasOwnProperty.call(data, key)) {\n          _newData[key] = _deconstructPacket(data[key], buffers);\n        }\n      }\n\n      return _newData;\n    }\n\n    return data;\n  }\n  /**\n   * Reconstructs a binary packet from its placeholder packet and buffers\n   *\n   * @param {Object} packet - event packet with placeholders\n   * @param {Array} buffers - binary buffers to put in placeholder positions\n   * @return {Object} reconstructed packet\n   * @public\n   */\n\n\n  function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    packet.attachments = undefined; // no longer useful\n\n    return packet;\n  }\n\n  function _reconstructPacket(data, buffers) {\n    if (!data) return data;\n\n    if (data && data._placeholder === true) {\n      var isIndexValid = typeof data.num === \"number\" && data.num >= 0 && data.num < buffers.length;\n\n      if (isIndexValid) {\n        return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n      } else {\n        throw new Error(\"illegal attachments\");\n      }\n    } else if (Array.isArray(data)) {\n      for (var i = 0; i < data.length; i++) {\n        data[i] = _reconstructPacket(data[i], buffers);\n      }\n    } else if (_typeof(data) === \"object\") {\n      for (var key in data) {\n        if (Object.prototype.hasOwnProperty.call(data, key)) {\n          data[key] = _reconstructPacket(data[key], buffers);\n        }\n      }\n    }\n\n    return data;\n  }\n\n  /**\n   * Protocol version.\n   *\n   * @public\n   */\n\n  var protocol = 5;\n  var PacketType;\n\n  (function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n  })(PacketType || (PacketType = {}));\n  /**\n   * A socket.io Encoder instance\n   */\n\n\n  var Encoder = /*#__PURE__*/function () {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    function Encoder(replacer) {\n      _classCallCheck(this, Encoder);\n\n      this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n\n\n    _createClass(Encoder, [{\n      key: \"encode\",\n      value: function encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n          if (hasBinary(obj)) {\n            obj.type = obj.type === PacketType.EVENT ? PacketType.BINARY_EVENT : PacketType.BINARY_ACK;\n            return this.encodeAsBinary(obj);\n          }\n        }\n\n        return [this.encodeAsString(obj)];\n      }\n      /**\n       * Encode packet as string.\n       */\n\n    }, {\n      key: \"encodeAsString\",\n      value: function encodeAsString(obj) {\n        // first is type\n        var str = \"\" + obj.type; // attachments if we have them\n\n        if (obj.type === PacketType.BINARY_EVENT || obj.type === PacketType.BINARY_ACK) {\n          str += obj.attachments + \"-\";\n        } // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n\n\n        if (obj.nsp && \"/\" !== obj.nsp) {\n          str += obj.nsp + \",\";\n        } // immediately followed by the id\n\n\n        if (null != obj.id) {\n          str += obj.id;\n        } // json data\n\n\n        if (null != obj.data) {\n          str += JSON.stringify(obj.data, this.replacer);\n        }\n\n        return str;\n      }\n      /**\n       * Encode packet as 'buffer sequence' by removing blobs, and\n       * deconstructing packet into object with placeholders and\n       * a list of buffers.\n       */\n\n    }, {\n      key: \"encodeAsBinary\",\n      value: function encodeAsBinary(obj) {\n        var deconstruction = deconstructPacket(obj);\n        var pack = this.encodeAsString(deconstruction.packet);\n        var buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n\n        return buffers; // write all the buffers\n      }\n    }]);\n\n    return Encoder;\n  }();\n  /**\n   * A socket.io Decoder instance\n   *\n   * @return {Object} decoder\n   */\n\n  var Decoder = /*#__PURE__*/function (_Emitter) {\n    _inherits(Decoder, _Emitter);\n\n    var _super = _createSuper(Decoder);\n\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    function Decoder(reviver) {\n      var _this;\n\n      _classCallCheck(this, Decoder);\n\n      _this = _super.call(this);\n      _this.reviver = reviver;\n      return _this;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n\n\n    _createClass(Decoder, [{\n      key: \"add\",\n      value: function add(obj) {\n        var packet;\n\n        if (typeof obj === \"string\") {\n          if (this.reconstructor) {\n            throw new Error(\"got plaintext data when reconstructing a packet\");\n          }\n\n          packet = this.decodeString(obj);\n\n          if (packet.type === PacketType.BINARY_EVENT || packet.type === PacketType.BINARY_ACK) {\n            // binary packet's json\n            this.reconstructor = new BinaryReconstructor(packet); // no attachments, labeled binary but no binary data to follow\n\n            if (packet.attachments === 0) {\n              _get(_getPrototypeOf(Decoder.prototype), \"emitReserved\", this).call(this, \"decoded\", packet);\n            }\n          } else {\n            // non-binary full packet\n            _get(_getPrototypeOf(Decoder.prototype), \"emitReserved\", this).call(this, \"decoded\", packet);\n          }\n        } else if (isBinary(obj) || obj.base64) {\n          // raw binary data\n          if (!this.reconstructor) {\n            throw new Error(\"got binary data when not reconstructing a packet\");\n          } else {\n            packet = this.reconstructor.takeBinaryData(obj);\n\n            if (packet) {\n              // received final buffer\n              this.reconstructor = null;\n\n              _get(_getPrototypeOf(Decoder.prototype), \"emitReserved\", this).call(this, \"decoded\", packet);\n            }\n          }\n        } else {\n          throw new Error(\"Unknown type: \" + obj);\n        }\n      }\n      /**\n       * Decode a packet String (JSON data)\n       *\n       * @param {String} str\n       * @return {Object} packet\n       */\n\n    }, {\n      key: \"decodeString\",\n      value: function decodeString(str) {\n        var i = 0; // look up type\n\n        var p = {\n          type: Number(str.charAt(0))\n        };\n\n        if (PacketType[p.type] === undefined) {\n          throw new Error(\"unknown packet type \" + p.type);\n        } // look up attachments if type binary\n\n\n        if (p.type === PacketType.BINARY_EVENT || p.type === PacketType.BINARY_ACK) {\n          var start = i + 1;\n\n          while (str.charAt(++i) !== \"-\" && i != str.length) {}\n\n          var buf = str.substring(start, i);\n\n          if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n            throw new Error(\"Illegal attachments\");\n          }\n\n          p.attachments = Number(buf);\n        } // look up namespace (if any)\n\n\n        if (\"/\" === str.charAt(i + 1)) {\n          var _start = i + 1;\n\n          while (++i) {\n            var c = str.charAt(i);\n            if (\",\" === c) break;\n            if (i === str.length) break;\n          }\n\n          p.nsp = str.substring(_start, i);\n        } else {\n          p.nsp = \"/\";\n        } // look up id\n\n\n        var next = str.charAt(i + 1);\n\n        if (\"\" !== next && Number(next) == next) {\n          var _start2 = i + 1;\n\n          while (++i) {\n            var _c = str.charAt(i);\n\n            if (null == _c || Number(_c) != _c) {\n              --i;\n              break;\n            }\n\n            if (i === str.length) break;\n          }\n\n          p.id = Number(str.substring(_start2, i + 1));\n        } // look up json data\n\n\n        if (str.charAt(++i)) {\n          var payload = this.tryParse(str.substr(i));\n\n          if (Decoder.isPayloadValid(p.type, payload)) {\n            p.data = payload;\n          } else {\n            throw new Error(\"invalid payload\");\n          }\n        }\n\n        return p;\n      }\n    }, {\n      key: \"tryParse\",\n      value: function tryParse(str) {\n        try {\n          return JSON.parse(str, this.reviver);\n        } catch (e) {\n          return false;\n        }\n      }\n    }, {\n      key: \"destroy\",\n      value:\n      /**\n       * Deallocates a parser's resources\n       */\n      function destroy() {\n        if (this.reconstructor) {\n          this.reconstructor.finishedReconstruction();\n        }\n      }\n    }], [{\n      key: \"isPayloadValid\",\n      value: function isPayloadValid(type, payload) {\n        switch (type) {\n          case PacketType.CONNECT:\n            return _typeof(payload) === \"object\";\n\n          case PacketType.DISCONNECT:\n            return payload === undefined;\n\n          case PacketType.CONNECT_ERROR:\n            return typeof payload === \"string\" || _typeof(payload) === \"object\";\n\n          case PacketType.EVENT:\n          case PacketType.BINARY_EVENT:\n            return Array.isArray(payload) && payload.length > 0;\n\n          case PacketType.ACK:\n          case PacketType.BINARY_ACK:\n            return Array.isArray(payload);\n        }\n      }\n    }]);\n\n    return Decoder;\n  }(Emitter);\n  /**\n   * A manager of a binary event's 'buffer sequence'. Should\n   * be constructed whenever a packet of type BINARY_EVENT is\n   * decoded.\n   *\n   * @param {Object} packet\n   * @return {BinaryReconstructor} initialized reconstructor\n   */\n\n  var BinaryReconstructor = /*#__PURE__*/function () {\n    function BinaryReconstructor(packet) {\n      _classCallCheck(this, BinaryReconstructor);\n\n      this.packet = packet;\n      this.buffers = [];\n      this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n\n\n    _createClass(BinaryReconstructor, [{\n      key: \"takeBinaryData\",\n      value: function takeBinaryData(binData) {\n        this.buffers.push(binData);\n\n        if (this.buffers.length === this.reconPack.attachments) {\n          // done with buffer list\n          var packet = reconstructPacket(this.reconPack, this.buffers);\n          this.finishedReconstruction();\n          return packet;\n        }\n\n        return null;\n      }\n      /**\n       * Cleans up binary packet reconstruction variables.\n       */\n\n    }, {\n      key: \"finishedReconstruction\",\n      value: function finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n      }\n    }]);\n\n    return BinaryReconstructor;\n  }();\n\n  var parser = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    protocol: protocol,\n    get PacketType () { return PacketType; },\n    Encoder: Encoder,\n    Decoder: Decoder\n  });\n\n  function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n      obj.off(ev, fn);\n    };\n  }\n\n  /**\n   * Internal events.\n   * These events can't be emitted by the user.\n   */\n\n  var RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1\n  });\n  /**\n   * A Socket is the fundamental class for interacting with the server.\n   *\n   * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n   *\n   * @example\n   * const socket = io();\n   *\n   * socket.on(\"connect\", () => {\n   *   console.log(\"connected\");\n   * });\n   *\n   * // send an event to the server\n   * socket.emit(\"foo\", \"bar\");\n   *\n   * socket.on(\"foobar\", () => {\n   *   // an event was received from the server\n   * });\n   *\n   * // upon disconnection\n   * socket.on(\"disconnect\", (reason) => {\n   *   console.log(`disconnected due to ${reason}`);\n   * });\n   */\n\n  var Socket = /*#__PURE__*/function (_Emitter) {\n    _inherits(Socket, _Emitter);\n\n    var _super = _createSuper(Socket);\n\n    /**\n     * `Socket` constructor.\n     */\n    function Socket(io, nsp, opts) {\n      var _this;\n\n      _classCallCheck(this, Socket);\n\n      _this = _super.call(this);\n      /**\n       * Whether the socket is currently connected to the server.\n       *\n       * @example\n       * const socket = io();\n       *\n       * socket.on(\"connect\", () => {\n       *   console.log(socket.connected); // true\n       * });\n       *\n       * socket.on(\"disconnect\", () => {\n       *   console.log(socket.connected); // false\n       * });\n       */\n\n      _this.connected = false;\n      /**\n       * Buffer for packets received before the CONNECT packet\n       */\n\n      _this.receiveBuffer = [];\n      /**\n       * Buffer for packets that will be sent once the socket is connected\n       */\n\n      _this.sendBuffer = [];\n      _this.ids = 0;\n      _this.acks = {};\n      _this.flags = {};\n      _this.io = io;\n      _this.nsp = nsp;\n\n      if (opts && opts.auth) {\n        _this.auth = opts.auth;\n      }\n\n      if (_this.io._autoConnect) _this.open();\n      return _this;\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n\n\n    _createClass(Socket, [{\n      key: \"disconnected\",\n      get: function get() {\n        return !this.connected;\n      }\n      /**\n       * Subscribe to open, close and packet events\n       *\n       * @private\n       */\n\n    }, {\n      key: \"subEvents\",\n      value: function subEvents() {\n        if (this.subs) return;\n        var io = this.io;\n        this.subs = [on(io, \"open\", this.onopen.bind(this)), on(io, \"packet\", this.onpacket.bind(this)), on(io, \"error\", this.onerror.bind(this)), on(io, \"close\", this.onclose.bind(this))];\n      }\n      /**\n       * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n       *\n       * @example\n       * const socket = io();\n       *\n       * console.log(socket.active); // true\n       *\n       * socket.on(\"disconnect\", (reason) => {\n       *   if (reason === \"io server disconnect\") {\n       *     // the disconnection was initiated by the server, you need to manually reconnect\n       *     console.log(socket.active); // false\n       *   }\n       *   // else the socket will automatically try to reconnect\n       *   console.log(socket.active); // true\n       * });\n       */\n\n    }, {\n      key: \"active\",\n      get: function get() {\n        return !!this.subs;\n      }\n      /**\n       * \"Opens\" the socket.\n       *\n       * @example\n       * const socket = io({\n       *   autoConnect: false\n       * });\n       *\n       * socket.connect();\n       */\n\n    }, {\n      key: \"connect\",\n      value: function connect() {\n        if (this.connected) return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"]) this.io.open(); // ensure open\n\n        if (\"open\" === this.io._readyState) this.onopen();\n        return this;\n      }\n      /**\n       * Alias for {@link connect()}.\n       */\n\n    }, {\n      key: \"open\",\n      value: function open() {\n        return this.connect();\n      }\n      /**\n       * Sends a `message` event.\n       *\n       * This method mimics the WebSocket.send() method.\n       *\n       * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n       *\n       * @example\n       * socket.send(\"hello\");\n       *\n       * // this is equivalent to\n       * socket.emit(\"message\", \"hello\");\n       *\n       * @return self\n       */\n\n    }, {\n      key: \"send\",\n      value: function send() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n      }\n      /**\n       * Override `emit`.\n       * If the event is in `events`, it's emitted normally.\n       *\n       * @example\n       * socket.emit(\"hello\", \"world\");\n       *\n       * // all serializable datastructures are supported (no need to call JSON.stringify)\n       * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n       *\n       * // with an acknowledgement from the server\n       * socket.emit(\"hello\", \"world\", (val) => {\n       *   // ...\n       * });\n       *\n       * @return self\n       */\n\n    }, {\n      key: \"emit\",\n      value: function emit(ev) {\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n          throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n\n        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n\n        args.unshift(ev);\n        var packet = {\n          type: PacketType.EVENT,\n          data: args\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false; // event ack callback\n\n        if (\"function\" === typeof args[args.length - 1]) {\n          var id = this.ids++;\n          var ack = args.pop();\n\n          this._registerAckCallback(id, ack);\n\n          packet.id = id;\n        }\n\n        var isTransportWritable = this.io.engine && this.io.engine.transport && this.io.engine.transport.writable;\n        var discardPacket = this.flags[\"volatile\"] && (!isTransportWritable || !this.connected);\n\n        if (discardPacket) ; else if (this.connected) {\n          this.notifyOutgoingListeners(packet);\n          this.packet(packet);\n        } else {\n          this.sendBuffer.push(packet);\n        }\n\n        this.flags = {};\n        return this;\n      }\n      /**\n       * @private\n       */\n\n    }, {\n      key: \"_registerAckCallback\",\n      value: function _registerAckCallback(id, ack) {\n        var _this2 = this;\n\n        var timeout = this.flags.timeout;\n\n        if (timeout === undefined) {\n          this.acks[id] = ack;\n          return;\n        } // @ts-ignore\n\n\n        var timer = this.io.setTimeoutFn(function () {\n          delete _this2.acks[id];\n\n          for (var i = 0; i < _this2.sendBuffer.length; i++) {\n            if (_this2.sendBuffer[i].id === id) {\n              _this2.sendBuffer.splice(i, 1);\n            }\n          }\n\n          ack.call(_this2, new Error(\"operation has timed out\"));\n        }, timeout);\n\n        this.acks[id] = function () {\n          // @ts-ignore\n          _this2.io.clearTimeoutFn(timer);\n\n          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n          }\n\n          ack.apply(_this2, [null].concat(args));\n        };\n      }\n      /**\n       * Sends a packet.\n       *\n       * @param packet\n       * @private\n       */\n\n    }, {\n      key: \"packet\",\n      value: function packet(_packet) {\n        _packet.nsp = this.nsp;\n\n        this.io._packet(_packet);\n      }\n      /**\n       * Called upon engine `open`.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"onopen\",\n      value: function onopen() {\n        var _this3 = this;\n\n        if (typeof this.auth == \"function\") {\n          this.auth(function (data) {\n            _this3.packet({\n              type: PacketType.CONNECT,\n              data: data\n            });\n          });\n        } else {\n          this.packet({\n            type: PacketType.CONNECT,\n            data: this.auth\n          });\n        }\n      }\n      /**\n       * Called upon engine or manager `error`.\n       *\n       * @param err\n       * @private\n       */\n\n    }, {\n      key: \"onerror\",\n      value: function onerror(err) {\n        if (!this.connected) {\n          this.emitReserved(\"connect_error\", err);\n        }\n      }\n      /**\n       * Called upon engine `close`.\n       *\n       * @param reason\n       * @param description\n       * @private\n       */\n\n    }, {\n      key: \"onclose\",\n      value: function onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n      }\n      /**\n       * Called with socket packet.\n       *\n       * @param packet\n       * @private\n       */\n\n    }, {\n      key: \"onpacket\",\n      value: function onpacket(packet) {\n        var sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace) return;\n\n        switch (packet.type) {\n          case PacketType.CONNECT:\n            if (packet.data && packet.data.sid) {\n              var id = packet.data.sid;\n              this.onconnect(id);\n            } else {\n              this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n            }\n\n            break;\n\n          case PacketType.EVENT:\n          case PacketType.BINARY_EVENT:\n            this.onevent(packet);\n            break;\n\n          case PacketType.ACK:\n          case PacketType.BINARY_ACK:\n            this.onack(packet);\n            break;\n\n          case PacketType.DISCONNECT:\n            this.ondisconnect();\n            break;\n\n          case PacketType.CONNECT_ERROR:\n            this.destroy();\n            var err = new Error(packet.data.message); // @ts-ignore\n\n            err.data = packet.data.data;\n            this.emitReserved(\"connect_error\", err);\n            break;\n        }\n      }\n      /**\n       * Called upon a server event.\n       *\n       * @param packet\n       * @private\n       */\n\n    }, {\n      key: \"onevent\",\n      value: function onevent(packet) {\n        var args = packet.data || [];\n\n        if (null != packet.id) {\n          args.push(this.ack(packet.id));\n        }\n\n        if (this.connected) {\n          this.emitEvent(args);\n        } else {\n          this.receiveBuffer.push(Object.freeze(args));\n        }\n      }\n    }, {\n      key: \"emitEvent\",\n      value: function emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n          var listeners = this._anyListeners.slice();\n\n          var _iterator = _createForOfIteratorHelper(listeners),\n              _step;\n\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var listener = _step.value;\n              listener.apply(this, args);\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n        }\n\n        _get(_getPrototypeOf(Socket.prototype), \"emit\", this).apply(this, args);\n      }\n      /**\n       * Produces an ack callback to emit with an event.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"ack\",\n      value: function ack(id) {\n        var self = this;\n        var sent = false;\n        return function () {\n          // prevent double callbacks\n          if (sent) return;\n          sent = true;\n\n          for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n            args[_key4] = arguments[_key4];\n          }\n\n          self.packet({\n            type: PacketType.ACK,\n            id: id,\n            data: args\n          });\n        };\n      }\n      /**\n       * Called upon a server acknowlegement.\n       *\n       * @param packet\n       * @private\n       */\n\n    }, {\n      key: \"onack\",\n      value: function onack(packet) {\n        var ack = this.acks[packet.id];\n\n        if (\"function\" === typeof ack) {\n          ack.apply(this, packet.data);\n          delete this.acks[packet.id];\n        }\n      }\n      /**\n       * Called upon server connect.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"onconnect\",\n      value: function onconnect(id) {\n        this.id = id;\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n      }\n      /**\n       * Emit buffered events (received and emitted).\n       *\n       * @private\n       */\n\n    }, {\n      key: \"emitBuffered\",\n      value: function emitBuffered() {\n        var _this4 = this;\n\n        this.receiveBuffer.forEach(function (args) {\n          return _this4.emitEvent(args);\n        });\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach(function (packet) {\n          _this4.notifyOutgoingListeners(packet);\n\n          _this4.packet(packet);\n        });\n        this.sendBuffer = [];\n      }\n      /**\n       * Called upon server disconnect.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"ondisconnect\",\n      value: function ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n      }\n      /**\n       * Called upon forced client/server side disconnections,\n       * this method ensures the manager stops tracking us and\n       * that reconnections don't get triggered for this.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        if (this.subs) {\n          // clean subscriptions to avoid reconnections\n          this.subs.forEach(function (subDestroy) {\n            return subDestroy();\n          });\n          this.subs = undefined;\n        }\n\n        this.io[\"_destroy\"](this);\n      }\n      /**\n       * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n       *\n       * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n       *\n       * @example\n       * const socket = io();\n       *\n       * socket.on(\"disconnect\", (reason) => {\n       *   // console.log(reason); prints \"io client disconnect\"\n       * });\n       *\n       * socket.disconnect();\n       *\n       * @return self\n       */\n\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        if (this.connected) {\n          this.packet({\n            type: PacketType.DISCONNECT\n          });\n        } // remove socket from pool\n\n\n        this.destroy();\n\n        if (this.connected) {\n          // fire events\n          this.onclose(\"io client disconnect\");\n        }\n\n        return this;\n      }\n      /**\n       * Alias for {@link disconnect()}.\n       *\n       * @return self\n       */\n\n    }, {\n      key: \"close\",\n      value: function close() {\n        return this.disconnect();\n      }\n      /**\n       * Sets the compress flag.\n       *\n       * @example\n       * socket.compress(false).emit(\"hello\");\n       *\n       * @param compress - if `true`, compresses the sending data\n       * @return self\n       */\n\n    }, {\n      key: \"compress\",\n      value: function compress(_compress) {\n        this.flags.compress = _compress;\n        return this;\n      }\n      /**\n       * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n       * ready to send messages.\n       *\n       * @example\n       * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n       *\n       * @returns self\n       */\n\n    }, {\n      key: \"volatile\",\n      get: function get() {\n        this.flags[\"volatile\"] = true;\n        return this;\n      }\n      /**\n       * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n       * given number of milliseconds have elapsed without an acknowledgement from the server:\n       *\n       * @example\n       * socket.timeout(5000).emit(\"my-event\", (err) => {\n       *   if (err) {\n       *     // the server did not acknowledge the event in the given delay\n       *   }\n       * });\n       *\n       * @returns self\n       */\n\n    }, {\n      key: \"timeout\",\n      value: function timeout(_timeout) {\n        this.flags.timeout = _timeout;\n        return this;\n      }\n      /**\n       * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n       * callback.\n       *\n       * @example\n       * socket.onAny((event, ...args) => {\n       *   console.log(`got ${event}`);\n       * });\n       *\n       * @param listener\n       */\n\n    }, {\n      key: \"onAny\",\n      value: function onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n\n        this._anyListeners.push(listener);\n\n        return this;\n      }\n      /**\n       * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n       * callback. The listener is added to the beginning of the listeners array.\n       *\n       * @example\n       * socket.prependAny((event, ...args) => {\n       *   console.log(`got event ${event}`);\n       * });\n       *\n       * @param listener\n       */\n\n    }, {\n      key: \"prependAny\",\n      value: function prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n\n        this._anyListeners.unshift(listener);\n\n        return this;\n      }\n      /**\n       * Removes the listener that will be fired when any event is emitted.\n       *\n       * @example\n       * const catchAllListener = (event, ...args) => {\n       *   console.log(`got event ${event}`);\n       * }\n       *\n       * socket.onAny(catchAllListener);\n       *\n       * // remove a specific listener\n       * socket.offAny(catchAllListener);\n       *\n       * // or remove all listeners\n       * socket.offAny();\n       *\n       * @param listener\n       */\n\n    }, {\n      key: \"offAny\",\n      value: function offAny(listener) {\n        if (!this._anyListeners) {\n          return this;\n        }\n\n        if (listener) {\n          var listeners = this._anyListeners;\n\n          for (var i = 0; i < listeners.length; i++) {\n            if (listener === listeners[i]) {\n              listeners.splice(i, 1);\n              return this;\n            }\n          }\n        } else {\n          this._anyListeners = [];\n        }\n\n        return this;\n      }\n      /**\n       * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n       * e.g. to remove listeners.\n       */\n\n    }, {\n      key: \"listenersAny\",\n      value: function listenersAny() {\n        return this._anyListeners || [];\n      }\n      /**\n       * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n       * callback.\n       *\n       * Note: acknowledgements sent to the server are not included.\n       *\n       * @example\n       * socket.onAnyOutgoing((event, ...args) => {\n       *   console.log(`sent event ${event}`);\n       * });\n       *\n       * @param listener\n       */\n\n    }, {\n      key: \"onAnyOutgoing\",\n      value: function onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n\n        this._anyOutgoingListeners.push(listener);\n\n        return this;\n      }\n      /**\n       * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n       * callback. The listener is added to the beginning of the listeners array.\n       *\n       * Note: acknowledgements sent to the server are not included.\n       *\n       * @example\n       * socket.prependAnyOutgoing((event, ...args) => {\n       *   console.log(`sent event ${event}`);\n       * });\n       *\n       * @param listener\n       */\n\n    }, {\n      key: \"prependAnyOutgoing\",\n      value: function prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n\n        this._anyOutgoingListeners.unshift(listener);\n\n        return this;\n      }\n      /**\n       * Removes the listener that will be fired when any event is emitted.\n       *\n       * @example\n       * const catchAllListener = (event, ...args) => {\n       *   console.log(`sent event ${event}`);\n       * }\n       *\n       * socket.onAnyOutgoing(catchAllListener);\n       *\n       * // remove a specific listener\n       * socket.offAnyOutgoing(catchAllListener);\n       *\n       * // or remove all listeners\n       * socket.offAnyOutgoing();\n       *\n       * @param [listener] - the catch-all listener (optional)\n       */\n\n    }, {\n      key: \"offAnyOutgoing\",\n      value: function offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n          return this;\n        }\n\n        if (listener) {\n          var listeners = this._anyOutgoingListeners;\n\n          for (var i = 0; i < listeners.length; i++) {\n            if (listener === listeners[i]) {\n              listeners.splice(i, 1);\n              return this;\n            }\n          }\n        } else {\n          this._anyOutgoingListeners = [];\n        }\n\n        return this;\n      }\n      /**\n       * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n       * e.g. to remove listeners.\n       */\n\n    }, {\n      key: \"listenersAnyOutgoing\",\n      value: function listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n      }\n      /**\n       * Notify the listeners for each packet sent\n       *\n       * @param packet\n       *\n       * @private\n       */\n\n    }, {\n      key: \"notifyOutgoingListeners\",\n      value: function notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n          var listeners = this._anyOutgoingListeners.slice();\n\n          var _iterator2 = _createForOfIteratorHelper(listeners),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var listener = _step2.value;\n              listener.apply(this, packet.data);\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        }\n      }\n    }]);\n\n    return Socket;\n  }(Emitter);\n\n  /**\n   * Initialize backoff timer with `opts`.\n   *\n   * - `min` initial timeout in milliseconds [100]\n   * - `max` max timeout [10000]\n   * - `jitter` [0]\n   * - `factor` [2]\n   *\n   * @param {Object} opts\n   * @api public\n   */\n  function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n  }\n  /**\n   * Return the backoff duration.\n   *\n   * @return {Number}\n   * @api public\n   */\n\n  Backoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n\n    if (this.jitter) {\n      var rand = Math.random();\n      var deviation = Math.floor(rand * this.jitter * ms);\n      ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n\n    return Math.min(ms, this.max) | 0;\n  };\n  /**\n   * Reset the number of attempts.\n   *\n   * @api public\n   */\n\n\n  Backoff.prototype.reset = function () {\n    this.attempts = 0;\n  };\n  /**\n   * Set the minimum duration\n   *\n   * @api public\n   */\n\n\n  Backoff.prototype.setMin = function (min) {\n    this.ms = min;\n  };\n  /**\n   * Set the maximum duration\n   *\n   * @api public\n   */\n\n\n  Backoff.prototype.setMax = function (max) {\n    this.max = max;\n  };\n  /**\n   * Set the jitter\n   *\n   * @api public\n   */\n\n\n  Backoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n  };\n\n  var Manager = /*#__PURE__*/function (_Emitter) {\n    _inherits(Manager, _Emitter);\n\n    var _super = _createSuper(Manager);\n\n    function Manager(uri, opts) {\n      var _this;\n\n      _classCallCheck(this, Manager);\n\n      var _a;\n\n      _this = _super.call(this);\n      _this.nsps = {};\n      _this.subs = [];\n\n      if (uri && \"object\" === _typeof(uri)) {\n        opts = uri;\n        uri = undefined;\n      }\n\n      opts = opts || {};\n      opts.path = opts.path || \"/socket.io\";\n      _this.opts = opts;\n      installTimerFunctions(_assertThisInitialized(_this), opts);\n\n      _this.reconnection(opts.reconnection !== false);\n\n      _this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n\n      _this.reconnectionDelay(opts.reconnectionDelay || 1000);\n\n      _this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n\n      _this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n\n      _this.backoff = new Backoff({\n        min: _this.reconnectionDelay(),\n        max: _this.reconnectionDelayMax(),\n        jitter: _this.randomizationFactor()\n      });\n\n      _this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n\n      _this._readyState = \"closed\";\n      _this.uri = uri;\n\n      var _parser = opts.parser || parser;\n\n      _this.encoder = new _parser.Encoder();\n      _this.decoder = new _parser.Decoder();\n      _this._autoConnect = opts.autoConnect !== false;\n      if (_this._autoConnect) _this.open();\n      return _this;\n    }\n\n    _createClass(Manager, [{\n      key: \"reconnection\",\n      value: function reconnection(v) {\n        if (!arguments.length) return this._reconnection;\n        this._reconnection = !!v;\n        return this;\n      }\n    }, {\n      key: \"reconnectionAttempts\",\n      value: function reconnectionAttempts(v) {\n        if (v === undefined) return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n      }\n    }, {\n      key: \"reconnectionDelay\",\n      value: function reconnectionDelay(v) {\n        var _a;\n\n        if (v === undefined) return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n      }\n    }, {\n      key: \"randomizationFactor\",\n      value: function randomizationFactor(v) {\n        var _a;\n\n        if (v === undefined) return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n      }\n    }, {\n      key: \"reconnectionDelayMax\",\n      value: function reconnectionDelayMax(v) {\n        var _a;\n\n        if (v === undefined) return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n      }\n    }, {\n      key: \"timeout\",\n      value: function timeout(v) {\n        if (!arguments.length) return this._timeout;\n        this._timeout = v;\n        return this;\n      }\n      /**\n       * Starts trying to reconnect if reconnection is enabled and we have not\n       * started reconnecting yet\n       *\n       * @private\n       */\n\n    }, {\n      key: \"maybeReconnectOnOpen\",\n      value: function maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting && this._reconnection && this.backoff.attempts === 0) {\n          // keeps reconnection from firing twice for the same reconnection loop\n          this.reconnect();\n        }\n      }\n      /**\n       * Sets the current transport `socket`.\n       *\n       * @param {Function} fn - optional, callback\n       * @return self\n       * @public\n       */\n\n    }, {\n      key: \"open\",\n      value: function open(fn) {\n        var _this2 = this;\n\n        if (~this._readyState.indexOf(\"open\")) return this;\n        this.engine = new Socket$1(this.uri, this.opts);\n        var socket = this.engine;\n        var self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false; // emit `open`\n\n        var openSubDestroy = on(socket, \"open\", function () {\n          self.onopen();\n          fn && fn();\n        }); // emit `error`\n\n        var errorSub = on(socket, \"error\", function (err) {\n          self.cleanup();\n          self._readyState = \"closed\";\n\n          _this2.emitReserved(\"error\", err);\n\n          if (fn) {\n            fn(err);\n          } else {\n            // Only do this if there is no fn to handle the error\n            self.maybeReconnectOnOpen();\n          }\n        });\n\n        if (false !== this._timeout) {\n          var timeout = this._timeout;\n\n          if (timeout === 0) {\n            openSubDestroy(); // prevents a race condition with the 'open' event\n          } // set timer\n\n\n          var timer = this.setTimeoutFn(function () {\n            openSubDestroy();\n            socket.close(); // @ts-ignore\n\n            socket.emit(\"error\", new Error(\"timeout\"));\n          }, timeout);\n\n          if (this.opts.autoUnref) {\n            timer.unref();\n          }\n\n          this.subs.push(function subDestroy() {\n            clearTimeout(timer);\n          });\n        }\n\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n      }\n      /**\n       * Alias for open()\n       *\n       * @return self\n       * @public\n       */\n\n    }, {\n      key: \"connect\",\n      value: function connect(fn) {\n        return this.open(fn);\n      }\n      /**\n       * Called upon transport open.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"onopen\",\n      value: function onopen() {\n        // clear old subs\n        this.cleanup(); // mark as open\n\n        this._readyState = \"open\";\n        this.emitReserved(\"open\"); // add new subs\n\n        var socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n      }\n      /**\n       * Called upon a ping.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"onping\",\n      value: function onping() {\n        this.emitReserved(\"ping\");\n      }\n      /**\n       * Called with data.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"ondata\",\n      value: function ondata(data) {\n        try {\n          this.decoder.add(data);\n        } catch (e) {\n          this.onclose(\"parse error\", e);\n        }\n      }\n      /**\n       * Called when parser fully decodes a packet.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"ondecoded\",\n      value: function ondecoded(packet) {\n        var _this3 = this;\n\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        nextTick(function () {\n          _this3.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n      }\n      /**\n       * Called upon socket error.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"onerror\",\n      value: function onerror(err) {\n        this.emitReserved(\"error\", err);\n      }\n      /**\n       * Creates a new socket for the given `nsp`.\n       *\n       * @return {Socket}\n       * @public\n       */\n\n    }, {\n      key: \"socket\",\n      value: function socket(nsp, opts) {\n        var socket = this.nsps[nsp];\n\n        if (!socket) {\n          socket = new Socket(this, nsp, opts);\n          this.nsps[nsp] = socket;\n        }\n\n        return socket;\n      }\n      /**\n       * Called upon a socket close.\n       *\n       * @param socket\n       * @private\n       */\n\n    }, {\n      key: \"_destroy\",\n      value: function _destroy(socket) {\n        var nsps = Object.keys(this.nsps);\n\n        for (var _i = 0, _nsps = nsps; _i < _nsps.length; _i++) {\n          var nsp = _nsps[_i];\n          var _socket = this.nsps[nsp];\n\n          if (_socket.active) {\n            return;\n          }\n        }\n\n        this._close();\n      }\n      /**\n       * Writes a packet.\n       *\n       * @param packet\n       * @private\n       */\n\n    }, {\n      key: \"_packet\",\n      value: function _packet(packet) {\n        var encodedPackets = this.encoder.encode(packet);\n\n        for (var i = 0; i < encodedPackets.length; i++) {\n          this.engine.write(encodedPackets[i], packet.options);\n        }\n      }\n      /**\n       * Clean up transport subscriptions and packet buffer.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"cleanup\",\n      value: function cleanup() {\n        this.subs.forEach(function (subDestroy) {\n          return subDestroy();\n        });\n        this.subs.length = 0;\n        this.decoder.destroy();\n      }\n      /**\n       * Close the current socket.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"_close\",\n      value: function _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n        if (this.engine) this.engine.close();\n      }\n      /**\n       * Alias for close()\n       *\n       * @private\n       */\n\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        return this._close();\n      }\n      /**\n       * Called upon engine close.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"onclose\",\n      value: function onclose(reason, description) {\n        this.cleanup();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n\n        if (this._reconnection && !this.skipReconnect) {\n          this.reconnect();\n        }\n      }\n      /**\n       * Attempt a reconnection.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"reconnect\",\n      value: function reconnect() {\n        var _this4 = this;\n\n        if (this._reconnecting || this.skipReconnect) return this;\n        var self = this;\n\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n          this.backoff.reset();\n          this.emitReserved(\"reconnect_failed\");\n          this._reconnecting = false;\n        } else {\n          var delay = this.backoff.duration();\n          this._reconnecting = true;\n          var timer = this.setTimeoutFn(function () {\n            if (self.skipReconnect) return;\n\n            _this4.emitReserved(\"reconnect_attempt\", self.backoff.attempts); // check again for the case socket closed in above events\n\n\n            if (self.skipReconnect) return;\n            self.open(function (err) {\n              if (err) {\n                self._reconnecting = false;\n                self.reconnect();\n\n                _this4.emitReserved(\"reconnect_error\", err);\n              } else {\n                self.onreconnect();\n              }\n            });\n          }, delay);\n\n          if (this.opts.autoUnref) {\n            timer.unref();\n          }\n\n          this.subs.push(function subDestroy() {\n            clearTimeout(timer);\n          });\n        }\n      }\n      /**\n       * Called upon successful reconnect.\n       *\n       * @private\n       */\n\n    }, {\n      key: \"onreconnect\",\n      value: function onreconnect() {\n        var attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n      }\n    }]);\n\n    return Manager;\n  }(Emitter);\n\n  /**\n   * Managers cache.\n   */\n\n  var cache = {};\n\n  function lookup(uri, opts) {\n    if (_typeof(uri) === \"object\") {\n      opts = uri;\n      uri = undefined;\n    }\n\n    opts = opts || {};\n    var parsed = url(uri, opts.path || \"/socket.io\");\n    var source = parsed.source;\n    var id = parsed.id;\n    var path = parsed.path;\n    var sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    var newConnection = opts.forceNew || opts[\"force new connection\"] || false === opts.multiplex || sameNamespace;\n    var io;\n\n    if (newConnection) {\n      io = new Manager(source, opts);\n    } else {\n      if (!cache[id]) {\n        cache[id] = new Manager(source, opts);\n      }\n\n      io = cache[id];\n    }\n\n    if (parsed.query && !opts.query) {\n      opts.query = parsed.queryKey;\n    }\n\n    return io.socket(parsed.path, opts);\n  } // so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n  // namespace (e.g. `io.connect(...)`), for backward compatibility\n\n\n  _extends(lookup, {\n    Manager: Manager,\n    Socket: Socket,\n    io: lookup,\n    connect: lookup\n  });\n\n  return lookup;\n\n}));\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA,CAAC,UAAUA,MAAV,EAAkBC,OAAlB,EAA2B;EAC1B,OAAOC,OAAP,KAAmB,QAAnB,IAA+B,OAAOC,MAAP,KAAkB,WAAjD,GAA+DA,MAAM,CAACD,OAAP,GAAiBD,OAAO,EAAvF,GACA,OAAOG,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACC,GAAvC,GAA6CD,MAAM,CAACH,OAAD,CAAnD,IACCD,MAAM,GAAG,OAAOM,UAAP,KAAsB,WAAtB,GAAoCA,UAApC,GAAiDN,MAAM,IAAIO,IAApE,EAA0EP,MAAM,CAACQ,EAAP,GAAYP,OAAO,EAD9F,CADA;AAGD,CAJD,EAIG,IAJH,EAIU,YAAY;EAAE;;EAEtB,SAASQ,OAAT,CAAiBC,GAAjB,EAAsB;IACpB;;IAEA,OAAOD,OAAO,GAAG,cAAc,OAAOE,MAArB,IAA+B,YAAY,OAAOA,MAAM,CAACC,QAAzD,GAAoE,UAAUF,GAAV,EAAe;MAClG,OAAO,OAAOA,GAAd;IACD,CAFgB,GAEb,UAAUA,GAAV,EAAe;MACjB,OAAOA,GAAG,IAAI,cAAc,OAAOC,MAA5B,IAAsCD,GAAG,CAACG,WAAJ,KAAoBF,MAA1D,IAAoED,GAAG,KAAKC,MAAM,CAACG,SAAnF,GAA+F,QAA/F,GAA0G,OAAOJ,GAAxH;IACD,CAJM,EAIJD,OAAO,CAACC,GAAD,CAJV;EAKD;;EAED,SAASK,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;IAC9C,IAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;MACtC,MAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;IACD;EACF;;EAED,SAASC,iBAAT,CAA2BC,MAA3B,EAAmCC,KAAnC,EAA0C;IACxC,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,KAAK,CAACE,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;MACrC,IAAIE,UAAU,GAAGH,KAAK,CAACC,CAAD,CAAtB;MACAE,UAAU,CAACC,UAAX,GAAwBD,UAAU,CAACC,UAAX,IAAyB,KAAjD;MACAD,UAAU,CAACE,YAAX,GAA0B,IAA1B;MACA,IAAI,WAAWF,UAAf,EAA2BA,UAAU,CAACG,QAAX,GAAsB,IAAtB;MAC3BC,MAAM,CAACC,cAAP,CAAsBT,MAAtB,EAA8BI,UAAU,CAACM,GAAzC,EAA8CN,UAA9C;IACD;EACF;;EAED,SAASO,YAAT,CAAsBd,WAAtB,EAAmCe,UAAnC,EAA+CC,WAA/C,EAA4D;IAC1D,IAAID,UAAJ,EAAgBb,iBAAiB,CAACF,WAAW,CAACH,SAAb,EAAwBkB,UAAxB,CAAjB;IAChB,IAAIC,WAAJ,EAAiBd,iBAAiB,CAACF,WAAD,EAAcgB,WAAd,CAAjB;IACjBL,MAAM,CAACC,cAAP,CAAsBZ,WAAtB,EAAmC,WAAnC,EAAgD;MAC9CU,QAAQ,EAAE;IADoC,CAAhD;IAGA,OAAOV,WAAP;EACD;;EAED,SAASiB,QAAT,GAAoB;IAClBA,QAAQ,GAAGN,MAAM,CAACO,MAAP,GAAgBP,MAAM,CAACO,MAAP,CAAcC,IAAd,EAAhB,GAAuC,UAAUhB,MAAV,EAAkB;MAClE,KAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGe,SAAS,CAACd,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;QACzC,IAAIgB,MAAM,GAAGD,SAAS,CAACf,CAAD,CAAtB;;QAEA,KAAK,IAAIQ,GAAT,IAAgBQ,MAAhB,EAAwB;UACtB,IAAIV,MAAM,CAACd,SAAP,CAAiByB,cAAjB,CAAgCC,IAAhC,CAAqCF,MAArC,EAA6CR,GAA7C,CAAJ,EAAuD;YACrDV,MAAM,CAACU,GAAD,CAAN,GAAcQ,MAAM,CAACR,GAAD,CAApB;UACD;QACF;MACF;;MAED,OAAOV,MAAP;IACD,CAZD;IAaA,OAAOc,QAAQ,CAACO,KAAT,CAAe,IAAf,EAAqBJ,SAArB,CAAP;EACD;;EAED,SAASK,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;IACvC,IAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,UAAU,KAAK,IAAvD,EAA6D;MAC3D,MAAM,IAAI1B,SAAJ,CAAc,oDAAd,CAAN;IACD;;IAEDyB,QAAQ,CAAC7B,SAAT,GAAqBc,MAAM,CAACiB,MAAP,CAAcD,UAAU,IAAIA,UAAU,CAAC9B,SAAvC,EAAkD;MACrED,WAAW,EAAE;QACXiC,KAAK,EAAEH,QADI;QAEXhB,QAAQ,EAAE,IAFC;QAGXD,YAAY,EAAE;MAHH;IADwD,CAAlD,CAArB;IAOAE,MAAM,CAACC,cAAP,CAAsBc,QAAtB,EAAgC,WAAhC,EAA6C;MAC3ChB,QAAQ,EAAE;IADiC,CAA7C;IAGA,IAAIiB,UAAJ,EAAgBG,eAAe,CAACJ,QAAD,EAAWC,UAAX,CAAf;EACjB;;EAED,SAASI,eAAT,CAAyBC,CAAzB,EAA4B;IAC1BD,eAAe,GAAGpB,MAAM,CAACsB,cAAP,GAAwBtB,MAAM,CAACuB,cAAP,CAAsBf,IAAtB,EAAxB,GAAuD,SAASY,eAAT,CAAyBC,CAAzB,EAA4B;MACnG,OAAOA,CAAC,CAACG,SAAF,IAAexB,MAAM,CAACuB,cAAP,CAAsBF,CAAtB,CAAtB;IACD,CAFD;IAGA,OAAOD,eAAe,CAACC,CAAD,CAAtB;EACD;;EAED,SAASF,eAAT,CAAyBE,CAAzB,EAA4BI,CAA5B,EAA+B;IAC7BN,eAAe,GAAGnB,MAAM,CAACsB,cAAP,GAAwBtB,MAAM,CAACsB,cAAP,CAAsBd,IAAtB,EAAxB,GAAuD,SAASW,eAAT,CAAyBE,CAAzB,EAA4BI,CAA5B,EAA+B;MACtGJ,CAAC,CAACG,SAAF,GAAcC,CAAd;MACA,OAAOJ,CAAP;IACD,CAHD;IAIA,OAAOF,eAAe,CAACE,CAAD,EAAII,CAAJ,CAAtB;EACD;;EAED,SAASC,yBAAT,GAAqC;IACnC,IAAI,OAAOC,OAAP,KAAmB,WAAnB,IAAkC,CAACA,OAAO,CAACC,SAA/C,EAA0D,OAAO,KAAP;IAC1D,IAAID,OAAO,CAACC,SAAR,CAAkBC,IAAtB,EAA4B,OAAO,KAAP;IAC5B,IAAI,OAAOC,KAAP,KAAiB,UAArB,EAAiC,OAAO,IAAP;;IAEjC,IAAI;MACFC,OAAO,CAAC7C,SAAR,CAAkB8C,OAAlB,CAA0BpB,IAA1B,CAA+Be,OAAO,CAACC,SAAR,CAAkBG,OAAlB,EAA2B,EAA3B,EAA+B,YAAY,CAAE,CAA7C,CAA/B;MACA,OAAO,IAAP;IACD,CAHD,CAGE,OAAOE,CAAP,EAAU;MACV,OAAO,KAAP;IACD;EACF;;EAED,SAASC,UAAT,CAAoBC,MAApB,EAA4BC,IAA5B,EAAkCC,KAAlC,EAAyC;IACvC,IAAIX,yBAAyB,EAA7B,EAAiC;MAC/BQ,UAAU,GAAGP,OAAO,CAACC,SAAR,CAAkBpB,IAAlB,EAAb;IACD,CAFD,MAEO;MACL0B,UAAU,GAAG,SAASA,UAAT,CAAoBC,MAApB,EAA4BC,IAA5B,EAAkCC,KAAlC,EAAyC;QACpD,IAAIC,CAAC,GAAG,CAAC,IAAD,CAAR;QACAA,CAAC,CAACC,IAAF,CAAO1B,KAAP,CAAayB,CAAb,EAAgBF,IAAhB;QACA,IAAI/C,WAAW,GAAGmD,QAAQ,CAAChC,IAAT,CAAcK,KAAd,CAAoBsB,MAApB,EAA4BG,CAA5B,CAAlB;QACA,IAAIlD,QAAQ,GAAG,IAAIC,WAAJ,EAAf;QACA,IAAIgD,KAAJ,EAAWlB,eAAe,CAAC/B,QAAD,EAAWiD,KAAK,CAACnD,SAAjB,CAAf;QACX,OAAOE,QAAP;MACD,CAPD;IAQD;;IAED,OAAO8C,UAAU,CAACrB,KAAX,CAAiB,IAAjB,EAAuBJ,SAAvB,CAAP;EACD;;EAED,SAASgC,iBAAT,CAA2BC,EAA3B,EAA+B;IAC7B,OAAOF,QAAQ,CAACG,QAAT,CAAkB/B,IAAlB,CAAuB8B,EAAvB,EAA2BE,OAA3B,CAAmC,eAAnC,MAAwD,CAAC,CAAhE;EACD;;EAED,SAASC,gBAAT,CAA0BR,KAA1B,EAAiC;IAC/B,IAAIS,MAAM,GAAG,OAAOC,GAAP,KAAe,UAAf,GAA4B,IAAIA,GAAJ,EAA5B,GAAwCC,SAArD;;IAEAH,gBAAgB,GAAG,SAASA,gBAAT,CAA0BR,KAA1B,EAAiC;MAClD,IAAIA,KAAK,KAAK,IAAV,IAAkB,CAACI,iBAAiB,CAACJ,KAAD,CAAxC,EAAiD,OAAOA,KAAP;;MAEjD,IAAI,OAAOA,KAAP,KAAiB,UAArB,EAAiC;QAC/B,MAAM,IAAI/C,SAAJ,CAAc,oDAAd,CAAN;MACD;;MAED,IAAI,OAAOwD,MAAP,KAAkB,WAAtB,EAAmC;QACjC,IAAIA,MAAM,CAACG,GAAP,CAAWZ,KAAX,CAAJ,EAAuB,OAAOS,MAAM,CAACI,GAAP,CAAWb,KAAX,CAAP;;QAEvBS,MAAM,CAACK,GAAP,CAAWd,KAAX,EAAkBe,OAAlB;MACD;;MAED,SAASA,OAAT,GAAmB;QACjB,OAAOlB,UAAU,CAACG,KAAD,EAAQ5B,SAAR,EAAmBW,eAAe,CAAC,IAAD,CAAf,CAAsBnC,WAAzC,CAAjB;MACD;;MAEDmE,OAAO,CAAClE,SAAR,GAAoBc,MAAM,CAACiB,MAAP,CAAcoB,KAAK,CAACnD,SAApB,EAA+B;QACjDD,WAAW,EAAE;UACXiC,KAAK,EAAEkC,OADI;UAEXvD,UAAU,EAAE,KAFD;UAGXE,QAAQ,EAAE,IAHC;UAIXD,YAAY,EAAE;QAJH;MADoC,CAA/B,CAApB;MAQA,OAAOqB,eAAe,CAACiC,OAAD,EAAUf,KAAV,CAAtB;IACD,CA1BD;;IA4BA,OAAOQ,gBAAgB,CAACR,KAAD,CAAvB;EACD;;EAED,SAASgB,sBAAT,CAAgC1E,IAAhC,EAAsC;IACpC,IAAIA,IAAI,KAAK,KAAK,CAAlB,EAAqB;MACnB,MAAM,IAAI2E,cAAJ,CAAmB,2DAAnB,CAAN;IACD;;IAED,OAAO3E,IAAP;EACD;;EAED,SAAS4E,0BAAT,CAAoC5E,IAApC,EAA0CiC,IAA1C,EAAgD;IAC9C,IAAIA,IAAI,KAAK,OAAOA,IAAP,KAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAAjD,CAAR,EAAsE;MACpE,OAAOA,IAAP;IACD,CAFD,MAEO,IAAIA,IAAI,KAAK,KAAK,CAAlB,EAAqB;MAC1B,MAAM,IAAItB,SAAJ,CAAc,0DAAd,CAAN;IACD;;IAED,OAAO+D,sBAAsB,CAAC1E,IAAD,CAA7B;EACD;;EAED,SAAS6E,YAAT,CAAsBC,OAAtB,EAA+B;IAC7B,IAAIC,yBAAyB,GAAGhC,yBAAyB,EAAzD;;IAEA,OAAO,SAASiC,oBAAT,GAAgC;MACrC,IAAIC,KAAK,GAAGxC,eAAe,CAACqC,OAAD,CAA3B;MAAA,IACII,MADJ;;MAGA,IAAIH,yBAAJ,EAA+B;QAC7B,IAAII,SAAS,GAAG1C,eAAe,CAAC,IAAD,CAAf,CAAsBnC,WAAtC;;QAEA4E,MAAM,GAAGlC,OAAO,CAACC,SAAR,CAAkBgC,KAAlB,EAAyBnD,SAAzB,EAAoCqD,SAApC,CAAT;MACD,CAJD,MAIO;QACLD,MAAM,GAAGD,KAAK,CAAC/C,KAAN,CAAY,IAAZ,EAAkBJ,SAAlB,CAAT;MACD;;MAED,OAAO8C,0BAA0B,CAAC,IAAD,EAAOM,MAAP,CAAjC;IACD,CAbD;EAcD;;EAED,SAASE,cAAT,CAAwBC,MAAxB,EAAgCC,QAAhC,EAA0C;IACxC,OAAO,CAACjE,MAAM,CAACd,SAAP,CAAiByB,cAAjB,CAAgCC,IAAhC,CAAqCoD,MAArC,EAA6CC,QAA7C,CAAR,EAAgE;MAC9DD,MAAM,GAAG5C,eAAe,CAAC4C,MAAD,CAAxB;MACA,IAAIA,MAAM,KAAK,IAAf,EAAqB;IACtB;;IAED,OAAOA,MAAP;EACD;;EAED,SAASE,IAAT,GAAgB;IACd,IAAI,OAAOvC,OAAP,KAAmB,WAAnB,IAAkCA,OAAO,CAACuB,GAA9C,EAAmD;MACjDgB,IAAI,GAAGvC,OAAO,CAACuB,GAAR,CAAY1C,IAAZ,EAAP;IACD,CAFD,MAEO;MACL0D,IAAI,GAAG,SAASA,IAAT,CAAc1E,MAAd,EAAsByE,QAAtB,EAAgCE,QAAhC,EAA0C;QAC/C,IAAIC,IAAI,GAAGL,cAAc,CAACvE,MAAD,EAASyE,QAAT,CAAzB;;QAEA,IAAI,CAACG,IAAL,EAAW;QACX,IAAIC,IAAI,GAAGrE,MAAM,CAACsE,wBAAP,CAAgCF,IAAhC,EAAsCH,QAAtC,CAAX;;QAEA,IAAII,IAAI,CAACnB,GAAT,EAAc;UACZ,OAAOmB,IAAI,CAACnB,GAAL,CAAStC,IAAT,CAAcH,SAAS,CAACd,MAAV,GAAmB,CAAnB,GAAuBH,MAAvB,GAAgC2E,QAA9C,CAAP;QACD;;QAED,OAAOE,IAAI,CAACnD,KAAZ;MACD,CAXD;IAYD;;IAED,OAAOgD,IAAI,CAACrD,KAAL,CAAW,IAAX,EAAiBJ,SAAjB,CAAP;EACD;;EAED,SAAS8D,2BAAT,CAAqClD,CAArC,EAAwCmD,MAAxC,EAAgD;IAC9C,IAAI,CAACnD,CAAL,EAAQ;IACR,IAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B,OAAOoD,iBAAiB,CAACpD,CAAD,EAAImD,MAAJ,CAAxB;IAC3B,IAAIE,CAAC,GAAG1E,MAAM,CAACd,SAAP,CAAiByD,QAAjB,CAA0B/B,IAA1B,CAA+BS,CAA/B,EAAkCsD,KAAlC,CAAwC,CAAxC,EAA2C,CAAC,CAA5C,CAAR;IACA,IAAID,CAAC,KAAK,QAAN,IAAkBrD,CAAC,CAACpC,WAAxB,EAAqCyF,CAAC,GAAGrD,CAAC,CAACpC,WAAF,CAAc2F,IAAlB;IACrC,IAAIF,CAAC,KAAK,KAAN,IAAeA,CAAC,KAAK,KAAzB,EAAgC,OAAOG,KAAK,CAACC,IAAN,CAAWzD,CAAX,CAAP;IAChC,IAAIqD,CAAC,KAAK,WAAN,IAAqB,2CAA2CK,IAA3C,CAAgDL,CAAhD,CAAzB,EAA6E,OAAOD,iBAAiB,CAACpD,CAAD,EAAImD,MAAJ,CAAxB;EAC9E;;EAED,SAASC,iBAAT,CAA2BO,GAA3B,EAAgCC,GAAhC,EAAqC;IACnC,IAAIA,GAAG,IAAI,IAAP,IAAeA,GAAG,GAAGD,GAAG,CAACrF,MAA7B,EAAqCsF,GAAG,GAAGD,GAAG,CAACrF,MAAV;;IAErC,KAAK,IAAID,CAAC,GAAG,CAAR,EAAWwF,IAAI,GAAG,IAAIL,KAAJ,CAAUI,GAAV,CAAvB,EAAuCvF,CAAC,GAAGuF,GAA3C,EAAgDvF,CAAC,EAAjD,EAAqDwF,IAAI,CAACxF,CAAD,CAAJ,GAAUsF,GAAG,CAACtF,CAAD,CAAb;;IAErD,OAAOwF,IAAP;EACD;;EAED,SAASC,0BAAT,CAAoC9D,CAApC,EAAuC+D,cAAvC,EAAuD;IACrD,IAAIC,EAAE,GAAG,OAAOtG,MAAP,KAAkB,WAAlB,IAAiCsC,CAAC,CAACtC,MAAM,CAACC,QAAR,CAAlC,IAAuDqC,CAAC,CAAC,YAAD,CAAjE;;IAEA,IAAI,CAACgE,EAAL,EAAS;MACP,IAAIR,KAAK,CAACS,OAAN,CAAcjE,CAAd,MAAqBgE,EAAE,GAAGd,2BAA2B,CAAClD,CAAD,CAArD,KAA6D+D,cAAc,IAAI/D,CAAlB,IAAuB,OAAOA,CAAC,CAAC1B,MAAT,KAAoB,QAA5G,EAAsH;QACpH,IAAI0F,EAAJ,EAAQhE,CAAC,GAAGgE,EAAJ;QACR,IAAI3F,CAAC,GAAG,CAAR;;QAEA,IAAI6F,CAAC,GAAG,YAAY,CAAE,CAAtB;;QAEA,OAAO;UACLC,CAAC,EAAED,CADE;UAELb,CAAC,EAAE,YAAY;YACb,IAAIhF,CAAC,IAAI2B,CAAC,CAAC1B,MAAX,EAAmB,OAAO;cACxB8F,IAAI,EAAE;YADkB,CAAP;YAGnB,OAAO;cACLA,IAAI,EAAE,KADD;cAELvE,KAAK,EAAEG,CAAC,CAAC3B,CAAC,EAAF;YAFH,CAAP;UAID,CAVI;UAWLuC,CAAC,EAAE,UAAUA,CAAV,EAAa;YACd,MAAMA,CAAN;UACD,CAbI;UAcLyD,CAAC,EAAEH;QAdE,CAAP;MAgBD;;MAED,MAAM,IAAIjG,SAAJ,CAAc,uIAAd,CAAN;IACD;;IAED,IAAIqG,gBAAgB,GAAG,IAAvB;IAAA,IACIC,MAAM,GAAG,KADb;IAAA,IAEIC,GAFJ;IAGA,OAAO;MACLL,CAAC,EAAE,YAAY;QACbH,EAAE,GAAGA,EAAE,CAACzE,IAAH,CAAQS,CAAR,CAAL;MACD,CAHI;MAILqD,CAAC,EAAE,YAAY;QACb,IAAIoB,IAAI,GAAGT,EAAE,CAACU,IAAH,EAAX;QACAJ,gBAAgB,GAAGG,IAAI,CAACL,IAAxB;QACA,OAAOK,IAAP;MACD,CARI;MASL7D,CAAC,EAAE,UAAUA,CAAV,EAAa;QACd2D,MAAM,GAAG,IAAT;QACAC,GAAG,GAAG5D,CAAN;MACD,CAZI;MAaLyD,CAAC,EAAE,YAAY;QACb,IAAI;UACF,IAAI,CAACC,gBAAD,IAAqBN,EAAE,CAACW,MAAH,IAAa,IAAtC,EAA4CX,EAAE,CAACW,MAAH;QAC7C,CAFD,SAEU;UACR,IAAIJ,MAAJ,EAAY,MAAMC,GAAN;QACb;MACF;IAnBI,CAAP;EAqBD;;EAED,IAAII,YAAY,GAAGjG,MAAM,CAACiB,MAAP,CAAc,IAAd,CAAnB,CAxSoB,CAwSoB;;EAExCgF,YAAY,CAAC,MAAD,CAAZ,GAAuB,GAAvB;EACAA,YAAY,CAAC,OAAD,CAAZ,GAAwB,GAAxB;EACAA,YAAY,CAAC,MAAD,CAAZ,GAAuB,GAAvB;EACAA,YAAY,CAAC,MAAD,CAAZ,GAAuB,GAAvB;EACAA,YAAY,CAAC,SAAD,CAAZ,GAA0B,GAA1B;EACAA,YAAY,CAAC,SAAD,CAAZ,GAA0B,GAA1B;EACAA,YAAY,CAAC,MAAD,CAAZ,GAAuB,GAAvB;EACA,IAAIC,oBAAoB,GAAGlG,MAAM,CAACiB,MAAP,CAAc,IAAd,CAA3B;EACAjB,MAAM,CAACmG,IAAP,CAAYF,YAAZ,EAA0BG,OAA1B,CAAkC,UAAUlG,GAAV,EAAe;IAC/CgG,oBAAoB,CAACD,YAAY,CAAC/F,GAAD,CAAb,CAApB,GAA0CA,GAA1C;EACD,CAFD;EAGA,IAAImG,YAAY,GAAG;IACjBC,IAAI,EAAE,OADW;IAEjBC,IAAI,EAAE;EAFW,CAAnB;EAKA,IAAIC,gBAAgB,GAAG,OAAOC,IAAP,KAAgB,UAAhB,IAA8B,OAAOA,IAAP,KAAgB,WAAhB,IAA+BzG,MAAM,CAACd,SAAP,CAAiByD,QAAjB,CAA0B/B,IAA1B,CAA+B6F,IAA/B,MAAyC,0BAA7H;EACA,IAAIC,uBAAuB,GAAG,OAAOC,WAAP,KAAuB,UAArD,CA3ToB,CA2T6C;;EAEjE,IAAIC,QAAQ,GAAG,SAASC,MAAT,CAAgB/H,GAAhB,EAAqB;IAClC,OAAO,OAAO6H,WAAW,CAACE,MAAnB,KAA8B,UAA9B,GAA2CF,WAAW,CAACE,MAAZ,CAAmB/H,GAAnB,CAA3C,GAAqEA,GAAG,IAAIA,GAAG,CAACgI,MAAJ,YAAsBH,WAAzG;EACD,CAFD;;EAIA,IAAII,YAAY,GAAG,SAASA,YAAT,CAAsBC,IAAtB,EAA4BC,cAA5B,EAA4CC,QAA5C,EAAsD;IACvE,IAAIZ,IAAI,GAAGU,IAAI,CAACV,IAAhB;IAAA,IACIC,IAAI,GAAGS,IAAI,CAACT,IADhB;;IAGA,IAAIC,gBAAgB,IAAID,IAAI,YAAYE,IAAxC,EAA8C;MAC5C,IAAIQ,cAAJ,EAAoB;QAClB,OAAOC,QAAQ,CAACX,IAAD,CAAf;MACD,CAFD,MAEO;QACL,OAAOY,kBAAkB,CAACZ,IAAD,EAAOW,QAAP,CAAzB;MACD;IACF,CAND,MAMO,IAAIR,uBAAuB,KAAKH,IAAI,YAAYI,WAAhB,IAA+BC,QAAQ,CAACL,IAAD,CAA5C,CAA3B,EAAgF;MACrF,IAAIU,cAAJ,EAAoB;QAClB,OAAOC,QAAQ,CAACX,IAAD,CAAf;MACD,CAFD,MAEO;QACL,OAAOY,kBAAkB,CAAC,IAAIV,IAAJ,CAAS,CAACF,IAAD,CAAT,CAAD,EAAmBW,QAAnB,CAAzB;MACD;IACF,CAhBsE,CAgBrE;;;IAGF,OAAOA,QAAQ,CAACjB,YAAY,CAACK,IAAD,CAAZ,IAAsBC,IAAI,IAAI,EAA9B,CAAD,CAAf;EACD,CApBD;;EAsBA,IAAIY,kBAAkB,GAAG,SAASA,kBAAT,CAA4BZ,IAA5B,EAAkCW,QAAlC,EAA4C;IACnE,IAAIE,UAAU,GAAG,IAAIC,UAAJ,EAAjB;;IAEAD,UAAU,CAACE,MAAX,GAAoB,YAAY;MAC9B,IAAIC,OAAO,GAAGH,UAAU,CAACvD,MAAX,CAAkB2D,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,CAAd;MACAN,QAAQ,CAAC,MAAMK,OAAP,CAAR;IACD,CAHD;;IAKA,OAAOH,UAAU,CAACK,aAAX,CAAyBlB,IAAzB,CAAP;EACD,CATD;;EAWA,IAAImB,KAAK,GAAG,kEAAZ,CAlWoB,CAkW4D;;EAEhF,IAAIC,QAAQ,GAAG,OAAOC,UAAP,KAAsB,WAAtB,GAAoC,EAApC,GAAyC,IAAIA,UAAJ,CAAe,GAAf,CAAxD;;EAEA,KAAK,IAAIC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGH,KAAK,CAAC/H,MAA9B,EAAsCkI,GAAG,EAAzC,EAA6C;IAC3CF,QAAQ,CAACD,KAAK,CAACI,UAAN,CAAiBD,GAAjB,CAAD,CAAR,GAAkCA,GAAlC;EACD;;EACD,IAAIE,QAAQ,GAAG,SAASC,MAAT,CAAgBC,MAAhB,EAAwB;IACrC,IAAIC,YAAY,GAAGD,MAAM,CAACtI,MAAP,GAAgB,IAAnC;IAAA,IACIsF,GAAG,GAAGgD,MAAM,CAACtI,MADjB;IAAA,IAEID,CAFJ;IAAA,IAGI+B,CAAC,GAAG,CAHR;IAAA,IAII0G,QAJJ;IAAA,IAKIC,QALJ;IAAA,IAMIC,QANJ;IAAA,IAOIC,QAPJ;;IASA,IAAIL,MAAM,CAACA,MAAM,CAACtI,MAAP,GAAgB,CAAjB,CAAN,KAA8B,GAAlC,EAAuC;MACrCuI,YAAY;;MAEZ,IAAID,MAAM,CAACA,MAAM,CAACtI,MAAP,GAAgB,CAAjB,CAAN,KAA8B,GAAlC,EAAuC;QACrCuI,YAAY;MACb;IACF;;IAED,IAAIK,WAAW,GAAG,IAAI5B,WAAJ,CAAgBuB,YAAhB,CAAlB;IAAA,IACIM,KAAK,GAAG,IAAIZ,UAAJ,CAAeW,WAAf,CADZ;;IAGA,KAAK7I,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGuF,GAAhB,EAAqBvF,CAAC,IAAI,CAA1B,EAA6B;MAC3ByI,QAAQ,GAAGR,QAAQ,CAACM,MAAM,CAACH,UAAP,CAAkBpI,CAAlB,CAAD,CAAnB;MACA0I,QAAQ,GAAGT,QAAQ,CAACM,MAAM,CAACH,UAAP,CAAkBpI,CAAC,GAAG,CAAtB,CAAD,CAAnB;MACA2I,QAAQ,GAAGV,QAAQ,CAACM,MAAM,CAACH,UAAP,CAAkBpI,CAAC,GAAG,CAAtB,CAAD,CAAnB;MACA4I,QAAQ,GAAGX,QAAQ,CAACM,MAAM,CAACH,UAAP,CAAkBpI,CAAC,GAAG,CAAtB,CAAD,CAAnB;MACA8I,KAAK,CAAC/G,CAAC,EAAF,CAAL,GAAa0G,QAAQ,IAAI,CAAZ,GAAgBC,QAAQ,IAAI,CAAzC;MACAI,KAAK,CAAC/G,CAAC,EAAF,CAAL,GAAa,CAAC2G,QAAQ,GAAG,EAAZ,KAAmB,CAAnB,GAAuBC,QAAQ,IAAI,CAAhD;MACAG,KAAK,CAAC/G,CAAC,EAAF,CAAL,GAAa,CAAC4G,QAAQ,GAAG,CAAZ,KAAkB,CAAlB,GAAsBC,QAAQ,GAAG,EAA9C;IACD;;IAED,OAAOC,WAAP;EACD,CAhCD;;EAkCA,IAAIE,uBAAuB,GAAG,OAAO9B,WAAP,KAAuB,UAArD;;EAEA,IAAI+B,YAAY,GAAG,SAASA,YAAT,CAAsBC,aAAtB,EAAqCC,UAArC,EAAiD;IAClE,IAAI,OAAOD,aAAP,KAAyB,QAA7B,EAAuC;MACrC,OAAO;QACLrC,IAAI,EAAE,SADD;QAELC,IAAI,EAAEsC,SAAS,CAACF,aAAD,EAAgBC,UAAhB;MAFV,CAAP;IAID;;IAED,IAAItC,IAAI,GAAGqC,aAAa,CAACG,MAAd,CAAqB,CAArB,CAAX;;IAEA,IAAIxC,IAAI,KAAK,GAAb,EAAkB;MAChB,OAAO;QACLA,IAAI,EAAE,SADD;QAELC,IAAI,EAAEwC,kBAAkB,CAACJ,aAAa,CAACK,SAAd,CAAwB,CAAxB,CAAD,EAA6BJ,UAA7B;MAFnB,CAAP;IAID;;IAED,IAAIK,UAAU,GAAG/C,oBAAoB,CAACI,IAAD,CAArC;;IAEA,IAAI,CAAC2C,UAAL,EAAiB;MACf,OAAO5C,YAAP;IACD;;IAED,OAAOsC,aAAa,CAAChJ,MAAd,GAAuB,CAAvB,GAA2B;MAChC2G,IAAI,EAAEJ,oBAAoB,CAACI,IAAD,CADM;MAEhCC,IAAI,EAAEoC,aAAa,CAACK,SAAd,CAAwB,CAAxB;IAF0B,CAA3B,GAGH;MACF1C,IAAI,EAAEJ,oBAAoB,CAACI,IAAD;IADxB,CAHJ;EAMD,CA7BD;;EA+BA,IAAIyC,kBAAkB,GAAG,SAASA,kBAAT,CAA4BxC,IAA5B,EAAkCqC,UAAlC,EAA8C;IACrE,IAAIH,uBAAJ,EAA6B;MAC3B,IAAIS,OAAO,GAAGnB,QAAQ,CAACxB,IAAD,CAAtB;MACA,OAAOsC,SAAS,CAACK,OAAD,EAAUN,UAAV,CAAhB;IACD,CAHD,MAGO;MACL,OAAO;QACLX,MAAM,EAAE,IADH;QAEL1B,IAAI,EAAEA;MAFD,CAAP,CADK,CAIF;IACJ;EACF,CAVD;;EAYA,IAAIsC,SAAS,GAAG,SAASA,SAAT,CAAmBtC,IAAnB,EAAyBqC,UAAzB,EAAqC;IACnD,QAAQA,UAAR;MACE,KAAK,MAAL;QACE,OAAOrC,IAAI,YAAYI,WAAhB,GAA8B,IAAIF,IAAJ,CAAS,CAACF,IAAD,CAAT,CAA9B,GAAiDA,IAAxD;;MAEF,KAAK,aAAL;MACA;QACE,OAAOA,IAAP;MACF;IAPF;EASD,CAVD;;EAYA,IAAI4C,SAAS,GAAGC,MAAM,CAACC,YAAP,CAAoB,EAApB,CAAhB,CApcoB,CAocqB;;EAEzC,IAAIC,aAAa,GAAG,SAASA,aAAT,CAAuBC,OAAvB,EAAgCrC,QAAhC,EAA0C;IAC5D;IACA,IAAIvH,MAAM,GAAG4J,OAAO,CAAC5J,MAArB;IACA,IAAI6J,cAAc,GAAG,IAAI3E,KAAJ,CAAUlF,MAAV,CAArB;IACA,IAAI8J,KAAK,GAAG,CAAZ;IACAF,OAAO,CAACnD,OAAR,CAAgB,UAAUsD,MAAV,EAAkBhK,CAAlB,EAAqB;MACnC;MACAqH,YAAY,CAAC2C,MAAD,EAAS,KAAT,EAAgB,UAAUf,aAAV,EAAyB;QACnDa,cAAc,CAAC9J,CAAD,CAAd,GAAoBiJ,aAApB;;QAEA,IAAI,EAAEc,KAAF,KAAY9J,MAAhB,EAAwB;UACtBuH,QAAQ,CAACsC,cAAc,CAACG,IAAf,CAAoBR,SAApB,CAAD,CAAR;QACD;MACF,CANW,CAAZ;IAOD,CATD;EAUD,CAfD;;EAiBA,IAAIS,aAAa,GAAG,SAASA,aAAT,CAAuBC,cAAvB,EAAuCjB,UAAvC,EAAmD;IACrE,IAAIY,cAAc,GAAGK,cAAc,CAACrC,KAAf,CAAqB2B,SAArB,CAArB;IACA,IAAII,OAAO,GAAG,EAAd;;IAEA,KAAK,IAAI7J,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8J,cAAc,CAAC7J,MAAnC,EAA2CD,CAAC,EAA5C,EAAgD;MAC9C,IAAIoK,aAAa,GAAGpB,YAAY,CAACc,cAAc,CAAC9J,CAAD,CAAf,EAAoBkJ,UAApB,CAAhC;MACAW,OAAO,CAAChH,IAAR,CAAauH,aAAb;;MAEA,IAAIA,aAAa,CAACxD,IAAd,KAAuB,OAA3B,EAAoC;QAClC;MACD;IACF;;IAED,OAAOiD,OAAP;EACD,CAdD;;EAgBA,IAAIQ,UAAU,GAAG,CAAjB;EAEA;AACF;AACA;AACA;AACA;;EACE,SAASC,OAAT,CAAiBlL,GAAjB,EAAsB;IACpB,IAAIA,GAAJ,EAAS,OAAOmL,KAAK,CAACnL,GAAD,CAAZ;EACV;EACD;AACF;AACA;AACA;AACA;AACA;AACA;;;EAEE,SAASmL,KAAT,CAAenL,GAAf,EAAoB;IAClB,KAAK,IAAIoB,GAAT,IAAgB8J,OAAO,CAAC9K,SAAxB,EAAmC;MACjCJ,GAAG,CAACoB,GAAD,CAAH,GAAW8J,OAAO,CAAC9K,SAAR,CAAkBgB,GAAlB,CAAX;IACD;;IAED,OAAOpB,GAAP;EACD;EACD;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;;EAGEkL,OAAO,CAAC9K,SAAR,CAAkBgL,EAAlB,GAAuBF,OAAO,CAAC9K,SAAR,CAAkBiL,gBAAlB,GAAqC,UAAUC,KAAV,EAAiB1H,EAAjB,EAAqB;IAC/E,KAAK2H,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC;IACA,CAAC,KAAKA,UAAL,CAAgB,MAAMD,KAAtB,IAA+B,KAAKC,UAAL,CAAgB,MAAMD,KAAtB,KAAgC,EAAhE,EAAoE7H,IAApE,CAAyEG,EAAzE;IACA,OAAO,IAAP;EACD,CAJD;EAKA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;EAGEsH,OAAO,CAAC9K,SAAR,CAAkBoL,IAAlB,GAAyB,UAAUF,KAAV,EAAiB1H,EAAjB,EAAqB;IAC5C,SAASwH,EAAT,GAAc;MACZ,KAAKK,GAAL,CAASH,KAAT,EAAgBF,EAAhB;MACAxH,EAAE,CAAC7B,KAAH,CAAS,IAAT,EAAeJ,SAAf;IACD;;IAEDyJ,EAAE,CAACxH,EAAH,GAAQA,EAAR;IACA,KAAKwH,EAAL,CAAQE,KAAR,EAAeF,EAAf;IACA,OAAO,IAAP;EACD,CATD;EAUA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;EAGEF,OAAO,CAAC9K,SAAR,CAAkBqL,GAAlB,GAAwBP,OAAO,CAAC9K,SAAR,CAAkBsL,cAAlB,GAAmCR,OAAO,CAAC9K,SAAR,CAAkBuL,kBAAlB,GAAuCT,OAAO,CAAC9K,SAAR,CAAkBwL,mBAAlB,GAAwC,UAAUN,KAAV,EAAiB1H,EAAjB,EAAqB;IAC7J,KAAK2H,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC,CAD6J,CACpH;;IAEzC,IAAI,KAAK5J,SAAS,CAACd,MAAnB,EAA2B;MACzB,KAAK0K,UAAL,GAAkB,EAAlB;MACA,OAAO,IAAP;IACD,CAN4J,CAM3J;;;IAGF,IAAIM,SAAS,GAAG,KAAKN,UAAL,CAAgB,MAAMD,KAAtB,CAAhB;IACA,IAAI,CAACO,SAAL,EAAgB,OAAO,IAAP,CAV6I,CAUhI;;IAE7B,IAAI,KAAKlK,SAAS,CAACd,MAAnB,EAA2B;MACzB,OAAO,KAAK0K,UAAL,CAAgB,MAAMD,KAAtB,CAAP;MACA,OAAO,IAAP;IACD,CAf4J,CAe3J;;;IAGF,IAAIQ,EAAJ;;IAEA,KAAK,IAAIlL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiL,SAAS,CAAChL,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;MACzCkL,EAAE,GAAGD,SAAS,CAACjL,CAAD,CAAd;;MAEA,IAAIkL,EAAE,KAAKlI,EAAP,IAAakI,EAAE,CAAClI,EAAH,KAAUA,EAA3B,EAA+B;QAC7BiI,SAAS,CAACE,MAAV,CAAiBnL,CAAjB,EAAoB,CAApB;QACA;MACD;IACF,CA3B4J,CA2B3J;IACF;;;IAGA,IAAIiL,SAAS,CAAChL,MAAV,KAAqB,CAAzB,EAA4B;MAC1B,OAAO,KAAK0K,UAAL,CAAgB,MAAMD,KAAtB,CAAP;IACD;;IAED,OAAO,IAAP;EACD,CApCD;EAqCA;AACF;AACA;AACA;AACA;AACA;AACA;;;EAGEJ,OAAO,CAAC9K,SAAR,CAAkB4L,IAAlB,GAAyB,UAAUV,KAAV,EAAiB;IACxC,KAAKC,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC;IACA,IAAIjI,IAAI,GAAG,IAAIyC,KAAJ,CAAUpE,SAAS,CAACd,MAAV,GAAmB,CAA7B,CAAX;IAAA,IACIgL,SAAS,GAAG,KAAKN,UAAL,CAAgB,MAAMD,KAAtB,CADhB;;IAGA,KAAK,IAAI1K,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGe,SAAS,CAACd,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;MACzC0C,IAAI,CAAC1C,CAAC,GAAG,CAAL,CAAJ,GAAce,SAAS,CAACf,CAAD,CAAvB;IACD;;IAED,IAAIiL,SAAJ,EAAe;MACbA,SAAS,GAAGA,SAAS,CAAChG,KAAV,CAAgB,CAAhB,CAAZ;;MAEA,KAAK,IAAIjF,CAAC,GAAG,CAAR,EAAWuF,GAAG,GAAG0F,SAAS,CAAChL,MAAhC,EAAwCD,CAAC,GAAGuF,GAA5C,EAAiD,EAAEvF,CAAnD,EAAsD;QACpDiL,SAAS,CAACjL,CAAD,CAAT,CAAamB,KAAb,CAAmB,IAAnB,EAAyBuB,IAAzB;MACD;IACF;;IAED,OAAO,IAAP;EACD,CAlBD,CA7lBoB,CA+mBjB;;;EAGH4H,OAAO,CAAC9K,SAAR,CAAkB6L,YAAlB,GAAiCf,OAAO,CAAC9K,SAAR,CAAkB4L,IAAnD;EACA;AACF;AACA;AACA;AACA;AACA;AACA;;EAEEd,OAAO,CAAC9K,SAAR,CAAkB8L,SAAlB,GAA8B,UAAUZ,KAAV,EAAiB;IAC7C,KAAKC,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC;IACA,OAAO,KAAKA,UAAL,CAAgB,MAAMD,KAAtB,KAAgC,EAAvC;EACD,CAHD;EAIA;AACF;AACA;AACA;AACA;AACA;AACA;;;EAGEJ,OAAO,CAAC9K,SAAR,CAAkB+L,YAAlB,GAAiC,UAAUb,KAAV,EAAiB;IAChD,OAAO,CAAC,CAAC,KAAKY,SAAL,CAAeZ,KAAf,EAAsBzK,MAA/B;EACD,CAFD;;EAIA,IAAIuL,cAAc,GAAG,YAAY;IAC/B,IAAI,OAAOvM,IAAP,KAAgB,WAApB,EAAiC;MAC/B,OAAOA,IAAP;IACD,CAFD,MAEO,IAAI,OAAOwM,MAAP,KAAkB,WAAtB,EAAmC;MACxC,OAAOA,MAAP;IACD,CAFM,MAEA;MACL,OAAO3I,QAAQ,CAAC,aAAD,CAAR,EAAP;IACD;EACF,CARoB,EAArB;;EAUA,SAAS4I,IAAT,CAActM,GAAd,EAAmB;IACjB,KAAK,IAAIuM,IAAI,GAAG5K,SAAS,CAACd,MAArB,EAA6B2L,IAAI,GAAG,IAAIzG,KAAJ,CAAUwG,IAAI,GAAG,CAAP,GAAWA,IAAI,GAAG,CAAlB,GAAsB,CAAhC,CAApC,EAAwEE,IAAI,GAAG,CAApF,EAAuFA,IAAI,GAAGF,IAA9F,EAAoGE,IAAI,EAAxG,EAA4G;MAC1GD,IAAI,CAACC,IAAI,GAAG,CAAR,CAAJ,GAAiB9K,SAAS,CAAC8K,IAAD,CAA1B;IACD;;IAED,OAAOD,IAAI,CAACE,MAAL,CAAY,UAAUC,GAAV,EAAeC,CAAf,EAAkB;MACnC,IAAI5M,GAAG,CAAC6B,cAAJ,CAAmB+K,CAAnB,CAAJ,EAA2B;QACzBD,GAAG,CAACC,CAAD,CAAH,GAAS5M,GAAG,CAAC4M,CAAD,CAAZ;MACD;;MAED,OAAOD,GAAP;IACD,CANM,EAMJ,EANI,CAAP;EAOD,CAlqBmB,CAkqBlB;;;EAEF,IAAIE,kBAAkB,GAAGC,UAAzB;EACA,IAAIC,oBAAoB,GAAGC,YAA3B;;EACA,SAASC,qBAAT,CAA+BjN,GAA/B,EAAoCkN,IAApC,EAA0C;IACxC,IAAIA,IAAI,CAACC,eAAT,EAA0B;MACxBnN,GAAG,CAACoN,YAAJ,GAAmBP,kBAAkB,CAACnL,IAAnB,CAAwB0K,cAAxB,CAAnB;MACApM,GAAG,CAACqN,cAAJ,GAAqBN,oBAAoB,CAACrL,IAArB,CAA0B0K,cAA1B,CAArB;IACD,CAHD,MAGO;MACLpM,GAAG,CAACoN,YAAJ,GAAmBN,UAAU,CAACpL,IAAX,CAAgB0K,cAAhB,CAAnB;MACApM,GAAG,CAACqN,cAAJ,GAAqBL,YAAY,CAACtL,IAAb,CAAkB0K,cAAlB,CAArB;IACD;EACF,CA9qBmB,CA8qBlB;;;EAEF,IAAIkB,eAAe,GAAG,IAAtB,CAhrBoB,CAgrBQ;;EAE5B,SAASC,UAAT,CAAoBvN,GAApB,EAAyB;IACvB,IAAI,OAAOA,GAAP,KAAe,QAAnB,EAA6B;MAC3B,OAAOwN,UAAU,CAACxN,GAAD,CAAjB;IACD,CAHsB,CAGrB;;;IAGF,OAAOyN,IAAI,CAACC,IAAL,CAAU,CAAC1N,GAAG,CAACuN,UAAJ,IAAkBvN,GAAG,CAAC2N,IAAvB,IAA+BL,eAAzC,CAAP;EACD;;EAED,SAASE,UAAT,CAAoBI,GAApB,EAAyB;IACvB,IAAIC,CAAC,GAAG,CAAR;IAAA,IACIhN,MAAM,GAAG,CADb;;IAGA,KAAK,IAAID,CAAC,GAAG,CAAR,EAAWkN,CAAC,GAAGF,GAAG,CAAC/M,MAAxB,EAAgCD,CAAC,GAAGkN,CAApC,EAAuClN,CAAC,EAAxC,EAA4C;MAC1CiN,CAAC,GAAGD,GAAG,CAAC5E,UAAJ,CAAepI,CAAf,CAAJ;;MAEA,IAAIiN,CAAC,GAAG,IAAR,EAAc;QACZhN,MAAM,IAAI,CAAV;MACD,CAFD,MAEO,IAAIgN,CAAC,GAAG,KAAR,EAAe;QACpBhN,MAAM,IAAI,CAAV;MACD,CAFM,MAEA,IAAIgN,CAAC,GAAG,MAAJ,IAAcA,CAAC,IAAI,MAAvB,EAA+B;QACpChN,MAAM,IAAI,CAAV;MACD,CAFM,MAEA;QACLD,CAAC;QACDC,MAAM,IAAI,CAAV;MACD;IACF;;IAED,OAAOA,MAAP;EACD;;EAED,IAAIkN,cAAc,GAAG,aAAa,UAAUC,MAAV,EAAkB;IAClDhM,SAAS,CAAC+L,cAAD,EAAiBC,MAAjB,CAAT;;IAEA,IAAIC,MAAM,GAAGvJ,YAAY,CAACqJ,cAAD,CAAzB;;IAEA,SAASA,cAAT,CAAwBG,MAAxB,EAAgCC,WAAhC,EAA6CC,OAA7C,EAAsD;MACpD,IAAIC,KAAJ;;MAEAhO,eAAe,CAAC,IAAD,EAAO0N,cAAP,CAAf;;MAEAM,KAAK,GAAGJ,MAAM,CAACnM,IAAP,CAAY,IAAZ,EAAkBoM,MAAlB,CAAR;MACAG,KAAK,CAACF,WAAN,GAAoBA,WAApB;MACAE,KAAK,CAACD,OAAN,GAAgBA,OAAhB;MACAC,KAAK,CAAC7G,IAAN,GAAa,gBAAb;MACA,OAAO6G,KAAP;IACD;;IAED,OAAOhN,YAAY,CAAC0M,cAAD,CAAnB;EACD,CAlBiC,EAkB/B,aAAahK,gBAAgB,CAACuK,KAAD,CAlBE,CAAlC;;EAoBA,IAAIC,SAAS,GAAG,aAAa,UAAUC,QAAV,EAAoB;IAC/CxM,SAAS,CAACuM,SAAD,EAAYC,QAAZ,CAAT;;IAEA,IAAIC,OAAO,GAAG/J,YAAY,CAAC6J,SAAD,CAA1B;IAEA;AACJ;AACA;AACA;AACA;AACA;;;IACI,SAASA,SAAT,CAAmBrB,IAAnB,EAAyB;MACvB,IAAIwB,MAAJ;;MAEArO,eAAe,CAAC,IAAD,EAAOkO,SAAP,CAAf;;MAEAG,MAAM,GAAGD,OAAO,CAAC3M,IAAR,CAAa,IAAb,CAAT;MACA4M,MAAM,CAACzN,QAAP,GAAkB,KAAlB;MACAgM,qBAAqB,CAAC1I,sBAAsB,CAACmK,MAAD,CAAvB,EAAiCxB,IAAjC,CAArB;MACAwB,MAAM,CAACxB,IAAP,GAAcA,IAAd;MACAwB,MAAM,CAACC,KAAP,GAAezB,IAAI,CAACyB,KAApB;MACAD,MAAM,CAACE,UAAP,GAAoB,EAApB;MACAF,MAAM,CAACG,MAAP,GAAgB3B,IAAI,CAAC2B,MAArB;MACA,OAAOH,MAAP;IACD;IACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;IAGIrN,YAAY,CAACkN,SAAD,EAAY,CAAC;MACvBnN,GAAG,EAAE,SADkB;MAEvBgB,KAAK,EAAE,SAAS0M,OAAT,CAAiBZ,MAAjB,EAAyBC,WAAzB,EAAsCC,OAAtC,EAA+C;QACpDhJ,IAAI,CAAC9C,eAAe,CAACiM,SAAS,CAACnO,SAAX,CAAhB,EAAuC,cAAvC,EAAuD,IAAvD,CAAJ,CAAiE0B,IAAjE,CAAsE,IAAtE,EAA4E,OAA5E,EAAqF,IAAIiM,cAAJ,CAAmBG,MAAnB,EAA2BC,WAA3B,EAAwCC,OAAxC,CAArF;;QAEA,OAAO,IAAP;MACD;MACD;AACN;AACA;AACA;AACA;;IAX6B,CAAD,EAarB;MACDhN,GAAG,EAAE,MADJ;MAEDgB,KAAK,EAAE,SAAS2M,IAAT,GAAgB;QACrB,IAAI,aAAa,KAAKH,UAAlB,IAAgC,OAAO,KAAKA,UAAhD,EAA4D;UAC1D,KAAKA,UAAL,GAAkB,SAAlB;UACA,KAAKI,MAAL;QACD;;QAED,OAAO,IAAP;MACD;MACD;AACN;AACA;AACA;AACA;;IAdO,CAbqB,EA6BrB;MACD5N,GAAG,EAAE,OADJ;MAEDgB,KAAK,EAAE,SAAS6M,KAAT,GAAiB;QACtB,IAAI,cAAc,KAAKL,UAAnB,IAAiC,WAAW,KAAKA,UAArD,EAAiE;UAC/D,KAAKM,OAAL;UACA,KAAKC,OAAL;QACD;;QAED,OAAO,IAAP;MACD;MACD;AACN;AACA;AACA;AACA;AACA;;IAfO,CA7BqB,EA8CrB;MACD/N,GAAG,EAAE,MADJ;MAEDgB,KAAK,EAAE,SAASgN,IAAT,CAAc3E,OAAd,EAAuB;QAC5B,IAAI,WAAW,KAAKmE,UAApB,EAAgC;UAC9B,KAAKS,KAAL,CAAW5E,OAAX;QACD;MACF;MACD;AACN;AACA;AACA;AACA;;IAXO,CA9CqB,EA2DrB;MACDrJ,GAAG,EAAE,QADJ;MAEDgB,KAAK,EAAE,SAASkN,MAAT,GAAkB;QACvB,KAAKV,UAAL,GAAkB,MAAlB;QACA,KAAK3N,QAAL,GAAgB,IAAhB;;QAEAmE,IAAI,CAAC9C,eAAe,CAACiM,SAAS,CAACnO,SAAX,CAAhB,EAAuC,cAAvC,EAAuD,IAAvD,CAAJ,CAAiE0B,IAAjE,CAAsE,IAAtE,EAA4E,MAA5E;MACD;MACD;AACN;AACA;AACA;AACA;AACA;;IAbO,CA3DqB,EA0ErB;MACDV,GAAG,EAAE,QADJ;MAEDgB,KAAK,EAAE,SAASmN,MAAT,CAAgB9H,IAAhB,EAAsB;QAC3B,IAAImD,MAAM,GAAGhB,YAAY,CAACnC,IAAD,EAAO,KAAKoH,MAAL,CAAY/E,UAAnB,CAAzB;QACA,KAAK0F,QAAL,CAAc5E,MAAd;MACD;MACD;AACN;AACA;AACA;AACA;;IAVO,CA1EqB,EAsFrB;MACDxJ,GAAG,EAAE,UADJ;MAEDgB,KAAK,EAAE,SAASoN,QAAT,CAAkB5E,MAAlB,EAA0B;QAC/BxF,IAAI,CAAC9C,eAAe,CAACiM,SAAS,CAACnO,SAAX,CAAhB,EAAuC,cAAvC,EAAuD,IAAvD,CAAJ,CAAiE0B,IAAjE,CAAsE,IAAtE,EAA4E,QAA5E,EAAsF8I,MAAtF;MACD;MACD;AACN;AACA;AACA;AACA;;IATO,CAtFqB,EAiGrB;MACDxJ,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAAS+M,OAAT,CAAiBM,OAAjB,EAA0B;QAC/B,KAAKb,UAAL,GAAkB,QAAlB;;QAEAxJ,IAAI,CAAC9C,eAAe,CAACiM,SAAS,CAACnO,SAAX,CAAhB,EAAuC,cAAvC,EAAuD,IAAvD,CAAJ,CAAiE0B,IAAjE,CAAsE,IAAtE,EAA4E,OAA5E,EAAqF2N,OAArF;MACD;IANA,CAjGqB,CAAZ,CAAZ;;IA0GA,OAAOlB,SAAP;EACD,CA/I4B,CA+I3BrD,OA/I2B,CAA7B,CAruBoB,CAs3BpB;;;EAEA,IAAIwE,QAAQ,GAAG,mEAAmEhH,KAAnE,CAAyE,EAAzE,CAAf;EAAA,IACI7H,MAAM,GAAG,EADb;EAAA,IAEI8O,GAAG,GAAG,EAFV;EAGA,IAAIC,IAAI,GAAG,CAAX;EAAA,IACIhP,CAAC,GAAG,CADR;EAAA,IAEIiP,IAFJ;EAGA;AACF;AACA;AACA;AACA;AACA;AACA;;EAEE,SAASC,QAAT,CAAkBC,GAAlB,EAAuB;IACrB,IAAIC,OAAO,GAAG,EAAd;;IAEA,GAAG;MACDA,OAAO,GAAGN,QAAQ,CAACK,GAAG,GAAGlP,MAAP,CAAR,GAAyBmP,OAAnC;MACAD,GAAG,GAAGtC,IAAI,CAACwC,KAAL,CAAWF,GAAG,GAAGlP,MAAjB,CAAN;IACD,CAHD,QAGSkP,GAAG,GAAG,CAHf;;IAKA,OAAOC,OAAP;EACD;EACD;AACF;AACA;AACA;AACA;AACA;;;EAEE,SAASE,KAAT,GAAiB;IACf,IAAIC,GAAG,GAAGL,QAAQ,CAAC,CAAC,IAAIM,IAAJ,EAAF,CAAlB;IACA,IAAID,GAAG,KAAKN,IAAZ,EAAkB,OAAOD,IAAI,GAAG,CAAP,EAAUC,IAAI,GAAGM,GAAxB;IAClB,OAAOA,GAAG,GAAG,GAAN,GAAYL,QAAQ,CAACF,IAAI,EAAL,CAA3B;EACD,CA35BmB,CA25BlB;EACF;EACA;;;EAEA,OAAOhP,CAAC,GAAGC,MAAX,EAAmBD,CAAC,EAApB,EAAwB;IACtB+O,GAAG,CAACD,QAAQ,CAAC9O,CAAD,CAAT,CAAH,GAAmBA,CAAnB;EACD,CAj6BmB,CAm6BpB;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;;;EACE,SAASyP,MAAT,CAAgBrQ,GAAhB,EAAqB;IACnB,IAAI4N,GAAG,GAAG,EAAV;;IAEA,KAAK,IAAIhN,CAAT,IAAcZ,GAAd,EAAmB;MACjB,IAAIA,GAAG,CAAC6B,cAAJ,CAAmBjB,CAAnB,CAAJ,EAA2B;QACzB,IAAIgN,GAAG,CAAC/M,MAAR,EAAgB+M,GAAG,IAAI,GAAP;QAChBA,GAAG,IAAI0C,kBAAkB,CAAC1P,CAAD,CAAlB,GAAwB,GAAxB,GAA8B0P,kBAAkB,CAACtQ,GAAG,CAACY,CAAD,CAAJ,CAAvD;MACD;IACF;;IAED,OAAOgN,GAAP;EACD;EACD;AACF;AACA;AACA;AACA;AACA;;;EAEE,SAAS1E,MAAT,CAAgBqH,EAAhB,EAAoB;IAClB,IAAIC,GAAG,GAAG,EAAV;IACA,IAAIC,KAAK,GAAGF,EAAE,CAAC7H,KAAH,CAAS,GAAT,CAAZ;;IAEA,KAAK,IAAI9H,CAAC,GAAG,CAAR,EAAWkN,CAAC,GAAG2C,KAAK,CAAC5P,MAA1B,EAAkCD,CAAC,GAAGkN,CAAtC,EAAyClN,CAAC,EAA1C,EAA8C;MAC5C,IAAI8P,IAAI,GAAGD,KAAK,CAAC7P,CAAD,CAAL,CAAS8H,KAAT,CAAe,GAAf,CAAX;MACA8H,GAAG,CAACG,kBAAkB,CAACD,IAAI,CAAC,CAAD,CAAL,CAAnB,CAAH,GAAmCC,kBAAkB,CAACD,IAAI,CAAC,CAAD,CAAL,CAArD;IACD;;IAED,OAAOF,GAAP;EACD,CAz8BmB,CA28BpB;;;EACA,IAAIpO,KAAK,GAAG,KAAZ;;EAEA,IAAI;IACFA,KAAK,GAAG,OAAOwO,cAAP,KAA0B,WAA1B,IAAyC,qBAAqB,IAAIA,cAAJ,EAAtE;EACD,CAFD,CAEE,OAAO7J,GAAP,EAAY,CAAC;IACb;EACD;;EAED,IAAI8J,OAAO,GAAGzO,KAAd,CAp9BoB,CAs9BpB;;EACA,SAAS0O,GAAT,CAAa5D,IAAb,EAAmB;IACjB,IAAI6D,OAAO,GAAG7D,IAAI,CAAC6D,OAAnB,CADiB,CACW;;IAE5B,IAAI;MACF,IAAI,gBAAgB,OAAOH,cAAvB,KAA0C,CAACG,OAAD,IAAYF,OAAtD,CAAJ,EAAoE;QAClE,OAAO,IAAID,cAAJ,EAAP;MACD;IACF,CAJD,CAIE,OAAOzN,CAAP,EAAU,CAAE;;IAEd,IAAI,CAAC4N,OAAL,EAAc;MACZ,IAAI;QACF,OAAO,IAAI3E,cAAc,CAAC,CAAC,QAAD,EAAW4E,MAAX,CAAkB,QAAlB,EAA4BnG,IAA5B,CAAiC,GAAjC,CAAD,CAAlB,CAA0D,mBAA1D,CAAP;MACD,CAFD,CAEE,OAAO1H,CAAP,EAAU,CAAE;IACf;EACF;;EAED,SAAS8N,KAAT,GAAiB,CAAE;;EAEnB,IAAIC,OAAO,GAAG,YAAY;IACxB,IAAIC,GAAG,GAAG,IAAIL,GAAJ,CAAQ;MAChBC,OAAO,EAAE;IADO,CAAR,CAAV;IAGA,OAAO,QAAQI,GAAG,CAACC,YAAnB;EACD,CALa,EAAd;;EAOA,IAAIC,OAAO,GAAG,aAAa,UAAUC,UAAV,EAAsB;IAC/CtP,SAAS,CAACqP,OAAD,EAAUC,UAAV,CAAT;;IAEA,IAAIrD,MAAM,GAAGvJ,YAAY,CAAC2M,OAAD,CAAzB;IAEA;AACJ;AACA;AACA;AACA;AACA;;;IACI,SAASA,OAAT,CAAiBnE,IAAjB,EAAuB;MACrB,IAAImB,KAAJ;;MAEAhO,eAAe,CAAC,IAAD,EAAOgR,OAAP,CAAf;;MAEAhD,KAAK,GAAGJ,MAAM,CAACnM,IAAP,CAAY,IAAZ,EAAkBoL,IAAlB,CAAR;MACAmB,KAAK,CAACkD,OAAN,GAAgB,KAAhB;;MAEA,IAAI,OAAOC,QAAP,KAAoB,WAAxB,EAAqC;QACnC,IAAIC,KAAK,GAAG,aAAaD,QAAQ,CAACE,QAAlC;QACA,IAAIC,IAAI,GAAGH,QAAQ,CAACG,IAApB,CAFmC,CAET;;QAE1B,IAAI,CAACA,IAAL,EAAW;UACTA,IAAI,GAAGF,KAAK,GAAG,KAAH,GAAW,IAAvB;QACD;;QAEDpD,KAAK,CAACuD,EAAN,GAAW,OAAOJ,QAAP,KAAoB,WAApB,IAAmCtE,IAAI,CAAC2E,QAAL,KAAkBL,QAAQ,CAACK,QAA9D,IAA0EF,IAAI,KAAKzE,IAAI,CAACyE,IAAnG;QACAtD,KAAK,CAACyD,EAAN,GAAW5E,IAAI,CAAC6E,MAAL,KAAgBN,KAA3B;MACD;MACD;AACN;AACA;;;MAGM,IAAIO,WAAW,GAAG9E,IAAI,IAAIA,IAAI,CAAC8E,WAA/B;MACA3D,KAAK,CAAClG,cAAN,GAAuB+I,OAAO,IAAI,CAACc,WAAnC;MACA,OAAO3D,KAAP;IACD;IACD;AACJ;AACA;;;IAGIhN,YAAY,CAACgQ,OAAD,EAAU,CAAC;MACrBjQ,GAAG,EAAE,MADgB;MAErBgD,GAAG,EAAE,SAASA,GAAT,GAAe;QAClB,OAAO,SAAP;MACD;MACD;AACN;AACA;AACA;AACA;AACA;;IAV2B,CAAD,EAYnB;MACDhD,GAAG,EAAE,QADJ;MAEDgB,KAAK,EAAE,SAAS4M,MAAT,GAAkB;QACvB,KAAKiD,IAAL;MACD;MACD;AACN;AACA;AACA;AACA;AACA;;IAVO,CAZmB,EAwBnB;MACD7Q,GAAG,EAAE,OADJ;MAEDgB,KAAK,EAAE,SAAS8P,KAAT,CAAeC,OAAf,EAAwB;QAC7B,IAAIzD,MAAM,GAAG,IAAb;;QAEA,KAAKE,UAAL,GAAkB,SAAlB;;QAEA,IAAIsD,KAAK,GAAG,SAASA,KAAT,GAAiB;UAC3BxD,MAAM,CAACE,UAAP,GAAoB,QAApB;UACAuD,OAAO;QACR,CAHD;;QAKA,IAAI,KAAKZ,OAAL,IAAgB,CAAC,KAAKtQ,QAA1B,EAAoC;UAClC,IAAImR,KAAK,GAAG,CAAZ;;UAEA,IAAI,KAAKb,OAAT,EAAkB;YAChBa,KAAK;YACL,KAAK5G,IAAL,CAAU,cAAV,EAA0B,YAAY;cACpC,EAAE4G,KAAF,IAAWF,KAAK,EAAhB;YACD,CAFD;UAGD;;UAED,IAAI,CAAC,KAAKjR,QAAV,EAAoB;YAClBmR,KAAK;YACL,KAAK5G,IAAL,CAAU,OAAV,EAAmB,YAAY;cAC7B,EAAE4G,KAAF,IAAWF,KAAK,EAAhB;YACD,CAFD;UAGD;QACF,CAhBD,MAgBO;UACLA,KAAK;QACN;MACF;MACD;AACN;AACA;AACA;AACA;;IApCO,CAxBmB,EA8DnB;MACD9Q,GAAG,EAAE,MADJ;MAEDgB,KAAK,EAAE,SAAS6P,IAAT,GAAgB;QACrB,KAAKV,OAAL,GAAe,IAAf;QACA,KAAKc,MAAL;QACA,KAAKpG,YAAL,CAAkB,MAAlB;MACD;MACD;AACN;AACA;AACA;AACA;;IAXO,CA9DmB,EA2EnB;MACD7K,GAAG,EAAE,QADJ;MAEDgB,KAAK,EAAE,SAASmN,MAAT,CAAgB9H,IAAhB,EAAsB;QAC3B,IAAI6K,MAAM,GAAG,IAAb;;QAEA,IAAIlK,QAAQ,GAAG,SAASA,QAAT,CAAkBwC,MAAlB,EAA0B;UACvC;UACA,IAAI,cAAc0H,MAAM,CAAC1D,UAArB,IAAmChE,MAAM,CAACpD,IAAP,KAAgB,MAAvD,EAA+D;YAC7D8K,MAAM,CAAChD,MAAP;UACD,CAJsC,CAIrC;;;UAGF,IAAI,YAAY1E,MAAM,CAACpD,IAAvB,EAA6B;YAC3B8K,MAAM,CAACnD,OAAP,CAAe;cACbhB,WAAW,EAAE;YADA,CAAf;;YAIA,OAAO,KAAP;UACD,CAbsC,CAarC;;;UAGFmE,MAAM,CAAC9C,QAAP,CAAgB5E,MAAhB;QACD,CAjBD,CAH2B,CAoBxB;;;QAGHE,aAAa,CAACrD,IAAD,EAAO,KAAKoH,MAAL,CAAY/E,UAAnB,CAAb,CAA4CxC,OAA5C,CAAoDc,QAApD,EAvB2B,CAuBoC;;QAE/D,IAAI,aAAa,KAAKwG,UAAtB,EAAkC;UAChC;UACA,KAAK2C,OAAL,GAAe,KAAf;UACA,KAAKtF,YAAL,CAAkB,cAAlB;;UAEA,IAAI,WAAW,KAAK2C,UAApB,EAAgC;YAC9B,KAAKqD,IAAL;UACD;QACF;MACF;MACD;AACN;AACA;AACA;AACA;;IAzCO,CA3EmB,EAsHnB;MACD7Q,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAAS8M,OAAT,GAAmB;QACxB,IAAIqD,MAAM,GAAG,IAAb;;QAEA,IAAItD,KAAK,GAAG,SAASA,KAAT,GAAiB;UAC3BsD,MAAM,CAAClD,KAAP,CAAa,CAAC;YACZ7H,IAAI,EAAE;UADM,CAAD,CAAb;QAGD,CAJD;;QAMA,IAAI,WAAW,KAAKoH,UAApB,EAAgC;UAC9BK,KAAK;QACN,CAFD,MAEO;UACL;UACA;UACA,KAAKzD,IAAL,CAAU,MAAV,EAAkByD,KAAlB;QACD;MACF;MACD;AACN;AACA;AACA;AACA;AACA;AACA;;IAzBO,CAtHmB,EAiJnB;MACD7N,GAAG,EAAE,OADJ;MAEDgB,KAAK,EAAE,SAASiN,KAAT,CAAe5E,OAAf,EAAwB;QAC7B,IAAI+H,MAAM,GAAG,IAAb;;QAEA,KAAKvR,QAAL,GAAgB,KAAhB;QACAuJ,aAAa,CAACC,OAAD,EAAU,UAAUhD,IAAV,EAAgB;UACrC+K,MAAM,CAACC,OAAP,CAAehL,IAAf,EAAqB,YAAY;YAC/B+K,MAAM,CAACvR,QAAP,GAAkB,IAAlB;;YAEAuR,MAAM,CAACvG,YAAP,CAAoB,OAApB;UACD,CAJD;QAKD,CANY,CAAb;MAOD;MACD;AACN;AACA;AACA;AACA;;IAlBO,CAjJmB,EAqKnB;MACD7K,GAAG,EAAE,KADJ;MAEDgB,KAAK,EAAE,SAASsQ,GAAT,GAAe;QACpB,IAAI/D,KAAK,GAAG,KAAKA,KAAL,IAAc,EAA1B;QACA,IAAIgE,MAAM,GAAG,KAAKzF,IAAL,CAAU6E,MAAV,GAAmB,OAAnB,GAA6B,MAA1C;QACA,IAAIJ,IAAI,GAAG,EAAX,CAHoB,CAGL;;QAEf,IAAI,UAAU,KAAKzE,IAAL,CAAU0F,iBAAxB,EAA2C;UACzCjE,KAAK,CAAC,KAAKzB,IAAL,CAAU2F,cAAX,CAAL,GAAkC3C,KAAK,EAAvC;QACD;;QAED,IAAI,CAAC,KAAK/H,cAAN,IAAwB,CAACwG,KAAK,CAACmE,GAAnC,EAAwC;UACtCnE,KAAK,CAACoE,GAAN,GAAY,CAAZ;QACD,CAXmB,CAWlB;;;QAGF,IAAI,KAAK7F,IAAL,CAAUyE,IAAV,KAAmB,YAAYgB,MAAZ,IAAsBK,MAAM,CAAC,KAAK9F,IAAL,CAAUyE,IAAX,CAAN,KAA2B,GAAjD,IAAwD,WAAWgB,MAAX,IAAqBK,MAAM,CAAC,KAAK9F,IAAL,CAAUyE,IAAX,CAAN,KAA2B,EAA3H,CAAJ,EAAoI;UAClIA,IAAI,GAAG,MAAM,KAAKzE,IAAL,CAAUyE,IAAvB;QACD;;QAED,IAAIsB,YAAY,GAAG5C,MAAM,CAAC1B,KAAD,CAAzB;QACA,IAAIuE,IAAI,GAAG,KAAKhG,IAAL,CAAU2E,QAAV,CAAmB/N,OAAnB,CAA2B,GAA3B,MAAoC,CAAC,CAAhD;QACA,OAAO6O,MAAM,GAAG,KAAT,IAAkBO,IAAI,GAAG,MAAM,KAAKhG,IAAL,CAAU2E,QAAhB,GAA2B,GAA9B,GAAoC,KAAK3E,IAAL,CAAU2E,QAApE,IAAgFF,IAAhF,GAAuF,KAAKzE,IAAL,CAAUiG,IAAjG,IAAyGF,YAAY,CAACpS,MAAb,GAAsB,MAAMoS,YAA5B,GAA2C,EAApJ,CAAP;MACD;MACD;AACN;AACA;AACA;AACA;AACA;;IA7BO,CArKmB,EAoMnB;MACD7R,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAASgR,OAAT,GAAmB;QACxB,IAAIlG,IAAI,GAAGvL,SAAS,CAACd,MAAV,GAAmB,CAAnB,IAAwBc,SAAS,CAAC,CAAD,CAAT,KAAiBuC,SAAzC,GAAqDvC,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAA/E;;QAEAH,QAAQ,CAAC0L,IAAD,EAAO;UACb0E,EAAE,EAAE,KAAKA,EADI;UAEbE,EAAE,EAAE,KAAKA;QAFI,CAAP,EAGL,KAAK5E,IAHA,CAAR;;QAKA,OAAO,IAAImG,OAAJ,CAAY,KAAKX,GAAL,EAAZ,EAAwBxF,IAAxB,CAAP;MACD;MACD;AACN;AACA;AACA;AACA;AACA;AACA;;IAlBO,CApMmB,EAwNnB;MACD9L,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAASqQ,OAAT,CAAiBhL,IAAjB,EAAuB7D,EAAvB,EAA2B;QAChC,IAAI0P,MAAM,GAAG,IAAb;;QAEA,IAAIC,GAAG,GAAG,KAAKH,OAAL,CAAa;UACrBI,MAAM,EAAE,MADa;UAErB/L,IAAI,EAAEA;QAFe,CAAb,CAAV;QAIA8L,GAAG,CAACnI,EAAJ,CAAO,SAAP,EAAkBxH,EAAlB;QACA2P,GAAG,CAACnI,EAAJ,CAAO,OAAP,EAAgB,UAAUqI,SAAV,EAAqBrF,OAArB,EAA8B;UAC5CkF,MAAM,CAACxE,OAAP,CAAe,gBAAf,EAAiC2E,SAAjC,EAA4CrF,OAA5C;QACD,CAFD;MAGD;MACD;AACN;AACA;AACA;AACA;;IAlBO,CAxNmB,EA4OnB;MACDhN,GAAG,EAAE,QADJ;MAEDgB,KAAK,EAAE,SAASiQ,MAAT,GAAkB;QACvB,IAAIqB,MAAM,GAAG,IAAb;;QAEA,IAAIH,GAAG,GAAG,KAAKH,OAAL,EAAV;QACAG,GAAG,CAACnI,EAAJ,CAAO,MAAP,EAAe,KAAKmE,MAAL,CAAY7N,IAAZ,CAAiB,IAAjB,CAAf;QACA6R,GAAG,CAACnI,EAAJ,CAAO,OAAP,EAAgB,UAAUqI,SAAV,EAAqBrF,OAArB,EAA8B;UAC5CsF,MAAM,CAAC5E,OAAP,CAAe,gBAAf,EAAiC2E,SAAjC,EAA4CrF,OAA5C;QACD,CAFD;QAGA,KAAKuF,OAAL,GAAeJ,GAAf;MACD;IAXA,CA5OmB,CAAV,CAAZ;;IA0PA,OAAOlC,OAAP;EACD,CAvS0B,CAuSzB9C,SAvSyB,CAA3B;;EAwSA,IAAI8E,OAAO,GAAG,aAAa,UAAU7E,QAAV,EAAoB;IAC7CxM,SAAS,CAACqR,OAAD,EAAU7E,QAAV,CAAT;;IAEA,IAAIC,OAAO,GAAG/J,YAAY,CAAC2O,OAAD,CAA1B;IAEA;AACJ;AACA;AACA;AACA;AACA;;;IACI,SAASA,OAAT,CAAiBX,GAAjB,EAAsBxF,IAAtB,EAA4B;MAC1B,IAAI0G,MAAJ;;MAEAvT,eAAe,CAAC,IAAD,EAAOgT,OAAP,CAAf;;MAEAO,MAAM,GAAGnF,OAAO,CAAC3M,IAAR,CAAa,IAAb,CAAT;MACAmL,qBAAqB,CAAC1I,sBAAsB,CAACqP,MAAD,CAAvB,EAAiC1G,IAAjC,CAArB;MACA0G,MAAM,CAAC1G,IAAP,GAAcA,IAAd;MACA0G,MAAM,CAACJ,MAAP,GAAgBtG,IAAI,CAACsG,MAAL,IAAe,KAA/B;MACAI,MAAM,CAAClB,GAAP,GAAaA,GAAb;MACAkB,MAAM,CAACC,KAAP,GAAe,UAAU3G,IAAI,CAAC2G,KAA9B;MACAD,MAAM,CAACnM,IAAP,GAAcvD,SAAS,KAAKgJ,IAAI,CAACzF,IAAnB,GAA0ByF,IAAI,CAACzF,IAA/B,GAAsC,IAApD;;MAEAmM,MAAM,CAACzR,MAAP;;MAEA,OAAOyR,MAAP;IACD;IACD;AACJ;AACA;AACA;AACA;;;IAGIvS,YAAY,CAACgS,OAAD,EAAU,CAAC;MACrBjS,GAAG,EAAE,QADgB;MAErBgB,KAAK,EAAE,SAASD,MAAT,GAAkB;QACvB,IAAI2R,MAAM,GAAG,IAAb;;QAEA,IAAI5G,IAAI,GAAGZ,IAAI,CAAC,KAAKY,IAAN,EAAY,OAAZ,EAAqB,KAArB,EAA4B,KAA5B,EAAmC,YAAnC,EAAiD,MAAjD,EAAyD,IAAzD,EAA+D,SAA/D,EAA0E,oBAA1E,EAAgG,WAAhG,CAAf;QACAA,IAAI,CAAC6D,OAAL,GAAe,CAAC,CAAC,KAAK7D,IAAL,CAAU0E,EAA3B;QACA1E,IAAI,CAAC6G,OAAL,GAAe,CAAC,CAAC,KAAK7G,IAAL,CAAU4E,EAA3B;QACA,IAAIX,GAAG,GAAG,KAAKA,GAAL,GAAW,IAAIL,GAAJ,CAAQ5D,IAAR,CAArB;;QAEA,IAAI;UACFiE,GAAG,CAACpC,IAAJ,CAAS,KAAKyE,MAAd,EAAsB,KAAKd,GAA3B,EAAgC,KAAKmB,KAArC;;UAEA,IAAI;YACF,IAAI,KAAK3G,IAAL,CAAU8G,YAAd,EAA4B;cAC1B7C,GAAG,CAAC8C,qBAAJ,IAA6B9C,GAAG,CAAC8C,qBAAJ,CAA0B,IAA1B,CAA7B;;cAEA,KAAK,IAAIrT,CAAT,IAAc,KAAKsM,IAAL,CAAU8G,YAAxB,EAAsC;gBACpC,IAAI,KAAK9G,IAAL,CAAU8G,YAAV,CAAuBnS,cAAvB,CAAsCjB,CAAtC,CAAJ,EAA8C;kBAC5CuQ,GAAG,CAAC+C,gBAAJ,CAAqBtT,CAArB,EAAwB,KAAKsM,IAAL,CAAU8G,YAAV,CAAuBpT,CAAvB,CAAxB;gBACD;cACF;YACF;UACF,CAVD,CAUE,OAAOuC,CAAP,EAAU,CAAE;;UAEd,IAAI,WAAW,KAAKqQ,MAApB,EAA4B;YAC1B,IAAI;cACFrC,GAAG,CAAC+C,gBAAJ,CAAqB,cAArB,EAAqC,0BAArC;YACD,CAFD,CAEE,OAAO/Q,CAAP,EAAU,CAAE;UACf;;UAED,IAAI;YACFgO,GAAG,CAAC+C,gBAAJ,CAAqB,QAArB,EAA+B,KAA/B;UACD,CAFD,CAEE,OAAO/Q,CAAP,EAAU,CAAE,CAvBZ,CAuBa;;;UAGf,IAAI,qBAAqBgO,GAAzB,EAA8B;YAC5BA,GAAG,CAACgD,eAAJ,GAAsB,KAAKjH,IAAL,CAAUiH,eAAhC;UACD;;UAED,IAAI,KAAKjH,IAAL,CAAUkH,cAAd,EAA8B;YAC5BjD,GAAG,CAACkD,OAAJ,GAAc,KAAKnH,IAAL,CAAUkH,cAAxB;UACD;;UAEDjD,GAAG,CAACmD,kBAAJ,GAAyB,YAAY;YACnC,IAAI,MAAMnD,GAAG,CAACvC,UAAd,EAA0B;;YAE1B,IAAI,QAAQuC,GAAG,CAACoD,MAAZ,IAAsB,SAASpD,GAAG,CAACoD,MAAvC,EAA+C;cAC7CT,MAAM,CAACU,MAAP;YACD,CAFD,MAEO;cACL;cACA;cACAV,MAAM,CAAC1G,YAAP,CAAoB,YAAY;gBAC9B0G,MAAM,CAAChF,OAAP,CAAe,OAAOqC,GAAG,CAACoD,MAAX,KAAsB,QAAtB,GAAiCpD,GAAG,CAACoD,MAArC,GAA8C,CAA7D;cACD,CAFD,EAEG,CAFH;YAGD;UACF,CAZD;;UAcApD,GAAG,CAAC/B,IAAJ,CAAS,KAAK3H,IAAd;QACD,CAjDD,CAiDE,OAAOtE,CAAP,EAAU;UACV;UACA;UACA;UACA,KAAKiK,YAAL,CAAkB,YAAY;YAC5B0G,MAAM,CAAChF,OAAP,CAAe3L,CAAf;UACD,CAFD,EAEG,CAFH;UAGA;QACD;;QAED,IAAI,OAAOsR,QAAP,KAAoB,WAAxB,EAAqC;UACnC,KAAKC,KAAL,GAAarB,OAAO,CAACsB,aAAR,EAAb;UACAtB,OAAO,CAACuB,QAAR,CAAiB,KAAKF,KAAtB,IAA+B,IAA/B;QACD;MACF;MACD;AACN;AACA;AACA;AACA;;IA9E2B,CAAD,EAgFnB;MACDtT,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAAS0M,OAAT,CAAiB/H,GAAjB,EAAsB;QAC3B,KAAKkF,YAAL,CAAkB,OAAlB,EAA2BlF,GAA3B,EAAgC,KAAKoK,GAArC;QACA,KAAK0D,OAAL,CAAa,IAAb;MACD;MACD;AACN;AACA;AACA;AACA;;IAVO,CAhFmB,EA4FnB;MACDzT,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAASyS,OAAT,CAAiBC,SAAjB,EAA4B;QACjC,IAAI,gBAAgB,OAAO,KAAK3D,GAA5B,IAAmC,SAAS,KAAKA,GAArD,EAA0D;UACxD;QACD;;QAED,KAAKA,GAAL,CAASmD,kBAAT,GAA8BrD,KAA9B;;QAEA,IAAI6D,SAAJ,EAAe;UACb,IAAI;YACF,KAAK3D,GAAL,CAAS4D,KAAT;UACD,CAFD,CAEE,OAAO5R,CAAP,EAAU,CAAE;QACf;;QAED,IAAI,OAAOsR,QAAP,KAAoB,WAAxB,EAAqC;UACnC,OAAOpB,OAAO,CAACuB,QAAR,CAAiB,KAAKF,KAAtB,CAAP;QACD;;QAED,KAAKvD,GAAL,GAAW,IAAX;MACD;MACD;AACN;AACA;AACA;AACA;;IAzBO,CA5FmB,EAuHnB;MACD/P,GAAG,EAAE,QADJ;MAEDgB,KAAK,EAAE,SAASoS,MAAT,GAAkB;QACvB,IAAI/M,IAAI,GAAG,KAAK0J,GAAL,CAAS6D,YAApB;;QAEA,IAAIvN,IAAI,KAAK,IAAb,EAAmB;UACjB,KAAKwE,YAAL,CAAkB,MAAlB,EAA0BxE,IAA1B;UACA,KAAKwE,YAAL,CAAkB,SAAlB;UACA,KAAK4I,OAAL;QACD;MACF;MACD;AACN;AACA;AACA;AACA;;IAfO,CAvHmB,EAwInB;MACDzT,GAAG,EAAE,OADJ;MAEDgB,KAAK,EAAE,SAAS2S,KAAT,GAAiB;QACtB,KAAKF,OAAL;MACD;IAJA,CAxImB,CAAV,CAAZ;;IA+IA,OAAOxB,OAAP;EACD,CAnL0B,CAmLzBnI,OAnLyB,CAA3B;;EAoLAmI,OAAO,CAACsB,aAAR,GAAwB,CAAxB;EACAtB,OAAO,CAACuB,QAAR,GAAmB,EAAnB;EACA;AACF;AACA;AACA;AACA;;EAEE,IAAI,OAAOH,QAAP,KAAoB,WAAxB,EAAqC;IACnC;IACA,IAAI,OAAOQ,WAAP,KAAuB,UAA3B,EAAuC;MACrC;MACAA,WAAW,CAAC,UAAD,EAAaC,aAAb,CAAX;IACD,CAHD,MAGO,IAAI,OAAO7J,gBAAP,KAA4B,UAAhC,EAA4C;MACjD,IAAI8J,gBAAgB,GAAG,gBAAgB/I,cAAhB,GAAiC,UAAjC,GAA8C,QAArE;MACAf,gBAAgB,CAAC8J,gBAAD,EAAmBD,aAAnB,EAAkC,KAAlC,CAAhB;IACD;EACF;;EAED,SAASA,aAAT,GAAyB;IACvB,KAAK,IAAItU,CAAT,IAAcyS,OAAO,CAACuB,QAAtB,EAAgC;MAC9B,IAAIvB,OAAO,CAACuB,QAAR,CAAiB/S,cAAjB,CAAgCjB,CAAhC,CAAJ,EAAwC;QACtCyS,OAAO,CAACuB,QAAR,CAAiBhU,CAAjB,EAAoBmU,KAApB;MACD;IACF;EACF;;EAED,IAAIK,QAAQ,GAAG,YAAY;IACzB,IAAIC,kBAAkB,GAAG,OAAOC,OAAP,KAAmB,UAAnB,IAAiC,OAAOA,OAAO,CAACC,OAAf,KAA2B,UAArF;;IAEA,IAAIF,kBAAJ,EAAwB;MACtB,OAAO,UAAUvJ,EAAV,EAAc;QACnB,OAAOwJ,OAAO,CAACC,OAAR,GAAkBC,IAAlB,CAAuB1J,EAAvB,CAAP;MACD,CAFD;IAGD,CAJD,MAIO;MACL,OAAO,UAAUA,EAAV,EAAcsB,YAAd,EAA4B;QACjC,OAAOA,YAAY,CAACtB,EAAD,EAAK,CAAL,CAAnB;MACD,CAFD;IAGD;EACF,CAZc,EAAf;;EAaA,IAAI2J,SAAS,GAAGrJ,cAAc,CAACqJ,SAAf,IAA4BrJ,cAAc,CAACsJ,YAA3D;EACA,IAAIC,qBAAqB,GAAG,IAA5B;EACA,IAAIC,iBAAiB,GAAG,aAAxB;EAEA,IAAIC,aAAa,GAAG,OAAOC,SAAP,KAAqB,WAArB,IAAoC,OAAOA,SAAS,CAACC,OAAjB,KAA6B,QAAjE,IAA6ED,SAAS,CAACC,OAAV,CAAkBC,WAAlB,OAAoC,aAArI;;EACA,IAAIC,EAAE,GAAG,aAAa,UAAU3E,UAAV,EAAsB;IAC1CtP,SAAS,CAACiU,EAAD,EAAK3E,UAAL,CAAT;;IAEA,IAAIrD,MAAM,GAAGvJ,YAAY,CAACuR,EAAD,CAAzB;IAEA;AACJ;AACA;AACA;AACA;AACA;;;IACI,SAASA,EAAT,CAAY/I,IAAZ,EAAkB;MAChB,IAAImB,KAAJ;;MAEAhO,eAAe,CAAC,IAAD,EAAO4V,EAAP,CAAf;;MAEA5H,KAAK,GAAGJ,MAAM,CAACnM,IAAP,CAAY,IAAZ,EAAkBoL,IAAlB,CAAR;MACAmB,KAAK,CAAClG,cAAN,GAAuB,CAAC+E,IAAI,CAAC8E,WAA7B;MACA,OAAO3D,KAAP;IACD;IACD;AACJ;AACA;AACA;AACA;;;IAGIhN,YAAY,CAAC4U,EAAD,EAAK,CAAC;MAChB7U,GAAG,EAAE,MADW;MAEhBgD,GAAG,EAAE,SAASA,GAAT,GAAe;QAClB,OAAO,WAAP;MACD;MACD;AACN;AACA;AACA;AACA;;IATsB,CAAD,EAWd;MACDhD,GAAG,EAAE,QADJ;MAEDgB,KAAK,EAAE,SAAS4M,MAAT,GAAkB;QACvB,IAAI,CAAC,KAAKkH,KAAL,EAAL,EAAmB;UACjB;UACA;QACD;;QAED,IAAIxD,GAAG,GAAG,KAAKA,GAAL,EAAV;QACA,IAAIyD,SAAS,GAAG,KAAKjJ,IAAL,CAAUiJ,SAA1B,CAPuB,CAOc;;QAErC,IAAIjJ,IAAI,GAAG2I,aAAa,GAAG,EAAH,GAAQvJ,IAAI,CAAC,KAAKY,IAAN,EAAY,OAAZ,EAAqB,mBAArB,EAA0C,KAA1C,EAAiD,KAAjD,EAAwD,YAAxD,EAAsE,MAAtE,EAA8E,IAA9E,EAAoF,SAApF,EAA+F,oBAA/F,EAAqH,cAArH,EAAqI,iBAArI,EAAwJ,QAAxJ,EAAkK,YAAlK,EAAgL,QAAhL,EAA0L,qBAA1L,CAApC;;QAEA,IAAI,KAAKA,IAAL,CAAU8G,YAAd,EAA4B;UAC1B9G,IAAI,CAACkJ,OAAL,GAAe,KAAKlJ,IAAL,CAAU8G,YAAzB;QACD;;QAED,IAAI;UACF,KAAKqC,EAAL,GAAUV,qBAAqB,IAAI,CAACE,aAA1B,GAA0CM,SAAS,GAAG,IAAIV,SAAJ,CAAc/C,GAAd,EAAmByD,SAAnB,CAAH,GAAmC,IAAIV,SAAJ,CAAc/C,GAAd,CAAtF,GAA2G,IAAI+C,SAAJ,CAAc/C,GAAd,EAAmByD,SAAnB,EAA8BjJ,IAA9B,CAArH;QACD,CAFD,CAEE,OAAOnG,GAAP,EAAY;UACZ,OAAO,KAAKkF,YAAL,CAAkB,OAAlB,EAA2BlF,GAA3B,CAAP;QACD;;QAED,KAAKsP,EAAL,CAAQvM,UAAR,GAAqB,KAAK+E,MAAL,CAAY/E,UAAZ,IAA0B8L,iBAA/C;QACA,KAAKU,iBAAL;MACD;MACD;AACN;AACA;AACA;AACA;;IA9BO,CAXc,EA2Cd;MACDlV,GAAG,EAAE,mBADJ;MAEDgB,KAAK,EAAE,SAASkU,iBAAT,GAA6B;QAClC,IAAI5H,MAAM,GAAG,IAAb;;QAEA,KAAK2H,EAAL,CAAQE,MAAR,GAAiB,YAAY;UAC3B,IAAI7H,MAAM,CAACxB,IAAP,CAAYsJ,SAAhB,EAA2B;YACzB9H,MAAM,CAAC2H,EAAP,CAAUI,OAAV,CAAkBC,KAAlB;UACD;;UAEDhI,MAAM,CAACY,MAAP;QACD,CAND;;QAQA,KAAK+G,EAAL,CAAQM,OAAR,GAAkB,UAAUC,UAAV,EAAsB;UACtC,OAAOlI,MAAM,CAACS,OAAP,CAAe;YACpBhB,WAAW,EAAE,6BADO;YAEpBC,OAAO,EAAEwI;UAFW,CAAf,CAAP;QAID,CALD;;QAOA,KAAKP,EAAL,CAAQQ,SAAR,GAAoB,UAAUC,EAAV,EAAc;UAChC,OAAOpI,MAAM,CAACa,MAAP,CAAcuH,EAAE,CAACrP,IAAjB,CAAP;QACD,CAFD;;QAIA,KAAK4O,EAAL,CAAQU,OAAR,GAAkB,UAAU5T,CAAV,EAAa;UAC7B,OAAOuL,MAAM,CAACI,OAAP,CAAe,iBAAf,EAAkC3L,CAAlC,CAAP;QACD,CAFD;MAGD;MACD;AACN;AACA;AACA;AACA;AACA;;IAjCO,CA3Cc,EA8Ed;MACD/B,GAAG,EAAE,OADJ;MAEDgB,KAAK,EAAE,SAASiN,KAAT,CAAe5E,OAAf,EAAwB;QAC7B,IAAI6H,MAAM,GAAG,IAAb;;QAEA,KAAKrR,QAAL,GAAgB,KAAhB,CAH6B,CAGN;QACvB;;QAEA,IAAI+V,KAAK,GAAG,SAASA,KAAT,CAAepW,CAAf,EAAkB;UAC5B,IAAIgK,MAAM,GAAGH,OAAO,CAAC7J,CAAD,CAApB;UACA,IAAIqW,UAAU,GAAGrW,CAAC,KAAK6J,OAAO,CAAC5J,MAAR,GAAiB,CAAxC;UACAoH,YAAY,CAAC2C,MAAD,EAAS0H,MAAM,CAACnK,cAAhB,EAAgC,UAAUV,IAAV,EAAgB;YAC1D;YACA,IAAIyF,IAAI,GAAG,EAAX,CAF0D,CAG1D;YACA;;YAGA,IAAI;cACF,IAAIyI,qBAAJ,EAA2B;gBACzB;gBACArD,MAAM,CAAC+D,EAAP,CAAUjH,IAAV,CAAe3H,IAAf;cACD;YACF,CALD,CAKE,OAAOtE,CAAP,EAAU,CAAE;;YAEd,IAAI8T,UAAJ,EAAgB;cACd;cACA;cACA7B,QAAQ,CAAC,YAAY;gBACnB9C,MAAM,CAACrR,QAAP,GAAkB,IAAlB;;gBAEAqR,MAAM,CAACrG,YAAP,CAAoB,OAApB;cACD,CAJO,EAILqG,MAAM,CAAClF,YAJF,CAAR;YAKD;UACF,CAvBW,CAAZ;QAwBD,CA3BD;;QA6BA,KAAK,IAAIxM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6J,OAAO,CAAC5J,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;UACvCoW,KAAK,CAACpW,CAAD,CAAL;QACD;MACF;MACD;AACN;AACA;AACA;AACA;;IA7CO,CA9Ec,EA6Hd;MACDQ,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAAS8M,OAAT,GAAmB;QACxB,IAAI,OAAO,KAAKmH,EAAZ,KAAmB,WAAvB,EAAoC;UAClC,KAAKA,EAAL,CAAQpH,KAAR;UACA,KAAKoH,EAAL,GAAU,IAAV;QACD;MACF;MACD;AACN;AACA;AACA;AACA;;IAZO,CA7Hc,EA2Id;MACDjV,GAAG,EAAE,KADJ;MAEDgB,KAAK,EAAE,SAASsQ,GAAT,GAAe;QACpB,IAAI/D,KAAK,GAAG,KAAKA,KAAL,IAAc,EAA1B;QACA,IAAIgE,MAAM,GAAG,KAAKzF,IAAL,CAAU6E,MAAV,GAAmB,KAAnB,GAA2B,IAAxC;QACA,IAAIJ,IAAI,GAAG,EAAX,CAHoB,CAGL;;QAEf,IAAI,KAAKzE,IAAL,CAAUyE,IAAV,KAAmB,UAAUgB,MAAV,IAAoBK,MAAM,CAAC,KAAK9F,IAAL,CAAUyE,IAAX,CAAN,KAA2B,GAA/C,IAAsD,SAASgB,MAAT,IAAmBK,MAAM,CAAC,KAAK9F,IAAL,CAAUyE,IAAX,CAAN,KAA2B,EAAvH,CAAJ,EAAgI;UAC9HA,IAAI,GAAG,MAAM,KAAKzE,IAAL,CAAUyE,IAAvB;QACD,CAPmB,CAOlB;;;QAGF,IAAI,KAAKzE,IAAL,CAAU0F,iBAAd,EAAiC;UAC/BjE,KAAK,CAAC,KAAKzB,IAAL,CAAU2F,cAAX,CAAL,GAAkC3C,KAAK,EAAvC;QACD,CAZmB,CAYlB;;;QAGF,IAAI,CAAC,KAAK/H,cAAV,EAA0B;UACxBwG,KAAK,CAACoE,GAAN,GAAY,CAAZ;QACD;;QAED,IAAIE,YAAY,GAAG5C,MAAM,CAAC1B,KAAD,CAAzB;QACA,IAAIuE,IAAI,GAAG,KAAKhG,IAAL,CAAU2E,QAAV,CAAmB/N,OAAnB,CAA2B,GAA3B,MAAoC,CAAC,CAAhD;QACA,OAAO6O,MAAM,GAAG,KAAT,IAAkBO,IAAI,GAAG,MAAM,KAAKhG,IAAL,CAAU2E,QAAhB,GAA2B,GAA9B,GAAoC,KAAK3E,IAAL,CAAU2E,QAApE,IAAgFF,IAAhF,GAAuF,KAAKzE,IAAL,CAAUiG,IAAjG,IAAyGF,YAAY,CAACpS,MAAb,GAAsB,MAAMoS,YAA5B,GAA2C,EAApJ,CAAP;MACD;MACD;AACN;AACA;AACA;AACA;AACA;;IA9BO,CA3Ic,EA2Kd;MACD7R,GAAG,EAAE,OADJ;MAEDgB,KAAK,EAAE,SAAS8T,KAAT,GAAiB;QACtB,OAAO,CAAC,CAACT,SAAT;MACD;IAJA,CA3Kc,CAAL,CAAZ;;IAkLA,OAAOQ,EAAP;EACD,CA9MqB,CA8MpB1H,SA9MoB,CAAtB;;EAgNA,IAAI2I,UAAU,GAAG;IACfC,SAAS,EAAElB,EADI;IAEf1E,OAAO,EAAEF;EAFM,CAAjB,CAzsDoB,CA8sDpB;;EAEA;AACF;AACA;AACA;AACA;AACA;;EACE,IAAI+F,EAAE,GAAG,yOAAT;EACA,IAAIC,KAAK,GAAG,CAAC,QAAD,EAAW,UAAX,EAAuB,WAAvB,EAAoC,UAApC,EAAgD,MAAhD,EAAwD,UAAxD,EAAoE,MAApE,EAA4E,MAA5E,EAAoF,UAApF,EAAgG,MAAhG,EAAwG,WAAxG,EAAqH,MAArH,EAA6H,OAA7H,EAAsI,QAAtI,CAAZ;;EACA,SAASC,KAAT,CAAe1J,GAAf,EAAoB;IAClB,IAAI2J,GAAG,GAAG3J,GAAV;IAAA,IACI4J,CAAC,GAAG5J,GAAG,CAAC9J,OAAJ,CAAY,GAAZ,CADR;IAAA,IAEIX,CAAC,GAAGyK,GAAG,CAAC9J,OAAJ,CAAY,GAAZ,CAFR;;IAIA,IAAI0T,CAAC,IAAI,CAAC,CAAN,IAAWrU,CAAC,IAAI,CAAC,CAArB,EAAwB;MACtByK,GAAG,GAAGA,GAAG,CAAC1D,SAAJ,CAAc,CAAd,EAAiBsN,CAAjB,IAAsB5J,GAAG,CAAC1D,SAAJ,CAAcsN,CAAd,EAAiBrU,CAAjB,EAAoBsU,OAApB,CAA4B,IAA5B,EAAkC,GAAlC,CAAtB,GAA+D7J,GAAG,CAAC1D,SAAJ,CAAc/G,CAAd,EAAiByK,GAAG,CAAC/M,MAArB,CAArE;IACD;;IAED,IAAI6W,CAAC,GAAGN,EAAE,CAACO,IAAH,CAAQ/J,GAAG,IAAI,EAAf,CAAR;IAAA,IACI8E,GAAG,GAAG,EADV;IAAA,IAEI9R,CAAC,GAAG,EAFR;;IAIA,OAAOA,CAAC,EAAR,EAAY;MACV8R,GAAG,CAAC2E,KAAK,CAACzW,CAAD,CAAN,CAAH,GAAgB8W,CAAC,CAAC9W,CAAD,CAAD,IAAQ,EAAxB;IACD;;IAED,IAAI4W,CAAC,IAAI,CAAC,CAAN,IAAWrU,CAAC,IAAI,CAAC,CAArB,EAAwB;MACtBuP,GAAG,CAAC9Q,MAAJ,GAAa2V,GAAb;MACA7E,GAAG,CAACkF,IAAJ,GAAWlF,GAAG,CAACkF,IAAJ,CAAS1N,SAAT,CAAmB,CAAnB,EAAsBwI,GAAG,CAACkF,IAAJ,CAAS/W,MAAT,GAAkB,CAAxC,EAA2C4W,OAA3C,CAAmD,IAAnD,EAAyD,GAAzD,CAAX;MACA/E,GAAG,CAACmF,SAAJ,GAAgBnF,GAAG,CAACmF,SAAJ,CAAcJ,OAAd,CAAsB,GAAtB,EAA2B,EAA3B,EAA+BA,OAA/B,CAAuC,GAAvC,EAA4C,EAA5C,EAAgDA,OAAhD,CAAwD,IAAxD,EAA8D,GAA9D,CAAhB;MACA/E,GAAG,CAACoF,OAAJ,GAAc,IAAd;IACD;;IAEDpF,GAAG,CAACqF,SAAJ,GAAgBA,SAAS,CAACrF,GAAD,EAAMA,GAAG,CAAC,MAAD,CAAT,CAAzB;IACAA,GAAG,CAACsF,QAAJ,GAAeA,QAAQ,CAACtF,GAAD,EAAMA,GAAG,CAAC,OAAD,CAAT,CAAvB;IACA,OAAOA,GAAP;EACD;;EAED,SAASqF,SAAT,CAAmB/X,GAAnB,EAAwBmT,IAAxB,EAA8B;IAC5B,IAAI8E,IAAI,GAAG,UAAX;IAAA,IACIC,KAAK,GAAG/E,IAAI,CAACsE,OAAL,CAAaQ,IAAb,EAAmB,GAAnB,EAAwBvP,KAAxB,CAA8B,GAA9B,CADZ;;IAGA,IAAIyK,IAAI,CAACtN,KAAL,CAAW,CAAX,EAAc,CAAd,KAAoB,GAApB,IAA2BsN,IAAI,CAACtS,MAAL,KAAgB,CAA/C,EAAkD;MAChDqX,KAAK,CAACnM,MAAN,CAAa,CAAb,EAAgB,CAAhB;IACD;;IAED,IAAIoH,IAAI,CAACtN,KAAL,CAAW,CAAC,CAAZ,KAAkB,GAAtB,EAA2B;MACzBqS,KAAK,CAACnM,MAAN,CAAamM,KAAK,CAACrX,MAAN,GAAe,CAA5B,EAA+B,CAA/B;IACD;;IAED,OAAOqX,KAAP;EACD;;EAED,SAASF,QAAT,CAAkBtF,GAAlB,EAAuB/D,KAAvB,EAA8B;IAC5B,IAAIlH,IAAI,GAAG,EAAX;IACAkH,KAAK,CAAC8I,OAAN,CAAc,2BAAd,EAA2C,UAAUU,EAAV,EAAcC,EAAd,EAAkBC,EAAlB,EAAsB;MAC/D,IAAID,EAAJ,EAAQ;QACN3Q,IAAI,CAAC2Q,EAAD,CAAJ,GAAWC,EAAX;MACD;IACF,CAJD;IAKA,OAAO5Q,IAAP;EACD;;EAED,IAAI6Q,QAAQ,GAAG,aAAa,UAAU9J,QAAV,EAAoB;IAC9CxM,SAAS,CAACuW,MAAD,EAAS/J,QAAT,CAAT;;IAEA,IAAIP,MAAM,GAAGvJ,YAAY,CAAC6T,MAAD,CAAzB;IAEA;AACJ;AACA;AACA;AACA;AACA;AACA;;;IACI,SAASA,MAAT,CAAgB7F,GAAhB,EAAqB;MACnB,IAAIrE,KAAJ;;MAEA,IAAInB,IAAI,GAAGvL,SAAS,CAACd,MAAV,GAAmB,CAAnB,IAAwBc,SAAS,CAAC,CAAD,CAAT,KAAiBuC,SAAzC,GAAqDvC,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAA/E;;MAEAtB,eAAe,CAAC,IAAD,EAAOkY,MAAP,CAAf;;MAEAlK,KAAK,GAAGJ,MAAM,CAACnM,IAAP,CAAY,IAAZ,CAAR;;MAEA,IAAI4Q,GAAG,IAAI,aAAa3S,OAAO,CAAC2S,GAAD,CAA/B,EAAsC;QACpCxF,IAAI,GAAGwF,GAAP;QACAA,GAAG,GAAG,IAAN;MACD;;MAED,IAAIA,GAAJ,EAAS;QACPA,GAAG,GAAG4E,KAAK,CAAC5E,GAAD,CAAX;QACAxF,IAAI,CAAC2E,QAAL,GAAgBa,GAAG,CAACkF,IAApB;QACA1K,IAAI,CAAC6E,MAAL,GAAcW,GAAG,CAAChB,QAAJ,KAAiB,OAAjB,IAA4BgB,GAAG,CAAChB,QAAJ,KAAiB,KAA3D;QACAxE,IAAI,CAACyE,IAAL,GAAYe,GAAG,CAACf,IAAhB;QACA,IAAIe,GAAG,CAAC/D,KAAR,EAAezB,IAAI,CAACyB,KAAL,GAAa+D,GAAG,CAAC/D,KAAjB;MAChB,CAND,MAMO,IAAIzB,IAAI,CAAC0K,IAAT,EAAe;QACpB1K,IAAI,CAAC2E,QAAL,GAAgByF,KAAK,CAACpK,IAAI,CAAC0K,IAAN,CAAL,CAAiBA,IAAjC;MACD;;MAED3K,qBAAqB,CAAC1I,sBAAsB,CAAC8J,KAAD,CAAvB,EAAgCnB,IAAhC,CAArB;MACAmB,KAAK,CAAC0D,MAAN,GAAe,QAAQ7E,IAAI,CAAC6E,MAAb,GAAsB7E,IAAI,CAAC6E,MAA3B,GAAoC,OAAOP,QAAP,KAAoB,WAApB,IAAmC,aAAaA,QAAQ,CAACE,QAA5G;;MAEA,IAAIxE,IAAI,CAAC2E,QAAL,IAAiB,CAAC3E,IAAI,CAACyE,IAA3B,EAAiC;QAC/B;QACAzE,IAAI,CAACyE,IAAL,GAAYtD,KAAK,CAAC0D,MAAN,GAAe,KAAf,GAAuB,IAAnC;MACD;;MAED1D,KAAK,CAACwD,QAAN,GAAiB3E,IAAI,CAAC2E,QAAL,KAAkB,OAAOL,QAAP,KAAoB,WAApB,GAAkCA,QAAQ,CAACK,QAA3C,GAAsD,WAAxE,CAAjB;MACAxD,KAAK,CAACsD,IAAN,GAAazE,IAAI,CAACyE,IAAL,KAAc,OAAOH,QAAP,KAAoB,WAApB,IAAmCA,QAAQ,CAACG,IAA5C,GAAmDH,QAAQ,CAACG,IAA5D,GAAmEtD,KAAK,CAAC0D,MAAN,GAAe,KAAf,GAAuB,IAAxG,CAAb;MACA1D,KAAK,CAAC6I,UAAN,GAAmBhK,IAAI,CAACgK,UAAL,IAAmB,CAAC,SAAD,EAAY,WAAZ,CAAtC;MACA7I,KAAK,CAACO,UAAN,GAAmB,EAAnB;MACAP,KAAK,CAACmK,WAAN,GAAoB,EAApB;MACAnK,KAAK,CAACoK,aAAN,GAAsB,CAAtB;MACApK,KAAK,CAACnB,IAAN,GAAa1L,QAAQ,CAAC;QACpB2R,IAAI,EAAE,YADc;QAEpBuF,KAAK,EAAE,KAFa;QAGpBvE,eAAe,EAAE,KAHG;QAIpBwE,OAAO,EAAE,IAJW;QAKpB9F,cAAc,EAAE,GALI;QAMpB+F,eAAe,EAAE,KANG;QAOpBC,kBAAkB,EAAE,IAPA;QAQpBC,iBAAiB,EAAE;UACjBC,SAAS,EAAE;QADM,CARC;QAWpBC,gBAAgB,EAAE,EAXE;QAYpBC,mBAAmB,EAAE;MAZD,CAAD,EAalB/L,IAbkB,CAArB;MAcAmB,KAAK,CAACnB,IAAN,CAAWiG,IAAX,GAAkB9E,KAAK,CAACnB,IAAN,CAAWiG,IAAX,CAAgBsE,OAAhB,CAAwB,KAAxB,EAA+B,EAA/B,IAAqC,GAAvD;;MAEA,IAAI,OAAOpJ,KAAK,CAACnB,IAAN,CAAWyB,KAAlB,KAA4B,QAAhC,EAA0C;QACxCN,KAAK,CAACnB,IAAN,CAAWyB,KAAX,GAAmBzF,MAAM,CAACmF,KAAK,CAACnB,IAAN,CAAWyB,KAAZ,CAAzB;MACD,CAxDkB,CAwDjB;;;MAGFN,KAAK,CAAC6K,EAAN,GAAW,IAAX;MACA7K,KAAK,CAAC8K,QAAN,GAAiB,IAAjB;MACA9K,KAAK,CAAC+K,YAAN,GAAqB,IAArB;MACA/K,KAAK,CAACgL,WAAN,GAAoB,IAApB,CA9DmB,CA8DO;;MAE1BhL,KAAK,CAACiL,gBAAN,GAAyB,IAAzB;;MAEA,IAAI,OAAOjO,gBAAP,KAA4B,UAAhC,EAA4C;QAC1C,IAAIgD,KAAK,CAACnB,IAAN,CAAW+L,mBAAf,EAAoC;UAClC;UACA;UACA;UACA5K,KAAK,CAACkL,yBAAN,GAAkC,YAAY;YAC5C,IAAIlL,KAAK,CAACmL,SAAV,EAAqB;cACnB;cACAnL,KAAK,CAACmL,SAAN,CAAgB7N,kBAAhB;;cAEA0C,KAAK,CAACmL,SAAN,CAAgBvK,KAAhB;YACD;UACF,CAPD;;UASA5D,gBAAgB,CAAC,cAAD,EAAiBgD,KAAK,CAACkL,yBAAvB,EAAkD,KAAlD,CAAhB;QACD;;QAED,IAAIlL,KAAK,CAACwD,QAAN,KAAmB,WAAvB,EAAoC;UAClCxD,KAAK,CAACoL,oBAAN,GAA6B,YAAY;YACvCpL,KAAK,CAACc,OAAN,CAAc,iBAAd,EAAiC;cAC/BhB,WAAW,EAAE;YADkB,CAAjC;UAGD,CAJD;;UAMA9C,gBAAgB,CAAC,SAAD,EAAYgD,KAAK,CAACoL,oBAAlB,EAAwC,KAAxC,CAAhB;QACD;MACF;;MAEDpL,KAAK,CAACU,IAAN;;MAEA,OAAOV,KAAP;IACD;IACD;AACJ;AACA;AACA;AACA;AACA;AACA;;;IAGIhN,YAAY,CAACkX,MAAD,EAAS,CAAC;MACpBnX,GAAG,EAAE,iBADe;MAEpBgB,KAAK,EAAE,SAASsX,eAAT,CAAyB5T,IAAzB,EAA+B;QACpC,IAAI6I,KAAK,GAAGnN,QAAQ,CAAC,EAAD,EAAK,KAAK0L,IAAL,CAAUyB,KAAf,CAApB,CADoC,CACO;;;QAG3CA,KAAK,CAACgL,GAAN,GAAY1O,UAAZ,CAJoC,CAIZ;;QAExB0D,KAAK,CAAC6K,SAAN,GAAkB1T,IAAlB,CANoC,CAMZ;;QAExB,IAAI,KAAKoT,EAAT,EAAavK,KAAK,CAACmE,GAAN,GAAY,KAAKoG,EAAjB;;QAEb,IAAIhM,IAAI,GAAG1L,QAAQ,CAAC,EAAD,EAAK,KAAK0L,IAAL,CAAU8L,gBAAV,CAA2BlT,IAA3B,CAAL,EAAuC,KAAKoH,IAA5C,EAAkD;UACnEyB,KAAK,EAAEA,KAD4D;UAEnEE,MAAM,EAAE,IAF2D;UAGnEgD,QAAQ,EAAE,KAAKA,QAHoD;UAInEE,MAAM,EAAE,KAAKA,MAJsD;UAKnEJ,IAAI,EAAE,KAAKA;QALwD,CAAlD,CAAnB;;QAQA,OAAO,IAAIuF,UAAU,CAACpR,IAAD,CAAd,CAAqBoH,IAArB,CAAP;MACD;MACD;AACN;AACA;AACA;AACA;;IA1B0B,CAAD,EA4BlB;MACD9L,GAAG,EAAE,MADJ;MAEDgB,KAAK,EAAE,SAAS2M,IAAT,GAAgB;QACrB,IAAIL,MAAM,GAAG,IAAb;;QAEA,IAAI8K,SAAJ;;QAEA,IAAI,KAAKtM,IAAL,CAAU0L,eAAV,IAA6BL,MAAM,CAACqB,qBAApC,IAA6D,KAAK1C,UAAL,CAAgBpT,OAAhB,CAAwB,WAAxB,MAAyC,CAAC,CAA3G,EAA8G;UAC5G0V,SAAS,GAAG,WAAZ;QACD,CAFD,MAEO,IAAI,MAAM,KAAKtC,UAAL,CAAgBrW,MAA1B,EAAkC;UACvC;UACA,KAAKuM,YAAL,CAAkB,YAAY;YAC5BsB,MAAM,CAACzC,YAAP,CAAoB,OAApB,EAA6B,yBAA7B;UACD,CAFD,EAEG,CAFH;UAGA;QACD,CANM,MAMA;UACLuN,SAAS,GAAG,KAAKtC,UAAL,CAAgB,CAAhB,CAAZ;QACD;;QAED,KAAKtI,UAAL,GAAkB,SAAlB,CAjBqB,CAiBQ;;QAE7B,IAAI;UACF4K,SAAS,GAAG,KAAKE,eAAL,CAAqBF,SAArB,CAAZ;QACD,CAFD,CAEE,OAAOrW,CAAP,EAAU;UACV,KAAK+T,UAAL,CAAgB2C,KAAhB;UACA,KAAK9K,IAAL;UACA;QACD;;QAEDyK,SAAS,CAACzK,IAAV;QACA,KAAK+K,YAAL,CAAkBN,SAAlB;MACD;MACD;AACN;AACA;AACA;AACA;;IApCO,CA5BkB,EAkElB;MACDpY,GAAG,EAAE,cADJ;MAEDgB,KAAK,EAAE,SAAS0X,YAAT,CAAsBN,SAAtB,EAAiC;QACtC,IAAIlH,MAAM,GAAG,IAAb;;QAEA,IAAI,KAAKkH,SAAT,EAAoB;UAClB,KAAKA,SAAL,CAAe7N,kBAAf;QACD,CALqC,CAKpC;;;QAGF,KAAK6N,SAAL,GAAiBA,SAAjB,CARsC,CAQV;;QAE5BA,SAAS,CAACpO,EAAV,CAAa,OAAb,EAAsB,KAAK2O,OAAL,CAAarY,IAAb,CAAkB,IAAlB,CAAtB,EAA+C0J,EAA/C,CAAkD,QAAlD,EAA4D,KAAKoE,QAAL,CAAc9N,IAAd,CAAmB,IAAnB,CAA5D,EAAsF0J,EAAtF,CAAyF,OAAzF,EAAkG,KAAK0D,OAAL,CAAapN,IAAb,CAAkB,IAAlB,CAAlG,EAA2H0J,EAA3H,CAA8H,OAA9H,EAAuI,UAAU8C,MAAV,EAAkB;UACvJ,OAAOoE,MAAM,CAACnD,OAAP,CAAe,iBAAf,EAAkCjB,MAAlC,CAAP;QACD,CAFD;MAGD;MACD;AACN;AACA;AACA;AACA;AACA;;IArBO,CAlEkB,EAyFlB;MACD9M,GAAG,EAAE,OADJ;MAEDgB,KAAK,EAAE,SAAS4X,KAAT,CAAelU,IAAf,EAAqB;QAC1B,IAAIyM,MAAM,GAAG,IAAb;;QAEA,IAAIiH,SAAS,GAAG,KAAKE,eAAL,CAAqB5T,IAArB,CAAhB;QACA,IAAImU,MAAM,GAAG,KAAb;QACA1B,MAAM,CAACqB,qBAAP,GAA+B,KAA/B;;QAEA,IAAIM,eAAe,GAAG,SAASA,eAAT,GAA2B;UAC/C,IAAID,MAAJ,EAAY;UACZT,SAAS,CAACpK,IAAV,CAAe,CAAC;YACd5H,IAAI,EAAE,MADQ;YAEdC,IAAI,EAAE;UAFQ,CAAD,CAAf;UAIA+R,SAAS,CAAChO,IAAV,CAAe,QAAf,EAAyB,UAAU2O,GAAV,EAAe;YACtC,IAAIF,MAAJ,EAAY;;YAEZ,IAAI,WAAWE,GAAG,CAAC3S,IAAf,IAAuB,YAAY2S,GAAG,CAAC1S,IAA3C,EAAiD;cAC/C8K,MAAM,CAAC6H,SAAP,GAAmB,IAAnB;;cAEA7H,MAAM,CAACtG,YAAP,CAAoB,WAApB,EAAiCuN,SAAjC;;cAEA,IAAI,CAACA,SAAL,EAAgB;cAChBjB,MAAM,CAACqB,qBAAP,GAA+B,gBAAgBJ,SAAS,CAAC1T,IAAzD;;cAEAyM,MAAM,CAACiH,SAAP,CAAiBtH,KAAjB,CAAuB,YAAY;gBACjC,IAAI+H,MAAJ,EAAY;gBACZ,IAAI,aAAa1H,MAAM,CAAC3D,UAAxB,EAAoC;gBACpCiG,OAAO;;gBAEPtC,MAAM,CAACuH,YAAP,CAAoBN,SAApB;;gBAEAA,SAAS,CAACpK,IAAV,CAAe,CAAC;kBACd5H,IAAI,EAAE;gBADQ,CAAD,CAAf;;gBAIA+K,MAAM,CAACtG,YAAP,CAAoB,SAApB,EAA+BuN,SAA/B;;gBAEAA,SAAS,GAAG,IAAZ;gBACAjH,MAAM,CAAC6H,SAAP,GAAmB,KAAnB;;gBAEA7H,MAAM,CAAC8H,KAAP;cACD,CAjBD;YAkBD,CA1BD,MA0BO;cACL,IAAItT,GAAG,GAAG,IAAIuH,KAAJ,CAAU,aAAV,CAAV,CADK,CAC+B;;cAEpCvH,GAAG,CAACyS,SAAJ,GAAgBA,SAAS,CAAC1T,IAA1B;;cAEAyM,MAAM,CAACtG,YAAP,CAAoB,cAApB,EAAoClF,GAApC;YACD;UACF,CApCD;QAqCD,CA3CD;;QA6CA,SAASuT,eAAT,GAA2B;UACzB,IAAIL,MAAJ,EAAY,OADa,CACL;;UAEpBA,MAAM,GAAG,IAAT;UACApF,OAAO;UACP2E,SAAS,CAACvK,KAAV;UACAuK,SAAS,GAAG,IAAZ;QACD,CA3DyB,CA2DxB;;;QAGF,IAAIzC,OAAO,GAAG,SAASA,OAAT,CAAiBhQ,GAAjB,EAAsB;UAClC,IAAIwT,KAAK,GAAG,IAAIjM,KAAJ,CAAU,kBAAkBvH,GAA5B,CAAZ,CADkC,CACY;;UAE9CwT,KAAK,CAACf,SAAN,GAAkBA,SAAS,CAAC1T,IAA5B;UACAwU,eAAe;;UAEf/H,MAAM,CAACtG,YAAP,CAAoB,cAApB,EAAoCsO,KAApC;QACD,CAPD;;QASA,SAASC,gBAAT,GAA4B;UAC1BzD,OAAO,CAAC,kBAAD,CAAP;QACD,CAzEyB,CAyExB;;;QAGF,SAASJ,OAAT,GAAmB;UACjBI,OAAO,CAAC,eAAD,CAAP;QACD,CA9EyB,CA8ExB;;;QAGF,SAAS0D,SAAT,CAAmBC,EAAnB,EAAuB;UACrB,IAAIlB,SAAS,IAAIkB,EAAE,CAAC5U,IAAH,KAAY0T,SAAS,CAAC1T,IAAvC,EAA6C;YAC3CwU,eAAe;UAChB;QACF,CArFyB,CAqFxB;;;QAGF,IAAIzF,OAAO,GAAG,SAASA,OAAT,GAAmB;UAC/B2E,SAAS,CAAC9N,cAAV,CAAyB,MAAzB,EAAiCwO,eAAjC;UACAV,SAAS,CAAC9N,cAAV,CAAyB,OAAzB,EAAkCqL,OAAlC;UACAyC,SAAS,CAAC9N,cAAV,CAAyB,OAAzB,EAAkC8O,gBAAlC;;UAEAjI,MAAM,CAAC9G,GAAP,CAAW,OAAX,EAAoBkL,OAApB;;UAEApE,MAAM,CAAC9G,GAAP,CAAW,WAAX,EAAwBgP,SAAxB;QACD,CARD;;QAUAjB,SAAS,CAAChO,IAAV,CAAe,MAAf,EAAuB0O,eAAvB;QACAV,SAAS,CAAChO,IAAV,CAAe,OAAf,EAAwBuL,OAAxB;QACAyC,SAAS,CAAChO,IAAV,CAAe,OAAf,EAAwBgP,gBAAxB;QACA,KAAKhP,IAAL,CAAU,OAAV,EAAmBmL,OAAnB;QACA,KAAKnL,IAAL,CAAU,WAAV,EAAuBiP,SAAvB;QACAjB,SAAS,CAACzK,IAAV;MACD;MACD;AACN;AACA;AACA;AACA;;IA/GO,CAzFkB,EA0MlB;MACD3N,GAAG,EAAE,QADJ;MAEDgB,KAAK,EAAE,SAASkN,MAAT,GAAkB;QACvB,KAAKV,UAAL,GAAkB,MAAlB;QACA2J,MAAM,CAACqB,qBAAP,GAA+B,gBAAgB,KAAKJ,SAAL,CAAe1T,IAA9D;QACA,KAAKmG,YAAL,CAAkB,MAAlB;QACA,KAAKoO,KAAL,GAJuB,CAIT;QACd;;QAEA,IAAI,WAAW,KAAKzL,UAAhB,IAA8B,KAAK1B,IAAL,CAAUyL,OAAxC,IAAmD,KAAKa,SAAL,CAAetH,KAAtE,EAA6E;UAC3E,IAAItR,CAAC,GAAG,CAAR;UACA,IAAIkN,CAAC,GAAG,KAAKqL,QAAL,CAActY,MAAtB;;UAEA,OAAOD,CAAC,GAAGkN,CAAX,EAAclN,CAAC,EAAf,EAAmB;YACjB,KAAKoZ,KAAL,CAAW,KAAKb,QAAL,CAAcvY,CAAd,CAAX;UACD;QACF;MACF;MACD;AACN;AACA;AACA;AACA;;IAtBO,CA1MkB,EAkOlB;MACDQ,GAAG,EAAE,UADJ;MAEDgB,KAAK,EAAE,SAASoN,QAAT,CAAkB5E,MAAlB,EAA0B;QAC/B,IAAI,cAAc,KAAKgE,UAAnB,IAAiC,WAAW,KAAKA,UAAjD,IAA+D,cAAc,KAAKA,UAAtF,EAAkG;UAChG,KAAK3C,YAAL,CAAkB,QAAlB,EAA4BrB,MAA5B,EADgG,CAC3D;;UAErC,KAAKqB,YAAL,CAAkB,WAAlB;;UAEA,QAAQrB,MAAM,CAACpD,IAAf;YACE,KAAK,MAAL;cACE,KAAKmT,WAAL,CAAiBC,IAAI,CAACtD,KAAL,CAAW1M,MAAM,CAACnD,IAAlB,CAAjB;cACA;;YAEF,KAAK,MAAL;cACE,KAAKoT,gBAAL;cACA,KAAKC,UAAL,CAAgB,MAAhB;cACA,KAAK7O,YAAL,CAAkB,MAAlB;cACA,KAAKA,YAAL,CAAkB,MAAlB;cACA;;YAEF,KAAK,OAAL;cACE,IAAIlF,GAAG,GAAG,IAAIuH,KAAJ,CAAU,cAAV,CAAV,CADF,CACuC;;cAErCvH,GAAG,CAACgU,IAAJ,GAAWnQ,MAAM,CAACnD,IAAlB;cACA,KAAKqH,OAAL,CAAa/H,GAAb;cACA;;YAEF,KAAK,SAAL;cACE,KAAKkF,YAAL,CAAkB,MAAlB,EAA0BrB,MAAM,CAACnD,IAAjC;cACA,KAAKwE,YAAL,CAAkB,SAAlB,EAA6BrB,MAAM,CAACnD,IAApC;cACA;UAtBJ;QAwBD;MACF;MACD;AACN;AACA;AACA;AACA;AACA;;IAvCO,CAlOkB,EA2QlB;MACDrG,GAAG,EAAE,aADJ;MAEDgB,KAAK,EAAE,SAASuY,WAAT,CAAqBlT,IAArB,EAA2B;QAChC,KAAKwE,YAAL,CAAkB,WAAlB,EAA+BxE,IAA/B;QACA,KAAKyR,EAAL,GAAUzR,IAAI,CAACqL,GAAf;QACA,KAAK0G,SAAL,CAAe7K,KAAf,CAAqBmE,GAArB,GAA2BrL,IAAI,CAACqL,GAAhC;QACA,KAAKqG,QAAL,GAAgB,KAAK6B,cAAL,CAAoBvT,IAAI,CAAC0R,QAAzB,CAAhB;QACA,KAAKC,YAAL,GAAoB3R,IAAI,CAAC2R,YAAzB;QACA,KAAKC,WAAL,GAAmB5R,IAAI,CAAC4R,WAAxB;QACA,KAAK4B,UAAL,GAAkBxT,IAAI,CAACwT,UAAvB;QACA,KAAK3L,MAAL,GARgC,CAQjB;;QAEf,IAAI,aAAa,KAAKV,UAAtB,EAAkC;QAClC,KAAKiM,gBAAL;MACD;MACD;AACN;AACA;AACA;AACA;;IAnBO,CA3QkB,EAgSlB;MACDzZ,GAAG,EAAE,kBADJ;MAEDgB,KAAK,EAAE,SAASyY,gBAAT,GAA4B;QACjC,IAAIrI,MAAM,GAAG,IAAb;;QAEA,KAAKnF,cAAL,CAAoB,KAAKiM,gBAAzB;QACA,KAAKA,gBAAL,GAAwB,KAAKlM,YAAL,CAAkB,YAAY;UACpDoF,MAAM,CAACrD,OAAP,CAAe,cAAf;QACD,CAFuB,EAErB,KAAKiK,YAAL,GAAoB,KAAKC,WAFJ,CAAxB;;QAIA,IAAI,KAAKnM,IAAL,CAAUsJ,SAAd,EAAyB;UACvB,KAAK8C,gBAAL,CAAsB5C,KAAtB;QACD;MACF;MACD;AACN;AACA;AACA;AACA;;IAlBO,CAhSkB,EAoTlB;MACDtV,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAAS2X,OAAT,GAAmB;QACxB,KAAKvB,WAAL,CAAiBzM,MAAjB,CAAwB,CAAxB,EAA2B,KAAK0M,aAAhC,EADwB,CACwB;QAChD;QACA;;QAEA,KAAKA,aAAL,GAAqB,CAArB;;QAEA,IAAI,MAAM,KAAKD,WAAL,CAAiB3X,MAA3B,EAAmC;UACjC,KAAKoL,YAAL,CAAkB,OAAlB;QACD,CAFD,MAEO;UACL,KAAKoO,KAAL;QACD;MACF;MACD;AACN;AACA;AACA;AACA;;IAnBO,CApTkB,EAyUlB;MACDjZ,GAAG,EAAE,OADJ;MAEDgB,KAAK,EAAE,SAASiY,KAAT,GAAiB;QACtB,IAAI,aAAa,KAAKzL,UAAlB,IAAgC,KAAK4K,SAAL,CAAevY,QAA/C,IAA2D,CAAC,KAAKmZ,SAAjE,IAA8E,KAAK5B,WAAL,CAAiB3X,MAAnG,EAA2G;UACzG,IAAI4J,OAAO,GAAG,KAAKyQ,kBAAL,EAAd;UACA,KAAK1B,SAAL,CAAepK,IAAf,CAAoB3E,OAApB,EAFyG,CAE3E;UAC9B;;UAEA,KAAKgO,aAAL,GAAqBhO,OAAO,CAAC5J,MAA7B;UACA,KAAKoL,YAAL,CAAkB,OAAlB;QACD;MACF;MACD;AACN;AACA;AACA;AACA;AACA;;IAjBO,CAzUkB,EA4VlB;MACD7K,GAAG,EAAE,oBADJ;MAEDgB,KAAK,EAAE,SAAS8Y,kBAAT,GAA8B;QACnC,IAAIC,sBAAsB,GAAG,KAAKF,UAAL,IAAmB,KAAKzB,SAAL,CAAe1T,IAAf,KAAwB,SAA3C,IAAwD,KAAK0S,WAAL,CAAiB3X,MAAjB,GAA0B,CAA/G;;QAEA,IAAI,CAACsa,sBAAL,EAA6B;UAC3B,OAAO,KAAK3C,WAAZ;QACD;;QAED,IAAI4C,WAAW,GAAG,CAAlB,CAPmC,CAOd;;QAErB,KAAK,IAAIxa,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK4X,WAAL,CAAiB3X,MAArC,EAA6CD,CAAC,EAA9C,EAAkD;UAChD,IAAI6G,IAAI,GAAG,KAAK+Q,WAAL,CAAiB5X,CAAjB,EAAoB6G,IAA/B;;UAEA,IAAIA,IAAJ,EAAU;YACR2T,WAAW,IAAI7N,UAAU,CAAC9F,IAAD,CAAzB;UACD;;UAED,IAAI7G,CAAC,GAAG,CAAJ,IAASwa,WAAW,GAAG,KAAKH,UAAhC,EAA4C;YAC1C,OAAO,KAAKzC,WAAL,CAAiB3S,KAAjB,CAAuB,CAAvB,EAA0BjF,CAA1B,CAAP;UACD;;UAEDwa,WAAW,IAAI,CAAf,CAXgD,CAW9B;QACnB;;QAED,OAAO,KAAK5C,WAAZ;MACD;MACD;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAnCO,CA5VkB,EAiYlB;MACDpX,GAAG,EAAE,OADJ;MAEDgB,KAAK,EAAE,SAASiN,KAAT,CAAe8K,GAAf,EAAoBkB,OAApB,EAA6BzX,EAA7B,EAAiC;QACtC,KAAKkX,UAAL,CAAgB,SAAhB,EAA2BX,GAA3B,EAAgCkB,OAAhC,EAAyCzX,EAAzC;QACA,OAAO,IAAP;MACD;IALA,CAjYkB,EAuYlB;MACDxC,GAAG,EAAE,MADJ;MAEDgB,KAAK,EAAE,SAASgN,IAAT,CAAc+K,GAAd,EAAmBkB,OAAnB,EAA4BzX,EAA5B,EAAgC;QACrC,KAAKkX,UAAL,CAAgB,SAAhB,EAA2BX,GAA3B,EAAgCkB,OAAhC,EAAyCzX,EAAzC;QACA,OAAO,IAAP;MACD;MACD;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAdO,CAvYkB,EAuZlB;MACDxC,GAAG,EAAE,YADJ;MAEDgB,KAAK,EAAE,SAAS0Y,UAAT,CAAoBtT,IAApB,EAA0BC,IAA1B,EAAgC4T,OAAhC,EAAyCzX,EAAzC,EAA6C;QAClD,IAAI,eAAe,OAAO6D,IAA1B,EAAgC;UAC9B7D,EAAE,GAAG6D,IAAL;UACAA,IAAI,GAAGvD,SAAP;QACD;;QAED,IAAI,eAAe,OAAOmX,OAA1B,EAAmC;UACjCzX,EAAE,GAAGyX,OAAL;UACAA,OAAO,GAAG,IAAV;QACD;;QAED,IAAI,cAAc,KAAKzM,UAAnB,IAAiC,aAAa,KAAKA,UAAvD,EAAmE;UACjE;QACD;;QAEDyM,OAAO,GAAGA,OAAO,IAAI,EAArB;QACAA,OAAO,CAACC,QAAR,GAAmB,UAAUD,OAAO,CAACC,QAArC;QACA,IAAI1Q,MAAM,GAAG;UACXpD,IAAI,EAAEA,IADK;UAEXC,IAAI,EAAEA,IAFK;UAGX4T,OAAO,EAAEA;QAHE,CAAb;QAKA,KAAKpP,YAAL,CAAkB,cAAlB,EAAkCrB,MAAlC;QACA,KAAK4N,WAAL,CAAiB/U,IAAjB,CAAsBmH,MAAtB;QACA,IAAIhH,EAAJ,EAAQ,KAAK4H,IAAL,CAAU,OAAV,EAAmB5H,EAAnB;QACR,KAAKyW,KAAL;MACD;MACD;AACN;AACA;AACA;AACA;;IAjCO,CAvZkB,EA0blB;MACDjZ,GAAG,EAAE,OADJ;MAEDgB,KAAK,EAAE,SAAS6M,KAAT,GAAiB;QACtB,IAAIqE,MAAM,GAAG,IAAb;;QAEA,IAAIrE,KAAK,GAAG,SAASA,KAAT,GAAiB;UAC3BqE,MAAM,CAACnE,OAAP,CAAe,cAAf;;UAEAmE,MAAM,CAACkG,SAAP,CAAiBvK,KAAjB;QACD,CAJD;;QAMA,IAAIsM,eAAe,GAAG,SAASA,eAAT,GAA2B;UAC/CjI,MAAM,CAAC7H,GAAP,CAAW,SAAX,EAAsB8P,eAAtB;;UAEAjI,MAAM,CAAC7H,GAAP,CAAW,cAAX,EAA2B8P,eAA3B;;UAEAtM,KAAK;QACN,CAND;;QAQA,IAAIuM,cAAc,GAAG,SAASA,cAAT,GAA0B;UAC7C;UACAlI,MAAM,CAAC9H,IAAP,CAAY,SAAZ,EAAuB+P,eAAvB;;UAEAjI,MAAM,CAAC9H,IAAP,CAAY,cAAZ,EAA4B+P,eAA5B;QACD,CALD;;QAOA,IAAI,cAAc,KAAK3M,UAAnB,IAAiC,WAAW,KAAKA,UAArD,EAAiE;UAC/D,KAAKA,UAAL,GAAkB,SAAlB;;UAEA,IAAI,KAAK4J,WAAL,CAAiB3X,MAArB,EAA6B;YAC3B,KAAK2K,IAAL,CAAU,OAAV,EAAmB,YAAY;cAC7B,IAAI8H,MAAM,CAAC8G,SAAX,EAAsB;gBACpBoB,cAAc;cACf,CAFD,MAEO;gBACLvM,KAAK;cACN;YACF,CAND;UAOD,CARD,MAQO,IAAI,KAAKmL,SAAT,EAAoB;YACzBoB,cAAc;UACf,CAFM,MAEA;YACLvM,KAAK;UACN;QACF;;QAED,OAAO,IAAP;MACD;MACD;AACN;AACA;AACA;AACA;;IAlDO,CA1bkB,EA8elB;MACD7N,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAAS0M,OAAT,CAAiB/H,GAAjB,EAAsB;QAC3BwR,MAAM,CAACqB,qBAAP,GAA+B,KAA/B;QACA,KAAK3N,YAAL,CAAkB,OAAlB,EAA2BlF,GAA3B;QACA,KAAKoI,OAAL,CAAa,iBAAb,EAAgCpI,GAAhC;MACD;MACD;AACN;AACA;AACA;AACA;;IAXO,CA9ekB,EA2flB;MACD3F,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAAS+M,OAAT,CAAiBjB,MAAjB,EAAyBC,WAAzB,EAAsC;QAC3C,IAAI,cAAc,KAAKS,UAAnB,IAAiC,WAAW,KAAKA,UAAjD,IAA+D,cAAc,KAAKA,UAAtF,EAAkG;UAChG;UACA,KAAKvB,cAAL,CAAoB,KAAKiM,gBAAzB,EAFgG,CAEpD;;UAE5C,KAAKE,SAAL,CAAe7N,kBAAf,CAAkC,OAAlC,EAJgG,CAIpD;;UAE5C,KAAK6N,SAAL,CAAevK,KAAf,GANgG,CAMxE;;UAExB,KAAKuK,SAAL,CAAe7N,kBAAf;;UAEA,IAAI,OAAOC,mBAAP,KAA+B,UAAnC,EAA+C;YAC7CA,mBAAmB,CAAC,cAAD,EAAiB,KAAK2N,yBAAtB,EAAiD,KAAjD,CAAnB;YACA3N,mBAAmB,CAAC,SAAD,EAAY,KAAK6N,oBAAjB,EAAuC,KAAvC,CAAnB;UACD,CAb+F,CAa9F;;;UAGF,KAAK7K,UAAL,GAAkB,QAAlB,CAhBgG,CAgBpE;;UAE5B,KAAKsK,EAAL,GAAU,IAAV,CAlBgG,CAkBhF;;UAEhB,KAAKjN,YAAL,CAAkB,OAAlB,EAA2BiC,MAA3B,EAAmCC,WAAnC,EApBgG,CAoB/C;UACjD;;UAEA,KAAKqK,WAAL,GAAmB,EAAnB;UACA,KAAKC,aAAL,GAAqB,CAArB;QACD;MACF;MACD;AACN;AACA;AACA;AACA;AACA;AACA;;IApCO,CA3fkB,EAiiBlB;MACDrX,GAAG,EAAE,gBADJ;MAEDgB,KAAK,EAAE,SAAS4Y,cAAT,CAAwB7B,QAAxB,EAAkC;QACvC,IAAIsC,gBAAgB,GAAG,EAAvB;QACA,IAAI7a,CAAC,GAAG,CAAR;QACA,IAAI8a,CAAC,GAAGvC,QAAQ,CAACtY,MAAjB;;QAEA,OAAOD,CAAC,GAAG8a,CAAX,EAAc9a,CAAC,EAAf,EAAmB;UACjB,IAAI,CAAC,KAAKsW,UAAL,CAAgBpT,OAAhB,CAAwBqV,QAAQ,CAACvY,CAAD,CAAhC,CAAL,EAA2C6a,gBAAgB,CAAChY,IAAjB,CAAsB0V,QAAQ,CAACvY,CAAD,CAA9B;QAC5C;;QAED,OAAO6a,gBAAP;MACD;IAZA,CAjiBkB,CAAT,CAAZ;;IAgjBA,OAAOlD,MAAP;EACD,CAxqB2B,CAwqB1BrN,OAxqB0B,CAA5B;;EAyqBAoN,QAAQ,CAAC5G,QAAT,GAAoBzG,UAApB;EAEAqN,QAAQ,CAAC5G,QAAT;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEE,SAASiK,GAAT,CAAajJ,GAAb,EAAkB;IAChB,IAAIS,IAAI,GAAGxR,SAAS,CAACd,MAAV,GAAmB,CAAnB,IAAwBc,SAAS,CAAC,CAAD,CAAT,KAAiBuC,SAAzC,GAAqDvC,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAA/E;IACA,IAAIia,GAAG,GAAGja,SAAS,CAACd,MAAV,GAAmB,CAAnB,GAAuBc,SAAS,CAAC,CAAD,CAAhC,GAAsCuC,SAAhD;IACA,IAAIlE,GAAG,GAAG0S,GAAV,CAHgB,CAGD;;IAEfkJ,GAAG,GAAGA,GAAG,IAAI,OAAOpK,QAAP,KAAoB,WAApB,IAAmCA,QAAhD;IACA,IAAI,QAAQkB,GAAZ,EAAiBA,GAAG,GAAGkJ,GAAG,CAAClK,QAAJ,GAAe,IAAf,GAAsBkK,GAAG,CAAChE,IAAhC,CAND,CAMuC;;IAEvD,IAAI,OAAOlF,GAAP,KAAe,QAAnB,EAA6B;MAC3B,IAAI,QAAQA,GAAG,CAAC1I,MAAJ,CAAW,CAAX,CAAZ,EAA2B;QACzB,IAAI,QAAQ0I,GAAG,CAAC1I,MAAJ,CAAW,CAAX,CAAZ,EAA2B;UACzB0I,GAAG,GAAGkJ,GAAG,CAAClK,QAAJ,GAAegB,GAArB;QACD,CAFD,MAEO;UACLA,GAAG,GAAGkJ,GAAG,CAAChE,IAAJ,GAAWlF,GAAjB;QACD;MACF;;MAED,IAAI,CAAC,sBAAsBzM,IAAtB,CAA2ByM,GAA3B,CAAL,EAAsC;QACpC,IAAI,gBAAgB,OAAOkJ,GAA3B,EAAgC;UAC9BlJ,GAAG,GAAGkJ,GAAG,CAAClK,QAAJ,GAAe,IAAf,GAAsBgB,GAA5B;QACD,CAFD,MAEO;UACLA,GAAG,GAAG,aAAaA,GAAnB;QACD;MACF,CAf0B,CAezB;;;MAGF1S,GAAG,GAAGsX,KAAK,CAAC5E,GAAD,CAAX;IACD,CA3Be,CA2Bd;;;IAGF,IAAI,CAAC1S,GAAG,CAAC2R,IAAT,EAAe;MACb,IAAI,cAAc1L,IAAd,CAAmBjG,GAAG,CAAC0R,QAAvB,CAAJ,EAAsC;QACpC1R,GAAG,CAAC2R,IAAJ,GAAW,IAAX;MACD,CAFD,MAEO,IAAI,eAAe1L,IAAf,CAAoBjG,GAAG,CAAC0R,QAAxB,CAAJ,EAAuC;QAC5C1R,GAAG,CAAC2R,IAAJ,GAAW,KAAX;MACD;IACF;;IAED3R,GAAG,CAACmT,IAAJ,GAAWnT,GAAG,CAACmT,IAAJ,IAAY,GAAvB;IACA,IAAID,IAAI,GAAGlT,GAAG,CAAC4X,IAAJ,CAAS9T,OAAT,CAAiB,GAAjB,MAA0B,CAAC,CAAtC;IACA,IAAI8T,IAAI,GAAG1E,IAAI,GAAG,MAAMlT,GAAG,CAAC4X,IAAV,GAAiB,GAApB,GAA0B5X,GAAG,CAAC4X,IAA7C,CAxCgB,CAwCmC;;IAEnD5X,GAAG,CAACkZ,EAAJ,GAASlZ,GAAG,CAAC0R,QAAJ,GAAe,KAAf,GAAuBkG,IAAvB,GAA8B,GAA9B,GAAoC5X,GAAG,CAAC2R,IAAxC,GAA+CwB,IAAxD,CA1CgB,CA0C8C;;IAE9DnT,GAAG,CAAC6b,IAAJ,GAAW7b,GAAG,CAAC0R,QAAJ,GAAe,KAAf,GAAuBkG,IAAvB,IAA+BgE,GAAG,IAAIA,GAAG,CAACjK,IAAJ,KAAa3R,GAAG,CAAC2R,IAAxB,GAA+B,EAA/B,GAAoC,MAAM3R,GAAG,CAAC2R,IAA7E,CAAX;IACA,OAAO3R,GAAP;EACD;;EAED,IAAI8b,qBAAqB,GAAG,OAAOjU,WAAP,KAAuB,UAAnD;;EAEA,IAAIE,MAAM,GAAG,SAASA,MAAT,CAAgB/H,GAAhB,EAAqB;IAChC,OAAO,OAAO6H,WAAW,CAACE,MAAnB,KAA8B,UAA9B,GAA2CF,WAAW,CAACE,MAAZ,CAAmB/H,GAAnB,CAA3C,GAAqEA,GAAG,CAACgI,MAAJ,YAAsBH,WAAlG;EACD,CAFD;;EAIA,IAAIhE,QAAQ,GAAG3C,MAAM,CAACd,SAAP,CAAiByD,QAAhC;EACA,IAAIkY,cAAc,GAAG,OAAOpU,IAAP,KAAgB,UAAhB,IAA8B,OAAOA,IAAP,KAAgB,WAAhB,IAA+B9D,QAAQ,CAAC/B,IAAT,CAAc6F,IAAd,MAAwB,0BAA1G;EACA,IAAIqU,cAAc,GAAG,OAAOC,IAAP,KAAgB,UAAhB,IAA8B,OAAOA,IAAP,KAAgB,WAAhB,IAA+BpY,QAAQ,CAAC/B,IAAT,CAAcma,IAAd,MAAwB,0BAA1G;EACA;AACF;AACA;AACA;AACA;;EAEE,SAASC,QAAT,CAAkBlc,GAAlB,EAAuB;IACrB,OAAO8b,qBAAqB,KAAK9b,GAAG,YAAY6H,WAAf,IAA8BE,MAAM,CAAC/H,GAAD,CAAzC,CAArB,IAAwE+b,cAAc,IAAI/b,GAAG,YAAY2H,IAAzG,IAAiHqU,cAAc,IAAIhc,GAAG,YAAYic,IAAzJ;EACD;;EACD,SAASE,SAAT,CAAmBnc,GAAnB,EAAwBoc,MAAxB,EAAgC;IAC9B,IAAI,CAACpc,GAAD,IAAQD,OAAO,CAACC,GAAD,CAAP,KAAiB,QAA7B,EAAuC;MACrC,OAAO,KAAP;IACD;;IAED,IAAI+F,KAAK,CAACS,OAAN,CAAcxG,GAAd,CAAJ,EAAwB;MACtB,KAAK,IAAIY,CAAC,GAAG,CAAR,EAAWkN,CAAC,GAAG9N,GAAG,CAACa,MAAxB,EAAgCD,CAAC,GAAGkN,CAApC,EAAuClN,CAAC,EAAxC,EAA4C;QAC1C,IAAIub,SAAS,CAACnc,GAAG,CAACY,CAAD,CAAJ,CAAb,EAAuB;UACrB,OAAO,IAAP;QACD;MACF;;MAED,OAAO,KAAP;IACD;;IAED,IAAIsb,QAAQ,CAAClc,GAAD,CAAZ,EAAmB;MACjB,OAAO,IAAP;IACD;;IAED,IAAIA,GAAG,CAACoc,MAAJ,IAAc,OAAOpc,GAAG,CAACoc,MAAX,KAAsB,UAApC,IAAkDza,SAAS,CAACd,MAAV,KAAqB,CAA3E,EAA8E;MAC5E,OAAOsb,SAAS,CAACnc,GAAG,CAACoc,MAAJ,EAAD,EAAe,IAAf,CAAhB;IACD;;IAED,KAAK,IAAIhb,GAAT,IAAgBpB,GAAhB,EAAqB;MACnB,IAAIkB,MAAM,CAACd,SAAP,CAAiByB,cAAjB,CAAgCC,IAAhC,CAAqC9B,GAArC,EAA0CoB,GAA1C,KAAkD+a,SAAS,CAACnc,GAAG,CAACoB,GAAD,CAAJ,CAA/D,EAA2E;QACzE,OAAO,IAAP;MACD;IACF;;IAED,OAAO,KAAP;EACD;EAED;AACF;AACA;AACA;AACA;AACA;AACA;;;EAEE,SAASib,iBAAT,CAA2BzR,MAA3B,EAAmC;IACjC,IAAI0R,OAAO,GAAG,EAAd;IACA,IAAIC,UAAU,GAAG3R,MAAM,CAACnD,IAAxB;IACA,IAAI+U,IAAI,GAAG5R,MAAX;IACA4R,IAAI,CAAC/U,IAAL,GAAYgV,kBAAkB,CAACF,UAAD,EAAaD,OAAb,CAA9B;IACAE,IAAI,CAACE,WAAL,GAAmBJ,OAAO,CAACzb,MAA3B,CALiC,CAKE;;IAEnC,OAAO;MACL+J,MAAM,EAAE4R,IADH;MAELF,OAAO,EAAEA;IAFJ,CAAP;EAID;;EAED,SAASG,kBAAT,CAA4BhV,IAA5B,EAAkC6U,OAAlC,EAA2C;IACzC,IAAI,CAAC7U,IAAL,EAAW,OAAOA,IAAP;;IAEX,IAAIyU,QAAQ,CAACzU,IAAD,CAAZ,EAAoB;MAClB,IAAIkV,WAAW,GAAG;QAChBC,YAAY,EAAE,IADE;QAEhB7M,GAAG,EAAEuM,OAAO,CAACzb;MAFG,CAAlB;MAIAyb,OAAO,CAAC7Y,IAAR,CAAagE,IAAb;MACA,OAAOkV,WAAP;IACD,CAPD,MAOO,IAAI5W,KAAK,CAACS,OAAN,CAAciB,IAAd,CAAJ,EAAyB;MAC9B,IAAIoV,OAAO,GAAG,IAAI9W,KAAJ,CAAU0B,IAAI,CAAC5G,MAAf,CAAd;;MAEA,KAAK,IAAID,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6G,IAAI,CAAC5G,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;QACpCic,OAAO,CAACjc,CAAD,CAAP,GAAa6b,kBAAkB,CAAChV,IAAI,CAAC7G,CAAD,CAAL,EAAU0b,OAAV,CAA/B;MACD;;MAED,OAAOO,OAAP;IACD,CARM,MAQA,IAAI9c,OAAO,CAAC0H,IAAD,CAAP,KAAkB,QAAlB,IAA8B,EAAEA,IAAI,YAAY2I,IAAlB,CAAlC,EAA2D;MAChE,IAAI0M,QAAQ,GAAG,EAAf;;MAEA,KAAK,IAAI1b,GAAT,IAAgBqG,IAAhB,EAAsB;QACpB,IAAIvG,MAAM,CAACd,SAAP,CAAiByB,cAAjB,CAAgCC,IAAhC,CAAqC2F,IAArC,EAA2CrG,GAA3C,CAAJ,EAAqD;UACnD0b,QAAQ,CAAC1b,GAAD,CAAR,GAAgBqb,kBAAkB,CAAChV,IAAI,CAACrG,GAAD,CAAL,EAAYkb,OAAZ,CAAlC;QACD;MACF;;MAED,OAAOQ,QAAP;IACD;;IAED,OAAOrV,IAAP;EACD;EACD;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;;EAGE,SAASsV,iBAAT,CAA2BnS,MAA3B,EAAmC0R,OAAnC,EAA4C;IAC1C1R,MAAM,CAACnD,IAAP,GAAcuV,kBAAkB,CAACpS,MAAM,CAACnD,IAAR,EAAc6U,OAAd,CAAhC;IACA1R,MAAM,CAAC8R,WAAP,GAAqBxY,SAArB,CAF0C,CAEV;;IAEhC,OAAO0G,MAAP;EACD;;EAED,SAASoS,kBAAT,CAA4BvV,IAA5B,EAAkC6U,OAAlC,EAA2C;IACzC,IAAI,CAAC7U,IAAL,EAAW,OAAOA,IAAP;;IAEX,IAAIA,IAAI,IAAIA,IAAI,CAACmV,YAAL,KAAsB,IAAlC,EAAwC;MACtC,IAAIK,YAAY,GAAG,OAAOxV,IAAI,CAACsI,GAAZ,KAAoB,QAApB,IAAgCtI,IAAI,CAACsI,GAAL,IAAY,CAA5C,IAAiDtI,IAAI,CAACsI,GAAL,GAAWuM,OAAO,CAACzb,MAAvF;;MAEA,IAAIoc,YAAJ,EAAkB;QAChB,OAAOX,OAAO,CAAC7U,IAAI,CAACsI,GAAN,CAAd,CADgB,CACU;MAC3B,CAFD,MAEO;QACL,MAAM,IAAIzB,KAAJ,CAAU,qBAAV,CAAN;MACD;IACF,CARD,MAQO,IAAIvI,KAAK,CAACS,OAAN,CAAciB,IAAd,CAAJ,EAAyB;MAC9B,KAAK,IAAI7G,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6G,IAAI,CAAC5G,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;QACpC6G,IAAI,CAAC7G,CAAD,CAAJ,GAAUoc,kBAAkB,CAACvV,IAAI,CAAC7G,CAAD,CAAL,EAAU0b,OAAV,CAA5B;MACD;IACF,CAJM,MAIA,IAAIvc,OAAO,CAAC0H,IAAD,CAAP,KAAkB,QAAtB,EAAgC;MACrC,KAAK,IAAIrG,GAAT,IAAgBqG,IAAhB,EAAsB;QACpB,IAAIvG,MAAM,CAACd,SAAP,CAAiByB,cAAjB,CAAgCC,IAAhC,CAAqC2F,IAArC,EAA2CrG,GAA3C,CAAJ,EAAqD;UACnDqG,IAAI,CAACrG,GAAD,CAAJ,GAAY4b,kBAAkB,CAACvV,IAAI,CAACrG,GAAD,CAAL,EAAYkb,OAAZ,CAA9B;QACD;MACF;IACF;;IAED,OAAO7U,IAAP;EACD;EAED;AACF;AACA;AACA;AACA;;;EAEE,IAAIiK,QAAQ,GAAG,CAAf;EACA,IAAIwL,UAAJ;;EAEA,CAAC,UAAUA,UAAV,EAAsB;IACrBA,UAAU,CAACA,UAAU,CAAC,SAAD,CAAV,GAAwB,CAAzB,CAAV,GAAwC,SAAxC;IACAA,UAAU,CAACA,UAAU,CAAC,YAAD,CAAV,GAA2B,CAA5B,CAAV,GAA2C,YAA3C;IACAA,UAAU,CAACA,UAAU,CAAC,OAAD,CAAV,GAAsB,CAAvB,CAAV,GAAsC,OAAtC;IACAA,UAAU,CAACA,UAAU,CAAC,KAAD,CAAV,GAAoB,CAArB,CAAV,GAAoC,KAApC;IACAA,UAAU,CAACA,UAAU,CAAC,eAAD,CAAV,GAA8B,CAA/B,CAAV,GAA8C,eAA9C;IACAA,UAAU,CAACA,UAAU,CAAC,cAAD,CAAV,GAA6B,CAA9B,CAAV,GAA6C,cAA7C;IACAA,UAAU,CAACA,UAAU,CAAC,YAAD,CAAV,GAA2B,CAA5B,CAAV,GAA2C,YAA3C;EACD,CARD,EAQGA,UAAU,KAAKA,UAAU,GAAG,EAAlB,CARb;EASA;AACF;AACA;;;EAGE,IAAIC,OAAO,GAAG,aAAa,YAAY;IACrC;AACJ;AACA;AACA;AACA;IACI,SAASA,OAAT,CAAiBC,QAAjB,EAA2B;MACzB/c,eAAe,CAAC,IAAD,EAAO8c,OAAP,CAAf;;MAEA,KAAKC,QAAL,GAAgBA,QAAhB;IACD;IACD;AACJ;AACA;AACA;AACA;AACA;;;IAGI/b,YAAY,CAAC8b,OAAD,EAAU,CAAC;MACrB/b,GAAG,EAAE,QADgB;MAErBgB,KAAK,EAAE,SAASiO,MAAT,CAAgBrQ,GAAhB,EAAqB;QAC1B,IAAIA,GAAG,CAACwH,IAAJ,KAAa0V,UAAU,CAACG,KAAxB,IAAiCrd,GAAG,CAACwH,IAAJ,KAAa0V,UAAU,CAACI,GAA7D,EAAkE;UAChE,IAAInB,SAAS,CAACnc,GAAD,CAAb,EAAoB;YAClBA,GAAG,CAACwH,IAAJ,GAAWxH,GAAG,CAACwH,IAAJ,KAAa0V,UAAU,CAACG,KAAxB,GAAgCH,UAAU,CAACK,YAA3C,GAA0DL,UAAU,CAACM,UAAhF;YACA,OAAO,KAAKC,cAAL,CAAoBzd,GAApB,CAAP;UACD;QACF;;QAED,OAAO,CAAC,KAAK0d,cAAL,CAAoB1d,GAApB,CAAD,CAAP;MACD;MACD;AACN;AACA;;IAd2B,CAAD,EAgBnB;MACDoB,GAAG,EAAE,gBADJ;MAEDgB,KAAK,EAAE,SAASsb,cAAT,CAAwB1d,GAAxB,EAA6B;QAClC;QACA,IAAI4N,GAAG,GAAG,KAAK5N,GAAG,CAACwH,IAAnB,CAFkC,CAET;;QAEzB,IAAIxH,GAAG,CAACwH,IAAJ,KAAa0V,UAAU,CAACK,YAAxB,IAAwCvd,GAAG,CAACwH,IAAJ,KAAa0V,UAAU,CAACM,UAApE,EAAgF;UAC9E5P,GAAG,IAAI5N,GAAG,CAAC0c,WAAJ,GAAkB,GAAzB;QACD,CANiC,CAMhC;QACF;;;QAGA,IAAI1c,GAAG,CAAC2d,GAAJ,IAAW,QAAQ3d,GAAG,CAAC2d,GAA3B,EAAgC;UAC9B/P,GAAG,IAAI5N,GAAG,CAAC2d,GAAJ,GAAU,GAAjB;QACD,CAZiC,CAYhC;;;QAGF,IAAI,QAAQ3d,GAAG,CAACkZ,EAAhB,EAAoB;UAClBtL,GAAG,IAAI5N,GAAG,CAACkZ,EAAX;QACD,CAjBiC,CAiBhC;;;QAGF,IAAI,QAAQlZ,GAAG,CAACyH,IAAhB,EAAsB;UACpBmG,GAAG,IAAIgN,IAAI,CAACgD,SAAL,CAAe5d,GAAG,CAACyH,IAAnB,EAAyB,KAAK2V,QAA9B,CAAP;QACD;;QAED,OAAOxP,GAAP;MACD;MACD;AACN;AACA;AACA;AACA;;IAhCO,CAhBmB,EAkDnB;MACDxM,GAAG,EAAE,gBADJ;MAEDgB,KAAK,EAAE,SAASqb,cAAT,CAAwBzd,GAAxB,EAA6B;QAClC,IAAI6d,cAAc,GAAGxB,iBAAiB,CAACrc,GAAD,CAAtC;QACA,IAAIwc,IAAI,GAAG,KAAKkB,cAAL,CAAoBG,cAAc,CAACjT,MAAnC,CAAX;QACA,IAAI0R,OAAO,GAAGuB,cAAc,CAACvB,OAA7B;QACAA,OAAO,CAACwB,OAAR,CAAgBtB,IAAhB,EAJkC,CAIX;;QAEvB,OAAOF,OAAP,CANkC,CAMlB;MACjB;IATA,CAlDmB,CAAV,CAAZ;;IA8DA,OAAOa,OAAP;EACD,CAlF0B,EAA3B;EAmFA;AACF;AACA;AACA;AACA;;;EAEE,IAAIY,OAAO,GAAG,aAAa,UAAUvP,QAAV,EAAoB;IAC7CxM,SAAS,CAAC+b,OAAD,EAAUvP,QAAV,CAAT;;IAEA,IAAIP,MAAM,GAAGvJ,YAAY,CAACqZ,OAAD,CAAzB;IAEA;AACJ;AACA;AACA;AACA;;;IACI,SAASA,OAAT,CAAiBC,OAAjB,EAA0B;MACxB,IAAI3P,KAAJ;;MAEAhO,eAAe,CAAC,IAAD,EAAO0d,OAAP,CAAf;;MAEA1P,KAAK,GAAGJ,MAAM,CAACnM,IAAP,CAAY,IAAZ,CAAR;MACAuM,KAAK,CAAC2P,OAAN,GAAgBA,OAAhB;MACA,OAAO3P,KAAP;IACD;IACD;AACJ;AACA;AACA;AACA;;;IAGIhN,YAAY,CAAC0c,OAAD,EAAU,CAAC;MACrB3c,GAAG,EAAE,KADgB;MAErBgB,KAAK,EAAE,SAAS6b,GAAT,CAAaje,GAAb,EAAkB;QACvB,IAAI4K,MAAJ;;QAEA,IAAI,OAAO5K,GAAP,KAAe,QAAnB,EAA6B;UAC3B,IAAI,KAAKke,aAAT,EAAwB;YACtB,MAAM,IAAI5P,KAAJ,CAAU,iDAAV,CAAN;UACD;;UAED1D,MAAM,GAAG,KAAKuT,YAAL,CAAkBne,GAAlB,CAAT;;UAEA,IAAI4K,MAAM,CAACpD,IAAP,KAAgB0V,UAAU,CAACK,YAA3B,IAA2C3S,MAAM,CAACpD,IAAP,KAAgB0V,UAAU,CAACM,UAA1E,EAAsF;YACpF;YACA,KAAKU,aAAL,GAAqB,IAAIE,mBAAJ,CAAwBxT,MAAxB,CAArB,CAFoF,CAE9B;;YAEtD,IAAIA,MAAM,CAAC8R,WAAP,KAAuB,CAA3B,EAA8B;cAC5BtX,IAAI,CAAC9C,eAAe,CAACyb,OAAO,CAAC3d,SAAT,CAAhB,EAAqC,cAArC,EAAqD,IAArD,CAAJ,CAA+D0B,IAA/D,CAAoE,IAApE,EAA0E,SAA1E,EAAqF8I,MAArF;YACD;UACF,CAPD,MAOO;YACL;YACAxF,IAAI,CAAC9C,eAAe,CAACyb,OAAO,CAAC3d,SAAT,CAAhB,EAAqC,cAArC,EAAqD,IAArD,CAAJ,CAA+D0B,IAA/D,CAAoE,IAApE,EAA0E,SAA1E,EAAqF8I,MAArF;UACD;QACF,CAlBD,MAkBO,IAAIsR,QAAQ,CAAClc,GAAD,CAAR,IAAiBA,GAAG,CAACmJ,MAAzB,EAAiC;UACtC;UACA,IAAI,CAAC,KAAK+U,aAAV,EAAyB;YACvB,MAAM,IAAI5P,KAAJ,CAAU,kDAAV,CAAN;UACD,CAFD,MAEO;YACL1D,MAAM,GAAG,KAAKsT,aAAL,CAAmBG,cAAnB,CAAkCre,GAAlC,CAAT;;YAEA,IAAI4K,MAAJ,EAAY;cACV;cACA,KAAKsT,aAAL,GAAqB,IAArB;;cAEA9Y,IAAI,CAAC9C,eAAe,CAACyb,OAAO,CAAC3d,SAAT,CAAhB,EAAqC,cAArC,EAAqD,IAArD,CAAJ,CAA+D0B,IAA/D,CAAoE,IAApE,EAA0E,SAA1E,EAAqF8I,MAArF;YACD;UACF;QACF,CAdM,MAcA;UACL,MAAM,IAAI0D,KAAJ,CAAU,mBAAmBtO,GAA7B,CAAN;QACD;MACF;MACD;AACN;AACA;AACA;AACA;AACA;;IA9C2B,CAAD,EAgDnB;MACDoB,GAAG,EAAE,cADJ;MAEDgB,KAAK,EAAE,SAAS+b,YAAT,CAAsBvQ,GAAtB,EAA2B;QAChC,IAAIhN,CAAC,GAAG,CAAR,CADgC,CACrB;;QAEX,IAAI+B,CAAC,GAAG;UACN6E,IAAI,EAAEwL,MAAM,CAACpF,GAAG,CAAC5D,MAAJ,CAAW,CAAX,CAAD;QADN,CAAR;;QAIA,IAAIkT,UAAU,CAACva,CAAC,CAAC6E,IAAH,CAAV,KAAuBtD,SAA3B,EAAsC;UACpC,MAAM,IAAIoK,KAAJ,CAAU,yBAAyB3L,CAAC,CAAC6E,IAArC,CAAN;QACD,CAT+B,CAS9B;;;QAGF,IAAI7E,CAAC,CAAC6E,IAAF,KAAW0V,UAAU,CAACK,YAAtB,IAAsC5a,CAAC,CAAC6E,IAAF,KAAW0V,UAAU,CAACM,UAAhE,EAA4E;UAC1E,IAAIc,KAAK,GAAG1d,CAAC,GAAG,CAAhB;;UAEA,OAAOgN,GAAG,CAAC5D,MAAJ,CAAW,EAAEpJ,CAAb,MAAoB,GAApB,IAA2BA,CAAC,IAAIgN,GAAG,CAAC/M,MAA3C,EAAmD,CAAE;;UAErD,IAAI0d,GAAG,GAAG3Q,GAAG,CAAC1D,SAAJ,CAAcoU,KAAd,EAAqB1d,CAArB,CAAV;;UAEA,IAAI2d,GAAG,IAAIvL,MAAM,CAACuL,GAAD,CAAb,IAAsB3Q,GAAG,CAAC5D,MAAJ,CAAWpJ,CAAX,MAAkB,GAA5C,EAAiD;YAC/C,MAAM,IAAI0N,KAAJ,CAAU,qBAAV,CAAN;UACD;;UAED3L,CAAC,CAAC+Z,WAAF,GAAgB1J,MAAM,CAACuL,GAAD,CAAtB;QACD,CAxB+B,CAwB9B;;;QAGF,IAAI,QAAQ3Q,GAAG,CAAC5D,MAAJ,CAAWpJ,CAAC,GAAG,CAAf,CAAZ,EAA+B;UAC7B,IAAI4d,MAAM,GAAG5d,CAAC,GAAG,CAAjB;;UAEA,OAAO,EAAEA,CAAT,EAAY;YACV,IAAIiN,CAAC,GAAGD,GAAG,CAAC5D,MAAJ,CAAWpJ,CAAX,CAAR;YACA,IAAI,QAAQiN,CAAZ,EAAe;YACf,IAAIjN,CAAC,KAAKgN,GAAG,CAAC/M,MAAd,EAAsB;UACvB;;UAED8B,CAAC,CAACgb,GAAF,GAAQ/P,GAAG,CAAC1D,SAAJ,CAAcsU,MAAd,EAAsB5d,CAAtB,CAAR;QACD,CAVD,MAUO;UACL+B,CAAC,CAACgb,GAAF,GAAQ,GAAR;QACD,CAvC+B,CAuC9B;;;QAGF,IAAI1W,IAAI,GAAG2G,GAAG,CAAC5D,MAAJ,CAAWpJ,CAAC,GAAG,CAAf,CAAX;;QAEA,IAAI,OAAOqG,IAAP,IAAe+L,MAAM,CAAC/L,IAAD,CAAN,IAAgBA,IAAnC,EAAyC;UACvC,IAAIwX,OAAO,GAAG7d,CAAC,GAAG,CAAlB;;UAEA,OAAO,EAAEA,CAAT,EAAY;YACV,IAAI8d,EAAE,GAAG9Q,GAAG,CAAC5D,MAAJ,CAAWpJ,CAAX,CAAT;;YAEA,IAAI,QAAQ8d,EAAR,IAAc1L,MAAM,CAAC0L,EAAD,CAAN,IAAcA,EAAhC,EAAoC;cAClC,EAAE9d,CAAF;cACA;YACD;;YAED,IAAIA,CAAC,KAAKgN,GAAG,CAAC/M,MAAd,EAAsB;UACvB;;UAED8B,CAAC,CAACuW,EAAF,GAAOlG,MAAM,CAACpF,GAAG,CAAC1D,SAAJ,CAAcuU,OAAd,EAAuB7d,CAAC,GAAG,CAA3B,CAAD,CAAb;QACD,CA3D+B,CA2D9B;;;QAGF,IAAIgN,GAAG,CAAC5D,MAAJ,CAAW,EAAEpJ,CAAb,CAAJ,EAAqB;UACnB,IAAI+d,OAAO,GAAG,KAAKC,QAAL,CAAchR,GAAG,CAACiR,MAAJ,CAAWje,CAAX,CAAd,CAAd;;UAEA,IAAImd,OAAO,CAACe,cAAR,CAAuBnc,CAAC,CAAC6E,IAAzB,EAA+BmX,OAA/B,CAAJ,EAA6C;YAC3Chc,CAAC,CAAC8E,IAAF,GAASkX,OAAT;UACD,CAFD,MAEO;YACL,MAAM,IAAIrQ,KAAJ,CAAU,iBAAV,CAAN;UACD;QACF;;QAED,OAAO3L,CAAP;MACD;IA3EA,CAhDmB,EA4HnB;MACDvB,GAAG,EAAE,UADJ;MAEDgB,KAAK,EAAE,SAASwc,QAAT,CAAkBhR,GAAlB,EAAuB;QAC5B,IAAI;UACF,OAAOgN,IAAI,CAACtD,KAAL,CAAW1J,GAAX,EAAgB,KAAKoQ,OAArB,CAAP;QACD,CAFD,CAEE,OAAO7a,CAAP,EAAU;UACV,OAAO,KAAP;QACD;MACF;IARA,CA5HmB,EAqInB;MACD/B,GAAG,EAAE,SADJ;MAEDgB,KAAK;MACL;AACN;AACA;MACM,SAAS2c,OAAT,GAAmB;QACjB,IAAI,KAAKb,aAAT,EAAwB;UACtB,KAAKA,aAAL,CAAmBc,sBAAnB;QACD;MACF;IAVA,CArImB,CAAV,EAgJR,CAAC;MACH5d,GAAG,EAAE,gBADF;MAEHgB,KAAK,EAAE,SAAS0c,cAAT,CAAwBtX,IAAxB,EAA8BmX,OAA9B,EAAuC;QAC5C,QAAQnX,IAAR;UACE,KAAK0V,UAAU,CAAC+B,OAAhB;YACE,OAAOlf,OAAO,CAAC4e,OAAD,CAAP,KAAqB,QAA5B;;UAEF,KAAKzB,UAAU,CAACgC,UAAhB;YACE,OAAOP,OAAO,KAAKza,SAAnB;;UAEF,KAAKgZ,UAAU,CAACiC,aAAhB;YACE,OAAO,OAAOR,OAAP,KAAmB,QAAnB,IAA+B5e,OAAO,CAAC4e,OAAD,CAAP,KAAqB,QAA3D;;UAEF,KAAKzB,UAAU,CAACG,KAAhB;UACA,KAAKH,UAAU,CAACK,YAAhB;YACE,OAAOxX,KAAK,CAACS,OAAN,CAAcmY,OAAd,KAA0BA,OAAO,CAAC9d,MAAR,GAAiB,CAAlD;;UAEF,KAAKqc,UAAU,CAACI,GAAhB;UACA,KAAKJ,UAAU,CAACM,UAAhB;YACE,OAAOzX,KAAK,CAACS,OAAN,CAAcmY,OAAd,CAAP;QAhBJ;MAkBD;IArBE,CAAD,CAhJQ,CAAZ;;IAwKA,OAAOZ,OAAP;EACD,CAnM0B,CAmMzB7S,OAnMyB,CAA3B;EAoMA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;;EAEE,IAAIkT,mBAAmB,GAAG,aAAa,YAAY;IACjD,SAASA,mBAAT,CAA6BxT,MAA7B,EAAqC;MACnCvK,eAAe,CAAC,IAAD,EAAO+d,mBAAP,CAAf;;MAEA,KAAKxT,MAAL,GAAcA,MAAd;MACA,KAAK0R,OAAL,GAAe,EAAf;MACA,KAAK8C,SAAL,GAAiBxU,MAAjB;IACD;IACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;IAGIvJ,YAAY,CAAC+c,mBAAD,EAAsB,CAAC;MACjChd,GAAG,EAAE,gBAD4B;MAEjCgB,KAAK,EAAE,SAASic,cAAT,CAAwBgB,OAAxB,EAAiC;QACtC,KAAK/C,OAAL,CAAa7Y,IAAb,CAAkB4b,OAAlB;;QAEA,IAAI,KAAK/C,OAAL,CAAazb,MAAb,KAAwB,KAAKue,SAAL,CAAe1C,WAA3C,EAAwD;UACtD;UACA,IAAI9R,MAAM,GAAGmS,iBAAiB,CAAC,KAAKqC,SAAN,EAAiB,KAAK9C,OAAtB,CAA9B;UACA,KAAK0C,sBAAL;UACA,OAAOpU,MAAP;QACD;;QAED,OAAO,IAAP;MACD;MACD;AACN;AACA;;IAhBuC,CAAD,EAkB/B;MACDxJ,GAAG,EAAE,wBADJ;MAEDgB,KAAK,EAAE,SAAS4c,sBAAT,GAAkC;QACvC,KAAKI,SAAL,GAAiB,IAAjB;QACA,KAAK9C,OAAL,GAAe,EAAf;MACD;IALA,CAlB+B,CAAtB,CAAZ;;IA0BA,OAAO8B,mBAAP;EACD,CA7CsC,EAAvC;;EA+CA,IAAIkB,MAAM,GAAG,aAAape,MAAM,CAACqe,MAAP,CAAc;IACtC7c,SAAS,EAAE,IAD2B;IAEtCgP,QAAQ,EAAEA,QAF4B;;IAGtC,IAAIwL,UAAJ,GAAkB;MAAE,OAAOA,UAAP;IAAoB,CAHF;;IAItCC,OAAO,EAAEA,OAJ6B;IAKtCY,OAAO,EAAEA;EAL6B,CAAd,CAA1B;;EAQA,SAAS3S,EAAT,CAAYpL,GAAZ,EAAiB8W,EAAjB,EAAqBlT,EAArB,EAAyB;IACvB5D,GAAG,CAACoL,EAAJ,CAAO0L,EAAP,EAAWlT,EAAX;IACA,OAAO,SAAS4b,UAAT,GAAsB;MAC3Bxf,GAAG,CAACyL,GAAJ,CAAQqL,EAAR,EAAYlT,EAAZ;IACD,CAFD;EAGD;EAED;AACF;AACA;AACA;;;EAEE,IAAI6b,eAAe,GAAGve,MAAM,CAACqe,MAAP,CAAc;IAClCG,OAAO,EAAE,CADyB;IAElCC,aAAa,EAAE,CAFmB;IAGlCC,UAAU,EAAE,CAHsB;IAIlCC,aAAa,EAAE,CAJmB;IAKlC;IACAC,WAAW,EAAE,CANqB;IAOlCpU,cAAc,EAAE;EAPkB,CAAd,CAAtB;EASA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEE,IAAI6M,MAAM,GAAG,aAAa,UAAU/J,QAAV,EAAoB;IAC5CxM,SAAS,CAACuW,MAAD,EAAS/J,QAAT,CAAT;;IAEA,IAAIP,MAAM,GAAGvJ,YAAY,CAAC6T,MAAD,CAAzB;IAEA;AACJ;AACA;;;IACI,SAASA,MAAT,CAAgBzY,EAAhB,EAAoB6d,GAApB,EAAyBzQ,IAAzB,EAA+B;MAC7B,IAAImB,KAAJ;;MAEAhO,eAAe,CAAC,IAAD,EAAOkY,MAAP,CAAf;;MAEAlK,KAAK,GAAGJ,MAAM,CAACnM,IAAP,CAAY,IAAZ,CAAR;MACA;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;MAEMuM,KAAK,CAAC0R,SAAN,GAAkB,KAAlB;MACA;AACN;AACA;;MAEM1R,KAAK,CAAC2R,aAAN,GAAsB,EAAtB;MACA;AACN;AACA;;MAEM3R,KAAK,CAAC4R,UAAN,GAAmB,EAAnB;MACA5R,KAAK,CAAC6R,GAAN,GAAY,CAAZ;MACA7R,KAAK,CAAC8R,IAAN,GAAa,EAAb;MACA9R,KAAK,CAAC+R,KAAN,GAAc,EAAd;MACA/R,KAAK,CAACvO,EAAN,GAAWA,EAAX;MACAuO,KAAK,CAACsP,GAAN,GAAYA,GAAZ;;MAEA,IAAIzQ,IAAI,IAAIA,IAAI,CAACmT,IAAjB,EAAuB;QACrBhS,KAAK,CAACgS,IAAN,GAAanT,IAAI,CAACmT,IAAlB;MACD;;MAED,IAAIhS,KAAK,CAACvO,EAAN,CAASwgB,YAAb,EAA2BjS,KAAK,CAACU,IAAN;MAC3B,OAAOV,KAAP;IACD;IACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;IAGIhN,YAAY,CAACkX,MAAD,EAAS,CAAC;MACpBnX,GAAG,EAAE,cADe;MAEpBgD,GAAG,EAAE,SAASA,GAAT,GAAe;QAClB,OAAO,CAAC,KAAK2b,SAAb;MACD;MACD;AACN;AACA;AACA;AACA;;IAT0B,CAAD,EAWlB;MACD3e,GAAG,EAAE,WADJ;MAEDgB,KAAK,EAAE,SAASme,SAAT,GAAqB;QAC1B,IAAI,KAAKC,IAAT,EAAe;QACf,IAAI1gB,EAAE,GAAG,KAAKA,EAAd;QACA,KAAK0gB,IAAL,GAAY,CAACpV,EAAE,CAACtL,EAAD,EAAK,MAAL,EAAa,KAAKyW,MAAL,CAAY7U,IAAZ,CAAiB,IAAjB,CAAb,CAAH,EAAyC0J,EAAE,CAACtL,EAAD,EAAK,QAAL,EAAe,KAAK2gB,QAAL,CAAc/e,IAAd,CAAmB,IAAnB,CAAf,CAA3C,EAAqF0J,EAAE,CAACtL,EAAD,EAAK,OAAL,EAAc,KAAKiX,OAAL,CAAarV,IAAb,CAAkB,IAAlB,CAAd,CAAvF,EAA+H0J,EAAE,CAACtL,EAAD,EAAK,OAAL,EAAc,KAAK6W,OAAL,CAAajV,IAAb,CAAkB,IAAlB,CAAd,CAAjI,CAAZ;MACD;MACD;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAvBO,CAXkB,EAoClB;MACDN,GAAG,EAAE,QADJ;MAEDgD,GAAG,EAAE,SAASA,GAAT,GAAe;QAClB,OAAO,CAAC,CAAC,KAAKoc,IAAd;MACD;MACD;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAdO,CApCkB,EAoDlB;MACDpf,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAASsd,OAAT,GAAmB;QACxB,IAAI,KAAKK,SAAT,EAAoB,OAAO,IAAP;QACpB,KAAKQ,SAAL;QACA,IAAI,CAAC,KAAKzgB,EAAL,CAAQ,eAAR,CAAL,EAA+B,KAAKA,EAAL,CAAQiP,IAAR,GAHP,CAGuB;;QAE/C,IAAI,WAAW,KAAKjP,EAAL,CAAQ4gB,WAAvB,EAAoC,KAAKnK,MAAL;QACpC,OAAO,IAAP;MACD;MACD;AACN;AACA;;IAZO,CApDkB,EAkElB;MACDnV,GAAG,EAAE,MADJ;MAEDgB,KAAK,EAAE,SAAS2M,IAAT,GAAgB;QACrB,OAAO,KAAK2Q,OAAL,EAAP;MACD;MACD;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAnBO,CAlEkB,EAuFlB;MACDte,GAAG,EAAE,MADJ;MAEDgB,KAAK,EAAE,SAASgN,IAAT,GAAgB;QACrB,KAAK,IAAI7C,IAAI,GAAG5K,SAAS,CAACd,MAArB,EAA6ByC,IAAI,GAAG,IAAIyC,KAAJ,CAAUwG,IAAV,CAApC,EAAqDE,IAAI,GAAG,CAAjE,EAAoEA,IAAI,GAAGF,IAA3E,EAAiFE,IAAI,EAArF,EAAyF;UACvFnJ,IAAI,CAACmJ,IAAD,CAAJ,GAAa9K,SAAS,CAAC8K,IAAD,CAAtB;QACD;;QAEDnJ,IAAI,CAACwa,OAAL,CAAa,SAAb;QACA,KAAK9R,IAAL,CAAUjK,KAAV,CAAgB,IAAhB,EAAsBuB,IAAtB;QACA,OAAO,IAAP;MACD;MACD;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IA3BO,CAvFkB,EAoHlB;MACDlC,GAAG,EAAE,MADJ;MAEDgB,KAAK,EAAE,SAAS4J,IAAT,CAAc8K,EAAd,EAAkB;QACvB,IAAI2I,eAAe,CAAC5d,cAAhB,CAA+BiV,EAA/B,CAAJ,EAAwC;UACtC,MAAM,IAAIxI,KAAJ,CAAU,MAAMwI,EAAE,CAACjT,QAAH,EAAN,GAAsB,4BAAhC,CAAN;QACD;;QAED,KAAK,IAAI8c,KAAK,GAAGhf,SAAS,CAACd,MAAtB,EAA8ByC,IAAI,GAAG,IAAIyC,KAAJ,CAAU4a,KAAK,GAAG,CAAR,GAAYA,KAAK,GAAG,CAApB,GAAwB,CAAlC,CAArC,EAA2EC,KAAK,GAAG,CAAxF,EAA2FA,KAAK,GAAGD,KAAnG,EAA0GC,KAAK,EAA/G,EAAmH;UACjHtd,IAAI,CAACsd,KAAK,GAAG,CAAT,CAAJ,GAAkBjf,SAAS,CAACif,KAAD,CAA3B;QACD;;QAEDtd,IAAI,CAACwa,OAAL,CAAahH,EAAb;QACA,IAAIlM,MAAM,GAAG;UACXpD,IAAI,EAAE0V,UAAU,CAACG,KADN;UAEX5V,IAAI,EAAEnE;QAFK,CAAb;QAIAsH,MAAM,CAACyQ,OAAP,GAAiB,EAAjB;QACAzQ,MAAM,CAACyQ,OAAP,CAAeC,QAAf,GAA0B,KAAK8E,KAAL,CAAW9E,QAAX,KAAwB,KAAlD,CAfuB,CAekC;;QAEzD,IAAI,eAAe,OAAOhY,IAAI,CAACA,IAAI,CAACzC,MAAL,GAAc,CAAf,CAA9B,EAAiD;UAC/C,IAAIqY,EAAE,GAAG,KAAKgH,GAAL,EAAT;UACA,IAAIW,GAAG,GAAGvd,IAAI,CAACwd,GAAL,EAAV;;UAEA,KAAKC,oBAAL,CAA0B7H,EAA1B,EAA8B2H,GAA9B;;UAEAjW,MAAM,CAACsO,EAAP,GAAYA,EAAZ;QACD;;QAED,IAAI8H,mBAAmB,GAAG,KAAKlhB,EAAL,CAAQmhB,MAAR,IAAkB,KAAKnhB,EAAL,CAAQmhB,MAAR,CAAezH,SAAjC,IAA8C,KAAK1Z,EAAL,CAAQmhB,MAAR,CAAezH,SAAf,CAAyBvY,QAAjG;QACA,IAAIigB,aAAa,GAAG,KAAKd,KAAL,CAAW,UAAX,MAA2B,CAACY,mBAAD,IAAwB,CAAC,KAAKjB,SAAzD,CAApB;QAEA,IAAImB,aAAJ,EAAmB,CAAnB,KAA0B,IAAI,KAAKnB,SAAT,EAAoB;UAC5C,KAAKoB,uBAAL,CAA6BvW,MAA7B;UACA,KAAKA,MAAL,CAAYA,MAAZ;QACD,CAHyB,MAGnB;UACL,KAAKqV,UAAL,CAAgBxc,IAAhB,CAAqBmH,MAArB;QACD;QAED,KAAKwV,KAAL,GAAa,EAAb;QACA,OAAO,IAAP;MACD;MACD;AACN;AACA;;IA3CO,CApHkB,EAiKlB;MACDhf,GAAG,EAAE,sBADJ;MAEDgB,KAAK,EAAE,SAAS2e,oBAAT,CAA8B7H,EAA9B,EAAkC2H,GAAlC,EAAuC;QAC5C,IAAInS,MAAM,GAAG,IAAb;;QAEA,IAAI2F,OAAO,GAAG,KAAK+L,KAAL,CAAW/L,OAAzB;;QAEA,IAAIA,OAAO,KAAKnQ,SAAhB,EAA2B;UACzB,KAAKic,IAAL,CAAUjH,EAAV,IAAgB2H,GAAhB;UACA;QACD,CAR2C,CAQ1C;;;QAGF,IAAIO,KAAK,GAAG,KAAKthB,EAAL,CAAQsN,YAAR,CAAqB,YAAY;UAC3C,OAAOsB,MAAM,CAACyR,IAAP,CAAYjH,EAAZ,CAAP;;UAEA,KAAK,IAAItY,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8N,MAAM,CAACuR,UAAP,CAAkBpf,MAAtC,EAA8CD,CAAC,EAA/C,EAAmD;YACjD,IAAI8N,MAAM,CAACuR,UAAP,CAAkBrf,CAAlB,EAAqBsY,EAArB,KAA4BA,EAAhC,EAAoC;cAClCxK,MAAM,CAACuR,UAAP,CAAkBlU,MAAlB,CAAyBnL,CAAzB,EAA4B,CAA5B;YACD;UACF;;UAEDigB,GAAG,CAAC/e,IAAJ,CAAS4M,MAAT,EAAiB,IAAIJ,KAAJ,CAAU,yBAAV,CAAjB;QACD,CAVW,EAUT+F,OAVS,CAAZ;;QAYA,KAAK8L,IAAL,CAAUjH,EAAV,IAAgB,YAAY;UAC1B;UACAxK,MAAM,CAAC5O,EAAP,CAAUuN,cAAV,CAAyB+T,KAAzB;;UAEA,KAAK,IAAIC,KAAK,GAAG1f,SAAS,CAACd,MAAtB,EAA8ByC,IAAI,GAAG,IAAIyC,KAAJ,CAAUsb,KAAV,CAArC,EAAuDC,KAAK,GAAG,CAApE,EAAuEA,KAAK,GAAGD,KAA/E,EAAsFC,KAAK,EAA3F,EAA+F;YAC7Fhe,IAAI,CAACge,KAAD,CAAJ,GAAc3f,SAAS,CAAC2f,KAAD,CAAvB;UACD;;UAEDT,GAAG,CAAC9e,KAAJ,CAAU2M,MAAV,EAAkB,CAAC,IAAD,EAAOsC,MAAP,CAAc1N,IAAd,CAAlB;QACD,CATD;MAUD;MACD;AACN;AACA;AACA;AACA;AACA;;IAzCO,CAjKkB,EA4MlB;MACDlC,GAAG,EAAE,QADJ;MAEDgB,KAAK,EAAE,SAASwI,MAAT,CAAgB2W,OAAhB,EAAyB;QAC9BA,OAAO,CAAC5D,GAAR,GAAc,KAAKA,GAAnB;;QAEA,KAAK7d,EAAL,CAAQyhB,OAAR,CAAgBA,OAAhB;MACD;MACD;AACN;AACA;AACA;AACA;;IAXO,CA5MkB,EAyNlB;MACDngB,GAAG,EAAE,QADJ;MAEDgB,KAAK,EAAE,SAASmU,MAAT,GAAkB;QACvB,IAAIjE,MAAM,GAAG,IAAb;;QAEA,IAAI,OAAO,KAAK+N,IAAZ,IAAoB,UAAxB,EAAoC;UAClC,KAAKA,IAAL,CAAU,UAAU5Y,IAAV,EAAgB;YACxB6K,MAAM,CAAC1H,MAAP,CAAc;cACZpD,IAAI,EAAE0V,UAAU,CAAC+B,OADL;cAEZxX,IAAI,EAAEA;YAFM,CAAd;UAID,CALD;QAMD,CAPD,MAOO;UACL,KAAKmD,MAAL,CAAY;YACVpD,IAAI,EAAE0V,UAAU,CAAC+B,OADP;YAEVxX,IAAI,EAAE,KAAK4Y;UAFD,CAAZ;QAID;MACF;MACD;AACN;AACA;AACA;AACA;AACA;;IAxBO,CAzNkB,EAmPlB;MACDjf,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAAS2U,OAAT,CAAiBhQ,GAAjB,EAAsB;QAC3B,IAAI,CAAC,KAAKgZ,SAAV,EAAqB;UACnB,KAAK9T,YAAL,CAAkB,eAAlB,EAAmClF,GAAnC;QACD;MACF;MACD;AACN;AACA;AACA;AACA;AACA;AACA;;IAbO,CAnPkB,EAkQlB;MACD3F,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAASuU,OAAT,CAAiBzI,MAAjB,EAAyBC,WAAzB,EAAsC;QAC3C,KAAK4R,SAAL,GAAiB,KAAjB;QACA,OAAO,KAAK7G,EAAZ;QACA,KAAKjN,YAAL,CAAkB,YAAlB,EAAgCiC,MAAhC,EAAwCC,WAAxC;MACD;MACD;AACN;AACA;AACA;AACA;AACA;;IAZO,CAlQkB,EAgRlB;MACD/M,GAAG,EAAE,UADJ;MAEDgB,KAAK,EAAE,SAASqe,QAAT,CAAkB7V,MAAlB,EAA0B;QAC/B,IAAI4W,aAAa,GAAG5W,MAAM,CAAC+S,GAAP,KAAe,KAAKA,GAAxC;QACA,IAAI,CAAC6D,aAAL,EAAoB;;QAEpB,QAAQ5W,MAAM,CAACpD,IAAf;UACE,KAAK0V,UAAU,CAAC+B,OAAhB;YACE,IAAIrU,MAAM,CAACnD,IAAP,IAAemD,MAAM,CAACnD,IAAP,CAAYqL,GAA/B,EAAoC;cAClC,IAAIoG,EAAE,GAAGtO,MAAM,CAACnD,IAAP,CAAYqL,GAArB;cACA,KAAK2O,SAAL,CAAevI,EAAf;YACD,CAHD,MAGO;cACL,KAAKjN,YAAL,CAAkB,eAAlB,EAAmC,IAAIqC,KAAJ,CAAU,2LAAV,CAAnC;YACD;;YAED;;UAEF,KAAK4O,UAAU,CAACG,KAAhB;UACA,KAAKH,UAAU,CAACK,YAAhB;YACE,KAAKmE,OAAL,CAAa9W,MAAb;YACA;;UAEF,KAAKsS,UAAU,CAACI,GAAhB;UACA,KAAKJ,UAAU,CAACM,UAAhB;YACE,KAAKmE,KAAL,CAAW/W,MAAX;YACA;;UAEF,KAAKsS,UAAU,CAACgC,UAAhB;YACE,KAAK0C,YAAL;YACA;;UAEF,KAAK1E,UAAU,CAACiC,aAAhB;YACE,KAAKJ,OAAL;YACA,IAAIhY,GAAG,GAAG,IAAIuH,KAAJ,CAAU1D,MAAM,CAACnD,IAAP,CAAYoa,OAAtB,CAAV,CAFF,CAE4C;;YAE1C9a,GAAG,CAACU,IAAJ,GAAWmD,MAAM,CAACnD,IAAP,CAAYA,IAAvB;YACA,KAAKwE,YAAL,CAAkB,eAAlB,EAAmClF,GAAnC;YACA;QA/BJ;MAiCD;MACD;AACN;AACA;AACA;AACA;AACA;;IA7CO,CAhRkB,EA+TlB;MACD3F,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAASsf,OAAT,CAAiB9W,MAAjB,EAAyB;QAC9B,IAAItH,IAAI,GAAGsH,MAAM,CAACnD,IAAP,IAAe,EAA1B;;QAEA,IAAI,QAAQmD,MAAM,CAACsO,EAAnB,EAAuB;UACrB5V,IAAI,CAACG,IAAL,CAAU,KAAKod,GAAL,CAASjW,MAAM,CAACsO,EAAhB,CAAV;QACD;;QAED,IAAI,KAAK6G,SAAT,EAAoB;UAClB,KAAK+B,SAAL,CAAexe,IAAf;QACD,CAFD,MAEO;UACL,KAAK0c,aAAL,CAAmBvc,IAAnB,CAAwBvC,MAAM,CAACqe,MAAP,CAAcjc,IAAd,CAAxB;QACD;MACF;IAdA,CA/TkB,EA8UlB;MACDlC,GAAG,EAAE,WADJ;MAEDgB,KAAK,EAAE,SAAS0f,SAAT,CAAmBxe,IAAnB,EAAyB;QAC9B,IAAI,KAAKye,aAAL,IAAsB,KAAKA,aAAL,CAAmBlhB,MAA7C,EAAqD;UACnD,IAAIqL,SAAS,GAAG,KAAK6V,aAAL,CAAmBlc,KAAnB,EAAhB;;UAEA,IAAImc,SAAS,GAAG3b,0BAA0B,CAAC6F,SAAD,CAA1C;UAAA,IACI+V,KADJ;;UAGA,IAAI;YACF,KAAKD,SAAS,CAACtb,CAAV,EAAL,EAAoB,CAAC,CAACub,KAAK,GAAGD,SAAS,CAACpc,CAAV,EAAT,EAAwBe,IAA7C,GAAoD;cAClD,IAAIub,QAAQ,GAAGD,KAAK,CAAC7f,KAArB;cACA8f,QAAQ,CAACngB,KAAT,CAAe,IAAf,EAAqBuB,IAArB;YACD;UACF,CALD,CAKE,OAAOyD,GAAP,EAAY;YACZib,SAAS,CAAC7e,CAAV,CAAY4D,GAAZ;UACD,CAPD,SAOU;YACRib,SAAS,CAACpb,CAAV;UACD;QACF;;QAEDxB,IAAI,CAAC9C,eAAe,CAACiW,MAAM,CAACnY,SAAR,CAAhB,EAAoC,MAApC,EAA4C,IAA5C,CAAJ,CAAsD2B,KAAtD,CAA4D,IAA5D,EAAkEuB,IAAlE;MACD;MACD;AACN;AACA;AACA;AACA;;IA3BO,CA9UkB,EA2WlB;MACDlC,GAAG,EAAE,KADJ;MAEDgB,KAAK,EAAE,SAASye,GAAT,CAAa3H,EAAb,EAAiB;QACtB,IAAIrZ,IAAI,GAAG,IAAX;QACA,IAAIsiB,IAAI,GAAG,KAAX;QACA,OAAO,YAAY;UACjB;UACA,IAAIA,IAAJ,EAAU;UACVA,IAAI,GAAG,IAAP;;UAEA,KAAK,IAAIC,KAAK,GAAGzgB,SAAS,CAACd,MAAtB,EAA8ByC,IAAI,GAAG,IAAIyC,KAAJ,CAAUqc,KAAV,CAArC,EAAuDC,KAAK,GAAG,CAApE,EAAuEA,KAAK,GAAGD,KAA/E,EAAsFC,KAAK,EAA3F,EAA+F;YAC7F/e,IAAI,CAAC+e,KAAD,CAAJ,GAAc1gB,SAAS,CAAC0gB,KAAD,CAAvB;UACD;;UAEDxiB,IAAI,CAAC+K,MAAL,CAAY;YACVpD,IAAI,EAAE0V,UAAU,CAACI,GADP;YAEVpE,EAAE,EAAEA,EAFM;YAGVzR,IAAI,EAAEnE;UAHI,CAAZ;QAKD,CAdD;MAeD;MACD;AACN;AACA;AACA;AACA;AACA;;IA1BO,CA3WkB,EAuYlB;MACDlC,GAAG,EAAE,OADJ;MAEDgB,KAAK,EAAE,SAASuf,KAAT,CAAe/W,MAAf,EAAuB;QAC5B,IAAIiW,GAAG,GAAG,KAAKV,IAAL,CAAUvV,MAAM,CAACsO,EAAjB,CAAV;;QAEA,IAAI,eAAe,OAAO2H,GAA1B,EAA+B;UAC7BA,GAAG,CAAC9e,KAAJ,CAAU,IAAV,EAAgB6I,MAAM,CAACnD,IAAvB;UACA,OAAO,KAAK0Y,IAAL,CAAUvV,MAAM,CAACsO,EAAjB,CAAP;QACD;MACF;MACD;AACN;AACA;AACA;AACA;;IAdO,CAvYkB,EAuZlB;MACD9X,GAAG,EAAE,WADJ;MAEDgB,KAAK,EAAE,SAASqf,SAAT,CAAmBvI,EAAnB,EAAuB;QAC5B,KAAKA,EAAL,GAAUA,EAAV;QACA,KAAK6G,SAAL,GAAiB,IAAjB;QACA,KAAKuC,YAAL;QACA,KAAKrW,YAAL,CAAkB,SAAlB;MACD;MACD;AACN;AACA;AACA;AACA;;IAZO,CAvZkB,EAqalB;MACD7K,GAAG,EAAE,cADJ;MAEDgB,KAAK,EAAE,SAASkgB,YAAT,GAAwB;QAC7B,IAAI/P,MAAM,GAAG,IAAb;;QAEA,KAAKyN,aAAL,CAAmB1Y,OAAnB,CAA2B,UAAUhE,IAAV,EAAgB;UACzC,OAAOiP,MAAM,CAACuP,SAAP,CAAiBxe,IAAjB,CAAP;QACD,CAFD;QAGA,KAAK0c,aAAL,GAAqB,EAArB;QACA,KAAKC,UAAL,CAAgB3Y,OAAhB,CAAwB,UAAUsD,MAAV,EAAkB;UACxC2H,MAAM,CAAC4O,uBAAP,CAA+BvW,MAA/B;;UAEA2H,MAAM,CAAC3H,MAAP,CAAcA,MAAd;QACD,CAJD;QAKA,KAAKqV,UAAL,GAAkB,EAAlB;MACD;MACD;AACN;AACA;AACA;AACA;;IApBO,CArakB,EA2blB;MACD7e,GAAG,EAAE,cADJ;MAEDgB,KAAK,EAAE,SAASwf,YAAT,GAAwB;QAC7B,KAAK7C,OAAL;QACA,KAAKpI,OAAL,CAAa,sBAAb;MACD;MACD;AACN;AACA;AACA;AACA;AACA;AACA;;IAZO,CA3bkB,EAyclB;MACDvV,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAAS2c,OAAT,GAAmB;QACxB,IAAI,KAAKyB,IAAT,EAAe;UACb;UACA,KAAKA,IAAL,CAAUlZ,OAAV,CAAkB,UAAUkY,UAAV,EAAsB;YACtC,OAAOA,UAAU,EAAjB;UACD,CAFD;UAGA,KAAKgB,IAAL,GAAYtc,SAAZ;QACD;;QAED,KAAKpE,EAAL,CAAQ,UAAR,EAAoB,IAApB;MACD;MACD;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IA5BO,CAzckB,EAuelB;MACDsB,GAAG,EAAE,YADJ;MAEDgB,KAAK,EAAE,SAASwd,UAAT,GAAsB;QAC3B,IAAI,KAAKG,SAAT,EAAoB;UAClB,KAAKnV,MAAL,CAAY;YACVpD,IAAI,EAAE0V,UAAU,CAACgC;UADP,CAAZ;QAGD,CAL0B,CAKzB;;;QAGF,KAAKH,OAAL;;QAEA,IAAI,KAAKgB,SAAT,EAAoB;UAClB;UACA,KAAKpJ,OAAL,CAAa,sBAAb;QACD;;QAED,OAAO,IAAP;MACD;MACD;AACN;AACA;AACA;AACA;;IAvBO,CAvekB,EAggBlB;MACDvV,GAAG,EAAE,OADJ;MAEDgB,KAAK,EAAE,SAAS6M,KAAT,GAAiB;QACtB,OAAO,KAAK2Q,UAAL,EAAP;MACD;MACD;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAbO,CAhgBkB,EA+gBlB;MACDxe,GAAG,EAAE,UADJ;MAEDgB,KAAK,EAAE,SAASkZ,QAAT,CAAkBiH,SAAlB,EAA6B;QAClC,KAAKnC,KAAL,CAAW9E,QAAX,GAAsBiH,SAAtB;QACA,OAAO,IAAP;MACD;MACD;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAdO,CA/gBkB,EA+hBlB;MACDnhB,GAAG,EAAE,UADJ;MAEDgD,GAAG,EAAE,SAASA,GAAT,GAAe;QAClB,KAAKgc,KAAL,CAAW,UAAX,IAAyB,IAAzB;QACA,OAAO,IAAP;MACD;MACD;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAlBO,CA/hBkB,EAmjBlB;MACDhf,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAASiS,OAAT,CAAiBmO,QAAjB,EAA2B;QAChC,KAAKpC,KAAL,CAAW/L,OAAX,GAAqBmO,QAArB;QACA,OAAO,IAAP;MACD;MACD;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAhBO,CAnjBkB,EAqkBlB;MACDphB,GAAG,EAAE,OADJ;MAEDgB,KAAK,EAAE,SAASqgB,KAAT,CAAeP,QAAf,EAAyB;QAC9B,KAAKH,aAAL,GAAqB,KAAKA,aAAL,IAAsB,EAA3C;;QAEA,KAAKA,aAAL,CAAmBte,IAAnB,CAAwBye,QAAxB;;QAEA,OAAO,IAAP;MACD;MACD;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAnBO,CArkBkB,EA0lBlB;MACD9gB,GAAG,EAAE,YADJ;MAEDgB,KAAK,EAAE,SAASsgB,UAAT,CAAoBR,QAApB,EAA8B;QACnC,KAAKH,aAAL,GAAqB,KAAKA,aAAL,IAAsB,EAA3C;;QAEA,KAAKA,aAAL,CAAmBjE,OAAnB,CAA2BoE,QAA3B;;QAEA,OAAO,IAAP;MACD;MACD;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IA1BO,CA1lBkB,EAsnBlB;MACD9gB,GAAG,EAAE,QADJ;MAEDgB,KAAK,EAAE,SAASugB,MAAT,CAAgBT,QAAhB,EAA0B;QAC/B,IAAI,CAAC,KAAKH,aAAV,EAAyB;UACvB,OAAO,IAAP;QACD;;QAED,IAAIG,QAAJ,EAAc;UACZ,IAAIhW,SAAS,GAAG,KAAK6V,aAArB;;UAEA,KAAK,IAAInhB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsL,SAAS,CAACrL,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;YACzC,IAAIshB,QAAQ,KAAKhW,SAAS,CAACtL,CAAD,CAA1B,EAA+B;cAC7BsL,SAAS,CAACH,MAAV,CAAiBnL,CAAjB,EAAoB,CAApB;cACA,OAAO,IAAP;YACD;UACF;QACF,CATD,MASO;UACL,KAAKmhB,aAAL,GAAqB,EAArB;QACD;;QAED,OAAO,IAAP;MACD;MACD;AACN;AACA;AACA;;IAzBO,CAtnBkB,EAipBlB;MACD3gB,GAAG,EAAE,cADJ;MAEDgB,KAAK,EAAE,SAASwgB,YAAT,GAAwB;QAC7B,OAAO,KAAKb,aAAL,IAAsB,EAA7B;MACD;MACD;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAjBO,CAjpBkB,EAoqBlB;MACD3gB,GAAG,EAAE,eADJ;MAEDgB,KAAK,EAAE,SAASygB,aAAT,CAAuBX,QAAvB,EAAiC;QACtC,KAAKY,qBAAL,GAA6B,KAAKA,qBAAL,IAA8B,EAA3D;;QAEA,KAAKA,qBAAL,CAA2Brf,IAA3B,CAAgCye,QAAhC;;QAEA,OAAO,IAAP;MACD;MACD;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IArBO,CApqBkB,EA2rBlB;MACD9gB,GAAG,EAAE,oBADJ;MAEDgB,KAAK,EAAE,SAAS2gB,kBAAT,CAA4Bb,QAA5B,EAAsC;QAC3C,KAAKY,qBAAL,GAA6B,KAAKA,qBAAL,IAA8B,EAA3D;;QAEA,KAAKA,qBAAL,CAA2BhF,OAA3B,CAAmCoE,QAAnC;;QAEA,OAAO,IAAP;MACD;MACD;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IA1BO,CA3rBkB,EAutBlB;MACD9gB,GAAG,EAAE,gBADJ;MAEDgB,KAAK,EAAE,SAAS4gB,cAAT,CAAwBd,QAAxB,EAAkC;QACvC,IAAI,CAAC,KAAKY,qBAAV,EAAiC;UAC/B,OAAO,IAAP;QACD;;QAED,IAAIZ,QAAJ,EAAc;UACZ,IAAIhW,SAAS,GAAG,KAAK4W,qBAArB;;UAEA,KAAK,IAAIliB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsL,SAAS,CAACrL,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;YACzC,IAAIshB,QAAQ,KAAKhW,SAAS,CAACtL,CAAD,CAA1B,EAA+B;cAC7BsL,SAAS,CAACH,MAAV,CAAiBnL,CAAjB,EAAoB,CAApB;cACA,OAAO,IAAP;YACD;UACF;QACF,CATD,MASO;UACL,KAAKkiB,qBAAL,GAA6B,EAA7B;QACD;;QAED,OAAO,IAAP;MACD;MACD;AACN;AACA;AACA;;IAzBO,CAvtBkB,EAkvBlB;MACD1hB,GAAG,EAAE,sBADJ;MAEDgB,KAAK,EAAE,SAAS6gB,oBAAT,GAAgC;QACrC,OAAO,KAAKH,qBAAL,IAA8B,EAArC;MACD;MACD;AACN;AACA;AACA;AACA;AACA;AACA;;IAXO,CAlvBkB,EA+vBlB;MACD1hB,GAAG,EAAE,yBADJ;MAEDgB,KAAK,EAAE,SAAS+e,uBAAT,CAAiCvW,MAAjC,EAAyC;QAC9C,IAAI,KAAKkY,qBAAL,IAA8B,KAAKA,qBAAL,CAA2BjiB,MAA7D,EAAqE;UACnE,IAAIqL,SAAS,GAAG,KAAK4W,qBAAL,CAA2Bjd,KAA3B,EAAhB;;UAEA,IAAIqd,UAAU,GAAG7c,0BAA0B,CAAC6F,SAAD,CAA3C;UAAA,IACIiX,MADJ;;UAGA,IAAI;YACF,KAAKD,UAAU,CAACxc,CAAX,EAAL,EAAqB,CAAC,CAACyc,MAAM,GAAGD,UAAU,CAACtd,CAAX,EAAV,EAA0Be,IAAhD,GAAuD;cACrD,IAAIub,QAAQ,GAAGiB,MAAM,CAAC/gB,KAAtB;cACA8f,QAAQ,CAACngB,KAAT,CAAe,IAAf,EAAqB6I,MAAM,CAACnD,IAA5B;YACD;UACF,CALD,CAKE,OAAOV,GAAP,EAAY;YACZmc,UAAU,CAAC/f,CAAX,CAAa4D,GAAb;UACD,CAPD,SAOU;YACRmc,UAAU,CAACtc,CAAX;UACD;QACF;MACF;IApBA,CA/vBkB,CAAT,CAAZ;;IAsxBA,OAAO2R,MAAP;EACD,CA51ByB,CA41BxBrN,OA51BwB,CAA1B;EA81BA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;EACE,SAASkY,OAAT,CAAiBlW,IAAjB,EAAuB;IACrBA,IAAI,GAAGA,IAAI,IAAI,EAAf;IACA,KAAKmW,EAAL,GAAUnW,IAAI,CAACoW,GAAL,IAAY,GAAtB;IACA,KAAKC,GAAL,GAAWrW,IAAI,CAACqW,GAAL,IAAY,KAAvB;IACA,KAAKC,MAAL,GAActW,IAAI,CAACsW,MAAL,IAAe,CAA7B;IACA,KAAKC,MAAL,GAAcvW,IAAI,CAACuW,MAAL,GAAc,CAAd,IAAmBvW,IAAI,CAACuW,MAAL,IAAe,CAAlC,GAAsCvW,IAAI,CAACuW,MAA3C,GAAoD,CAAlE;IACA,KAAKC,QAAL,GAAgB,CAAhB;EACD;EACD;AACF;AACA;AACA;AACA;AACA;;;EAEEN,OAAO,CAAChjB,SAAR,CAAkBujB,QAAlB,GAA6B,YAAY;IACvC,IAAIN,EAAE,GAAG,KAAKA,EAAL,GAAU5V,IAAI,CAACmW,GAAL,CAAS,KAAKJ,MAAd,EAAsB,KAAKE,QAAL,EAAtB,CAAnB;;IAEA,IAAI,KAAKD,MAAT,EAAiB;MACf,IAAII,IAAI,GAAGpW,IAAI,CAACqW,MAAL,EAAX;MACA,IAAIC,SAAS,GAAGtW,IAAI,CAACwC,KAAL,CAAW4T,IAAI,GAAG,KAAKJ,MAAZ,GAAqBJ,EAAhC,CAAhB;MACAA,EAAE,GAAG,CAAC5V,IAAI,CAACwC,KAAL,CAAW4T,IAAI,GAAG,EAAlB,IAAwB,CAAzB,KAA+B,CAA/B,GAAmCR,EAAE,GAAGU,SAAxC,GAAoDV,EAAE,GAAGU,SAA9D;IACD;;IAED,OAAOtW,IAAI,CAAC6V,GAAL,CAASD,EAAT,EAAa,KAAKE,GAAlB,IAAyB,CAAhC;EACD,CAVD;EAWA;AACF;AACA;AACA;AACA;;;EAGEH,OAAO,CAAChjB,SAAR,CAAkB4jB,KAAlB,GAA0B,YAAY;IACpC,KAAKN,QAAL,GAAgB,CAAhB;EACD,CAFD;EAGA;AACF;AACA;AACA;AACA;;;EAGEN,OAAO,CAAChjB,SAAR,CAAkB6jB,MAAlB,GAA2B,UAAUX,GAAV,EAAe;IACxC,KAAKD,EAAL,GAAUC,GAAV;EACD,CAFD;EAGA;AACF;AACA;AACA;AACA;;;EAGEF,OAAO,CAAChjB,SAAR,CAAkB8jB,MAAlB,GAA2B,UAAUX,GAAV,EAAe;IACxC,KAAKA,GAAL,GAAWA,GAAX;EACD,CAFD;EAGA;AACF;AACA;AACA;AACA;;;EAGEH,OAAO,CAAChjB,SAAR,CAAkB+jB,SAAlB,GAA8B,UAAUV,MAAV,EAAkB;IAC9C,KAAKA,MAAL,GAAcA,MAAd;EACD,CAFD;;EAIA,IAAIW,OAAO,GAAG,aAAa,UAAU5V,QAAV,EAAoB;IAC7CxM,SAAS,CAACoiB,OAAD,EAAU5V,QAAV,CAAT;;IAEA,IAAIP,MAAM,GAAGvJ,YAAY,CAAC0f,OAAD,CAAzB;;IAEA,SAASA,OAAT,CAAiB1R,GAAjB,EAAsBxF,IAAtB,EAA4B;MAC1B,IAAImB,KAAJ;;MAEAhO,eAAe,CAAC,IAAD,EAAO+jB,OAAP,CAAf;;MAEA,IAAIC,EAAJ;;MAEAhW,KAAK,GAAGJ,MAAM,CAACnM,IAAP,CAAY,IAAZ,CAAR;MACAuM,KAAK,CAACiW,IAAN,GAAa,EAAb;MACAjW,KAAK,CAACmS,IAAN,GAAa,EAAb;;MAEA,IAAI9N,GAAG,IAAI,aAAa3S,OAAO,CAAC2S,GAAD,CAA/B,EAAsC;QACpCxF,IAAI,GAAGwF,GAAP;QACAA,GAAG,GAAGxO,SAAN;MACD;;MAEDgJ,IAAI,GAAGA,IAAI,IAAI,EAAf;MACAA,IAAI,CAACiG,IAAL,GAAYjG,IAAI,CAACiG,IAAL,IAAa,YAAzB;MACA9E,KAAK,CAACnB,IAAN,GAAaA,IAAb;MACAD,qBAAqB,CAAC1I,sBAAsB,CAAC8J,KAAD,CAAvB,EAAgCnB,IAAhC,CAArB;;MAEAmB,KAAK,CAACkW,YAAN,CAAmBrX,IAAI,CAACqX,YAAL,KAAsB,KAAzC;;MAEAlW,KAAK,CAACmW,oBAAN,CAA2BtX,IAAI,CAACsX,oBAAL,IAA6BC,QAAxD;;MAEApW,KAAK,CAACqW,iBAAN,CAAwBxX,IAAI,CAACwX,iBAAL,IAA0B,IAAlD;;MAEArW,KAAK,CAACsW,oBAAN,CAA2BzX,IAAI,CAACyX,oBAAL,IAA6B,IAAxD;;MAEAtW,KAAK,CAACuW,mBAAN,CAA0B,CAACP,EAAE,GAAGnX,IAAI,CAAC0X,mBAAX,MAAoC,IAApC,IAA4CP,EAAE,KAAK,KAAK,CAAxD,GAA4DA,EAA5D,GAAiE,GAA3F;;MAEAhW,KAAK,CAACwW,OAAN,GAAgB,IAAIzB,OAAJ,CAAY;QAC1BE,GAAG,EAAEjV,KAAK,CAACqW,iBAAN,EADqB;QAE1BnB,GAAG,EAAElV,KAAK,CAACsW,oBAAN,EAFqB;QAG1BlB,MAAM,EAAEpV,KAAK,CAACuW,mBAAN;MAHkB,CAAZ,CAAhB;;MAMAvW,KAAK,CAACgG,OAAN,CAAc,QAAQnH,IAAI,CAACmH,OAAb,GAAuB,KAAvB,GAA+BnH,IAAI,CAACmH,OAAlD;;MAEAhG,KAAK,CAACqS,WAAN,GAAoB,QAApB;MACArS,KAAK,CAACqE,GAAN,GAAYA,GAAZ;;MAEA,IAAIoS,OAAO,GAAG5X,IAAI,CAACoS,MAAL,IAAeA,MAA7B;;MAEAjR,KAAK,CAAC0W,OAAN,GAAgB,IAAID,OAAO,CAAC3H,OAAZ,EAAhB;MACA9O,KAAK,CAAC2W,OAAN,GAAgB,IAAIF,OAAO,CAAC/G,OAAZ,EAAhB;MACA1P,KAAK,CAACiS,YAAN,GAAqBpT,IAAI,CAAC+X,WAAL,KAAqB,KAA1C;MACA,IAAI5W,KAAK,CAACiS,YAAV,EAAwBjS,KAAK,CAACU,IAAN;MACxB,OAAOV,KAAP;IACD;;IAEDhN,YAAY,CAAC+iB,OAAD,EAAU,CAAC;MACrBhjB,GAAG,EAAE,cADgB;MAErBgB,KAAK,EAAE,SAASmiB,YAAT,CAAsBW,CAAtB,EAAyB;QAC9B,IAAI,CAACvjB,SAAS,CAACd,MAAf,EAAuB,OAAO,KAAKskB,aAAZ;QACvB,KAAKA,aAAL,GAAqB,CAAC,CAACD,CAAvB;QACA,OAAO,IAAP;MACD;IANoB,CAAD,EAOnB;MACD9jB,GAAG,EAAE,sBADJ;MAEDgB,KAAK,EAAE,SAASoiB,oBAAT,CAA8BU,CAA9B,EAAiC;QACtC,IAAIA,CAAC,KAAKhhB,SAAV,EAAqB,OAAO,KAAKkhB,qBAAZ;QACrB,KAAKA,qBAAL,GAA6BF,CAA7B;QACA,OAAO,IAAP;MACD;IANA,CAPmB,EAcnB;MACD9jB,GAAG,EAAE,mBADJ;MAEDgB,KAAK,EAAE,SAASsiB,iBAAT,CAA2BQ,CAA3B,EAA8B;QACnC,IAAIb,EAAJ;;QAEA,IAAIa,CAAC,KAAKhhB,SAAV,EAAqB,OAAO,KAAKmhB,kBAAZ;QACrB,KAAKA,kBAAL,GAA0BH,CAA1B;QACA,CAACb,EAAE,GAAG,KAAKQ,OAAX,MAAwB,IAAxB,IAAgCR,EAAE,KAAK,KAAK,CAA5C,GAAgD,KAAK,CAArD,GAAyDA,EAAE,CAACJ,MAAH,CAAUiB,CAAV,CAAzD;QACA,OAAO,IAAP;MACD;IATA,CAdmB,EAwBnB;MACD9jB,GAAG,EAAE,qBADJ;MAEDgB,KAAK,EAAE,SAASwiB,mBAAT,CAA6BM,CAA7B,EAAgC;QACrC,IAAIb,EAAJ;;QAEA,IAAIa,CAAC,KAAKhhB,SAAV,EAAqB,OAAO,KAAKohB,oBAAZ;QACrB,KAAKA,oBAAL,GAA4BJ,CAA5B;QACA,CAACb,EAAE,GAAG,KAAKQ,OAAX,MAAwB,IAAxB,IAAgCR,EAAE,KAAK,KAAK,CAA5C,GAAgD,KAAK,CAArD,GAAyDA,EAAE,CAACF,SAAH,CAAae,CAAb,CAAzD;QACA,OAAO,IAAP;MACD;IATA,CAxBmB,EAkCnB;MACD9jB,GAAG,EAAE,sBADJ;MAEDgB,KAAK,EAAE,SAASuiB,oBAAT,CAA8BO,CAA9B,EAAiC;QACtC,IAAIb,EAAJ;;QAEA,IAAIa,CAAC,KAAKhhB,SAAV,EAAqB,OAAO,KAAKqhB,qBAAZ;QACrB,KAAKA,qBAAL,GAA6BL,CAA7B;QACA,CAACb,EAAE,GAAG,KAAKQ,OAAX,MAAwB,IAAxB,IAAgCR,EAAE,KAAK,KAAK,CAA5C,GAAgD,KAAK,CAArD,GAAyDA,EAAE,CAACH,MAAH,CAAUgB,CAAV,CAAzD;QACA,OAAO,IAAP;MACD;IATA,CAlCmB,EA4CnB;MACD9jB,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAASiS,OAAT,CAAiB6Q,CAAjB,EAAoB;QACzB,IAAI,CAACvjB,SAAS,CAACd,MAAf,EAAuB,OAAO,KAAK2hB,QAAZ;QACvB,KAAKA,QAAL,GAAgB0C,CAAhB;QACA,OAAO,IAAP;MACD;MACD;AACN;AACA;AACA;AACA;AACA;;IAZO,CA5CmB,EA0DnB;MACD9jB,GAAG,EAAE,sBADJ;MAEDgB,KAAK,EAAE,SAASojB,oBAAT,GAAgC;QACrC;QACA,IAAI,CAAC,KAAKC,aAAN,IAAuB,KAAKN,aAA5B,IAA6C,KAAKN,OAAL,CAAanB,QAAb,KAA0B,CAA3E,EAA8E;UAC5E;UACA,KAAKgC,SAAL;QACD;MACF;MACD;AACN;AACA;AACA;AACA;AACA;AACA;;IAfO,CA1DmB,EA2EnB;MACDtkB,GAAG,EAAE,MADJ;MAEDgB,KAAK,EAAE,SAAS2M,IAAT,CAAcnL,EAAd,EAAkB;QACvB,IAAI8K,MAAM,GAAG,IAAb;;QAEA,IAAI,CAAC,KAAKgS,WAAL,CAAiB5c,OAAjB,CAAyB,MAAzB,CAAL,EAAuC,OAAO,IAAP;QACvC,KAAKmd,MAAL,GAAc,IAAI3I,QAAJ,CAAa,KAAK5F,GAAlB,EAAuB,KAAKxF,IAA5B,CAAd;QACA,IAAI2B,MAAM,GAAG,KAAKoS,MAAlB;QACA,IAAIphB,IAAI,GAAG,IAAX;QACA,KAAK6gB,WAAL,GAAmB,SAAnB;QACA,KAAKiF,aAAL,GAAqB,KAArB,CARuB,CAQK;;QAE5B,IAAIC,cAAc,GAAGxa,EAAE,CAACyD,MAAD,EAAS,MAAT,EAAiB,YAAY;UAClDhP,IAAI,CAAC0W,MAAL;UACA3S,EAAE,IAAIA,EAAE,EAAR;QACD,CAHsB,CAAvB,CAVuB,CAanB;;QAEJ,IAAIiiB,QAAQ,GAAGza,EAAE,CAACyD,MAAD,EAAS,OAAT,EAAkB,UAAU9H,GAAV,EAAe;UAChDlH,IAAI,CAACgV,OAAL;UACAhV,IAAI,CAAC6gB,WAAL,GAAmB,QAAnB;;UAEAhS,MAAM,CAACzC,YAAP,CAAoB,OAApB,EAA6BlF,GAA7B;;UAEA,IAAInD,EAAJ,EAAQ;YACNA,EAAE,CAACmD,GAAD,CAAF;UACD,CAFD,MAEO;YACL;YACAlH,IAAI,CAAC2lB,oBAAL;UACD;QACF,CAZgB,CAAjB;;QAcA,IAAI,UAAU,KAAKhD,QAAnB,EAA6B;UAC3B,IAAInO,OAAO,GAAG,KAAKmO,QAAnB;;UAEA,IAAInO,OAAO,KAAK,CAAhB,EAAmB;YACjBuR,cAAc,GADG,CACC;UACnB,CAL0B,CAKzB;;;UAGF,IAAIxE,KAAK,GAAG,KAAKhU,YAAL,CAAkB,YAAY;YACxCwY,cAAc;YACd/W,MAAM,CAACI,KAAP,GAFwC,CAExB;;YAEhBJ,MAAM,CAAC7C,IAAP,CAAY,OAAZ,EAAqB,IAAIsC,KAAJ,CAAU,SAAV,CAArB;UACD,CALW,EAKT+F,OALS,CAAZ;;UAOA,IAAI,KAAKnH,IAAL,CAAUsJ,SAAd,EAAyB;YACvB4K,KAAK,CAAC1K,KAAN;UACD;;UAED,KAAK8J,IAAL,CAAU/c,IAAV,CAAe,SAAS+b,UAAT,GAAsB;YACnCxS,YAAY,CAACoU,KAAD,CAAZ;UACD,CAFD;QAGD;;QAED,KAAKZ,IAAL,CAAU/c,IAAV,CAAemiB,cAAf;QACA,KAAKpF,IAAL,CAAU/c,IAAV,CAAeoiB,QAAf;QACA,OAAO,IAAP;MACD;MACD;AACN;AACA;AACA;AACA;AACA;;IAhEO,CA3EmB,EA6InB;MACDzkB,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAASsd,OAAT,CAAiB9b,EAAjB,EAAqB;QAC1B,OAAO,KAAKmL,IAAL,CAAUnL,EAAV,CAAP;MACD;MACD;AACN;AACA;AACA;AACA;;IATO,CA7ImB,EAwJnB;MACDxC,GAAG,EAAE,QADJ;MAEDgB,KAAK,EAAE,SAASmU,MAAT,GAAkB;QACvB;QACA,KAAK1B,OAAL,GAFuB,CAEP;;QAEhB,KAAK6L,WAAL,GAAmB,MAAnB;QACA,KAAKzU,YAAL,CAAkB,MAAlB,EALuB,CAKI;;QAE3B,IAAI4C,MAAM,GAAG,KAAKoS,MAAlB;QACA,KAAKT,IAAL,CAAU/c,IAAV,CAAe2H,EAAE,CAACyD,MAAD,EAAS,MAAT,EAAiB,KAAKiX,MAAL,CAAYpkB,IAAZ,CAAiB,IAAjB,CAAjB,CAAjB,EAA2D0J,EAAE,CAACyD,MAAD,EAAS,MAAT,EAAiB,KAAKkX,MAAL,CAAYrkB,IAAZ,CAAiB,IAAjB,CAAjB,CAA7D,EAAuG0J,EAAE,CAACyD,MAAD,EAAS,OAAT,EAAkB,KAAKkI,OAAL,CAAarV,IAAb,CAAkB,IAAlB,CAAlB,CAAzG,EAAqJ0J,EAAE,CAACyD,MAAD,EAAS,OAAT,EAAkB,KAAK8H,OAAL,CAAajV,IAAb,CAAkB,IAAlB,CAAlB,CAAvJ,EAAmM0J,EAAE,CAAC,KAAK4Z,OAAN,EAAe,SAAf,EAA0B,KAAKgB,SAAL,CAAetkB,IAAf,CAAoB,IAApB,CAA1B,CAArM;MACD;MACD;AACN;AACA;AACA;AACA;;IAhBO,CAxJmB,EA0KnB;MACDN,GAAG,EAAE,QADJ;MAEDgB,KAAK,EAAE,SAAS0jB,MAAT,GAAkB;QACvB,KAAK7Z,YAAL,CAAkB,MAAlB;MACD;MACD;AACN;AACA;AACA;AACA;;IATO,CA1KmB,EAqLnB;MACD7K,GAAG,EAAE,QADJ;MAEDgB,KAAK,EAAE,SAAS2jB,MAAT,CAAgBte,IAAhB,EAAsB;QAC3B,IAAI;UACF,KAAKud,OAAL,CAAa/G,GAAb,CAAiBxW,IAAjB;QACD,CAFD,CAEE,OAAOtE,CAAP,EAAU;UACV,KAAKwT,OAAL,CAAa,aAAb,EAA4BxT,CAA5B;QACD;MACF;MACD;AACN;AACA;AACA;AACA;;IAbO,CArLmB,EAoMnB;MACD/B,GAAG,EAAE,WADJ;MAEDgB,KAAK,EAAE,SAAS4jB,SAAT,CAAmBpb,MAAnB,EAA2B;QAChC,IAAI0H,MAAM,GAAG,IAAb,CADgC,CAGhC;;;QACA8C,QAAQ,CAAC,YAAY;UACnB9C,MAAM,CAACrG,YAAP,CAAoB,QAApB,EAA8BrB,MAA9B;QACD,CAFO,EAEL,KAAKwC,YAFA,CAAR;MAGD;MACD;AACN;AACA;AACA;AACA;;IAdO,CApMmB,EAoNnB;MACDhM,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAAS2U,OAAT,CAAiBhQ,GAAjB,EAAsB;QAC3B,KAAKkF,YAAL,CAAkB,OAAlB,EAA2BlF,GAA3B;MACD;MACD;AACN;AACA;AACA;AACA;AACA;;IAVO,CApNmB,EAgOnB;MACD3F,GAAG,EAAE,QADJ;MAEDgB,KAAK,EAAE,SAASyM,MAAT,CAAgB8O,GAAhB,EAAqBzQ,IAArB,EAA2B;QAChC,IAAI2B,MAAM,GAAG,KAAKyV,IAAL,CAAU3G,GAAV,CAAb;;QAEA,IAAI,CAAC9O,MAAL,EAAa;UACXA,MAAM,GAAG,IAAI0J,MAAJ,CAAW,IAAX,EAAiBoF,GAAjB,EAAsBzQ,IAAtB,CAAT;UACA,KAAKoX,IAAL,CAAU3G,GAAV,IAAiB9O,MAAjB;QACD;;QAED,OAAOA,MAAP;MACD;MACD;AACN;AACA;AACA;AACA;AACA;;IAjBO,CAhOmB,EAmPnB;MACDzN,GAAG,EAAE,UADJ;MAEDgB,KAAK,EAAE,SAAS6jB,QAAT,CAAkBpX,MAAlB,EAA0B;QAC/B,IAAIyV,IAAI,GAAGpjB,MAAM,CAACmG,IAAP,CAAY,KAAKid,IAAjB,CAAX;;QAEA,KAAK,IAAI4B,EAAE,GAAG,CAAT,EAAYC,KAAK,GAAG7B,IAAzB,EAA+B4B,EAAE,GAAGC,KAAK,CAACtlB,MAA1C,EAAkDqlB,EAAE,EAApD,EAAwD;UACtD,IAAIvI,GAAG,GAAGwI,KAAK,CAACD,EAAD,CAAf;UACA,IAAIzP,OAAO,GAAG,KAAK6N,IAAL,CAAU3G,GAAV,CAAd;;UAEA,IAAIlH,OAAO,CAAC2P,MAAZ,EAAoB;YAClB;UACD;QACF;;QAED,KAAKC,MAAL;MACD;MACD;AACN;AACA;AACA;AACA;AACA;;IArBO,CAnPmB,EA0QnB;MACDjlB,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAASmf,OAAT,CAAiB3W,MAAjB,EAAyB;QAC9B,IAAIF,cAAc,GAAG,KAAKqa,OAAL,CAAa1U,MAAb,CAAoBzF,MAApB,CAArB;;QAEA,KAAK,IAAIhK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8J,cAAc,CAAC7J,MAAnC,EAA2CD,CAAC,EAA5C,EAAgD;UAC9C,KAAKqgB,MAAL,CAAY5R,KAAZ,CAAkB3E,cAAc,CAAC9J,CAAD,CAAhC,EAAqCgK,MAAM,CAACyQ,OAA5C;QACD;MACF;MACD;AACN;AACA;AACA;AACA;;IAbO,CA1QmB,EAyRnB;MACDja,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAASyS,OAAT,GAAmB;QACxB,KAAK2L,IAAL,CAAUlZ,OAAV,CAAkB,UAAUkY,UAAV,EAAsB;UACtC,OAAOA,UAAU,EAAjB;QACD,CAFD;QAGA,KAAKgB,IAAL,CAAU3f,MAAV,GAAmB,CAAnB;QACA,KAAKmkB,OAAL,CAAajG,OAAb;MACD;MACD;AACN;AACA;AACA;AACA;;IAbO,CAzRmB,EAwSnB;MACD3d,GAAG,EAAE,QADJ;MAEDgB,KAAK,EAAE,SAASikB,MAAT,GAAkB;QACvB,KAAKV,aAAL,GAAqB,IAArB;QACA,KAAKF,aAAL,GAAqB,KAArB;QACA,KAAK9O,OAAL,CAAa,cAAb;QACA,IAAI,KAAKsK,MAAT,EAAiB,KAAKA,MAAL,CAAYhS,KAAZ;MAClB;MACD;AACN;AACA;AACA;AACA;;IAZO,CAxSmB,EAsTnB;MACD7N,GAAG,EAAE,YADJ;MAEDgB,KAAK,EAAE,SAASwd,UAAT,GAAsB;QAC3B,OAAO,KAAKyG,MAAL,EAAP;MACD;MACD;AACN;AACA;AACA;AACA;;IATO,CAtTmB,EAiUnB;MACDjlB,GAAG,EAAE,SADJ;MAEDgB,KAAK,EAAE,SAASuU,OAAT,CAAiBzI,MAAjB,EAAyBC,WAAzB,EAAsC;QAC3C,KAAK0G,OAAL;QACA,KAAKgQ,OAAL,CAAab,KAAb;QACA,KAAKtD,WAAL,GAAmB,QAAnB;QACA,KAAKzU,YAAL,CAAkB,OAAlB,EAA2BiC,MAA3B,EAAmCC,WAAnC;;QAEA,IAAI,KAAKgX,aAAL,IAAsB,CAAC,KAAKQ,aAAhC,EAA+C;UAC7C,KAAKD,SAAL;QACD;MACF;MACD;AACN;AACA;AACA;AACA;;IAhBO,CAjUmB,EAmVnB;MACDtkB,GAAG,EAAE,WADJ;MAEDgB,KAAK,EAAE,SAASsjB,SAAT,GAAqB;QAC1B,IAAInT,MAAM,GAAG,IAAb;;QAEA,IAAI,KAAKkT,aAAL,IAAsB,KAAKE,aAA/B,EAA8C,OAAO,IAAP;QAC9C,IAAI9lB,IAAI,GAAG,IAAX;;QAEA,IAAI,KAAKglB,OAAL,CAAanB,QAAb,IAAyB,KAAK0B,qBAAlC,EAAyD;UACvD,KAAKP,OAAL,CAAab,KAAb;UACA,KAAK/X,YAAL,CAAkB,kBAAlB;UACA,KAAKwZ,aAAL,GAAqB,KAArB;QACD,CAJD,MAIO;UACL,IAAIa,KAAK,GAAG,KAAKzB,OAAL,CAAalB,QAAb,EAAZ;UACA,KAAK8B,aAAL,GAAqB,IAArB;UACA,IAAIrE,KAAK,GAAG,KAAKhU,YAAL,CAAkB,YAAY;YACxC,IAAIvN,IAAI,CAAC8lB,aAAT,EAAwB;;YAExBpT,MAAM,CAACtG,YAAP,CAAoB,mBAApB,EAAyCpM,IAAI,CAACglB,OAAL,CAAanB,QAAtD,EAHwC,CAGyB;;;YAGjE,IAAI7jB,IAAI,CAAC8lB,aAAT,EAAwB;YACxB9lB,IAAI,CAACkP,IAAL,CAAU,UAAUhI,GAAV,EAAe;cACvB,IAAIA,GAAJ,EAAS;gBACPlH,IAAI,CAAC4lB,aAAL,GAAqB,KAArB;gBACA5lB,IAAI,CAAC6lB,SAAL;;gBAEAnT,MAAM,CAACtG,YAAP,CAAoB,iBAApB,EAAuClF,GAAvC;cACD,CALD,MAKO;gBACLlH,IAAI,CAAC0mB,WAAL;cACD;YACF,CATD;UAUD,CAjBW,EAiBTD,KAjBS,CAAZ;;UAmBA,IAAI,KAAKpZ,IAAL,CAAUsJ,SAAd,EAAyB;YACvB4K,KAAK,CAAC1K,KAAN;UACD;;UAED,KAAK8J,IAAL,CAAU/c,IAAV,CAAe,SAAS+b,UAAT,GAAsB;YACnCxS,YAAY,CAACoU,KAAD,CAAZ;UACD,CAFD;QAGD;MACF;MACD;AACN;AACA;AACA;AACA;;IA/CO,CAnVmB,EAoYnB;MACDhgB,GAAG,EAAE,aADJ;MAEDgB,KAAK,EAAE,SAASmkB,WAAT,GAAuB;QAC5B,IAAIC,OAAO,GAAG,KAAK3B,OAAL,CAAanB,QAA3B;QACA,KAAK+B,aAAL,GAAqB,KAArB;QACA,KAAKZ,OAAL,CAAab,KAAb;QACA,KAAK/X,YAAL,CAAkB,WAAlB,EAA+Bua,OAA/B;MACD;IAPA,CApYmB,CAAV,CAAZ;;IA8YA,OAAOpC,OAAP;EACD,CAvc0B,CAuczBlZ,OAvcyB,CAA3B;EAycA;AACF;AACA;;;EAEE,IAAIub,KAAK,GAAG,EAAZ;;EAEA,SAASC,MAAT,CAAgBhU,GAAhB,EAAqBxF,IAArB,EAA2B;IACzB,IAAInN,OAAO,CAAC2S,GAAD,CAAP,KAAiB,QAArB,EAA+B;MAC7BxF,IAAI,GAAGwF,GAAP;MACAA,GAAG,GAAGxO,SAAN;IACD;;IAEDgJ,IAAI,GAAGA,IAAI,IAAI,EAAf;IACA,IAAIyZ,MAAM,GAAGhL,GAAG,CAACjJ,GAAD,EAAMxF,IAAI,CAACiG,IAAL,IAAa,YAAnB,CAAhB;IACA,IAAIvR,MAAM,GAAG+kB,MAAM,CAAC/kB,MAApB;IACA,IAAIsX,EAAE,GAAGyN,MAAM,CAACzN,EAAhB;IACA,IAAI/F,IAAI,GAAGwT,MAAM,CAACxT,IAAlB;IACA,IAAIqO,aAAa,GAAGiF,KAAK,CAACvN,EAAD,CAAL,IAAa/F,IAAI,IAAIsT,KAAK,CAACvN,EAAD,CAAL,CAAU,MAAV,CAAzC;IACA,IAAI0N,aAAa,GAAG1Z,IAAI,CAAC2Z,QAAL,IAAiB3Z,IAAI,CAAC,sBAAD,CAArB,IAAiD,UAAUA,IAAI,CAAC4Z,SAAhE,IAA6EtF,aAAjG;IACA,IAAI1hB,EAAJ;;IAEA,IAAI8mB,aAAJ,EAAmB;MACjB9mB,EAAE,GAAG,IAAIskB,OAAJ,CAAYxiB,MAAZ,EAAoBsL,IAApB,CAAL;IACD,CAFD,MAEO;MACL,IAAI,CAACuZ,KAAK,CAACvN,EAAD,CAAV,EAAgB;QACduN,KAAK,CAACvN,EAAD,CAAL,GAAY,IAAIkL,OAAJ,CAAYxiB,MAAZ,EAAoBsL,IAApB,CAAZ;MACD;;MAEDpN,EAAE,GAAG2mB,KAAK,CAACvN,EAAD,CAAV;IACD;;IAED,IAAIyN,MAAM,CAAChY,KAAP,IAAgB,CAACzB,IAAI,CAACyB,KAA1B,EAAiC;MAC/BzB,IAAI,CAACyB,KAAL,GAAagY,MAAM,CAAC3O,QAApB;IACD;;IAED,OAAOlY,EAAE,CAAC+O,MAAH,CAAU8X,MAAM,CAACxT,IAAjB,EAAuBjG,IAAvB,CAAP;EACD,CAl8ImB,CAk8IlB;EACF;;;EAGA1L,QAAQ,CAACklB,MAAD,EAAS;IACftC,OAAO,EAAEA,OADM;IAEf7L,MAAM,EAAEA,MAFO;IAGfzY,EAAE,EAAE4mB,MAHW;IAIfhH,OAAO,EAAEgH;EAJM,CAAT,CAAR;;EAOA,OAAOA,MAAP;AAED,CAn9ID"},"metadata":{},"sourceType":"script"}